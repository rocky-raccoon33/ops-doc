{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4ec5\u4f9bops\u5185\u90e8\u4ea4\u6d41 \u00b6","title":"\u4ec5\u4f9bops\u5185\u90e8\u4ea4\u6d41"},{"location":"#ops","text":"","title":"\u4ec5\u4f9bops\u5185\u90e8\u4ea4\u6d41"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/01%20%E6%A6%82%E8%BF%B0/","text":"OceanBase\u662f 100% \u5b8c\u5168\u81ea\u4e3b\u7814\u53d1\u7684\u5206\u5e03\u5f0f\u6570\u636e\u5e93\uff0c\u8fde\u7eed9\u5e74\u7a33\u5b9a\u652f\u6491\u53cc\u5341\u4e00\uff0c \u662f\u5168\u7403\u552f\u4e00\u5728 TPC-C \u548c TPC-H \u6d4b\u8bd5\u4e0a\u90fd\u5237\u65b0\u4e86\u4e16\u754c\u7eaa\u5f55\u7684\u56fd\u4ea7\u539f\u751f\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u3002 \u81ea\u7814\u67b6\u6784\uff0c\u517c\u987e\u5206\u5e03\u5f0f\u67b6\u6784\u7684\u6269\u5c55\u6027\u4e0e\u96c6\u4e2d\u5f0f\u67b6\u6784\u7684\u6027\u80fd\u4f18\u52bf\uff0cOceanBase\u4ec5\u7528\u4e00\u5957\u5f15\u64ce\u540c\u65f6\u652f\u6301 TP(\u4e8b\u52a1\u578b) \u548c AP(\u67e5\u8be2\u5206\u6790\u578b) \u7684\u6df7\u5408\u8d1f\u8f7d\uff0c\u5177\u6709 \u9ad8\u53ef\u7528\u3001\u9ad8\u5ea6\u517c\u5bb9SQL\u6807\u51c6\u548c\u4e3b\u6d41\u5173\u7cfb\u6570\u636e\u5e93\u3001\u591a\u79df\u6237\u3001\u9ad8\u6027\u80fd\u3001\u900f\u660e\u53ef\u6269\u5c55\u3001\u9ad8\u6027\u4ef7\u6bd4\u7b49\u7279\u70b9 \u6838\u5fc3\u7279\u6027 \u00b6 \u9ad8\u53ef\u7528 \u591a\u526f\u672c\u67b6\u6784\u8ba9\u6574\u4e2a\u7cfb\u7edf\u6ca1\u6709\u4efb\u4f55\u5355\u70b9\u6545\u969c\uff0c\u57ce\u5e02\u7ea7\u6545\u969cRPO=0\uff0cRTO < 30\u79d2\uff0cOceanBase\u4e3b\u5907\u5e93\u7279\u6027\u4f7f\u5f97\u96c6\u7fa4\u95f4\u53ef\u4ee5\u53d1\u9001\u4e8b\u52a1\u65e5\u5fd7\u5b9e\u73b0\u6570\u636e\u540c\u6b65\u3002 \u9ad8\u517c\u5bb9\u6027 \u5bf9\u4e8emysql\u548coracle\u6570\u636e\u5e93\u751f\u6001\u7ed9\u4e88\u4e86\u5f88\u597d\u7684\u652f\u6301 \u591a\u79df\u6237 \u5355\u96c6\u7fa4\u4e0b\u53ef\u4ee5\u4e3a\u4e0d\u540c\u79df\u6237\u63d0\u4f9b\u670d\u52a1\uff0c\u5145\u5206\u5229\u7528\u670d\u52a1\u6027\u80fd \u9ad8\u6027\u80fd \u57fa\u4e8elsm-tree\u7ed3\u6784\u7684\u5b58\u50a8\u5f15\u64ce\u4f7f\u5f97\u8bfb\u5199\u8d85\u8d8a\u5173\u7cfb\u578b\u6570\u636e\u5e93 \u900f\u660e\u53ef\u6269\u5c55 OceanBase\u7279\u8272\u7684\u603b\u63a7\u670d\u52a1\u548c\u5206\u533a\u8d1f\u8f7d\u5747\u8861\u4f7f\u5f97\u7cfb\u7edf\u5177\u6709\u6781\u5f3a\u7684\u53ef\u6269\u5c55\u6027\uff0c\u53ef\u4ee5\u5728\u7ebf\u6269\u7f29\u5bb9\uff0c\u6269\u7f29\u5bb9\u540e\u81ea\u52a8\u5b9e\u73b0\u8d1f\u8f7d \u5206\u5e03\u5f0f\u4e8b\u52a1\u5f15\u64ce \u652f\u6301\u4e8b\u52a1ACID\u5c5e\u6027\uff0c\u5e76\u4e14\u652f\u6301\u5f3a\u4e00\u81f4\u6027 \u6df7\u5408\u4e8b\u7269\u548c\u5206\u6790\u5904\u7406 \u5206\u5e03\u5f0f\u8ba1\u7b97\u5f15\u64ce\u53ef\u4ee5\u5145\u5206\u5229\u7528\u591a\u4e2a\u8282\u70b9\u8ba1\u7b97\u80fd\u529b\uff0c\u5b8c\u6210\u5bf9OLTP\u548cOLAP\u5e94\u7528\u7684\u652f\u6301","title":"01 \u6982\u8ff0"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/01%20%E6%A6%82%E8%BF%B0/#_1","text":"\u9ad8\u53ef\u7528 \u591a\u526f\u672c\u67b6\u6784\u8ba9\u6574\u4e2a\u7cfb\u7edf\u6ca1\u6709\u4efb\u4f55\u5355\u70b9\u6545\u969c\uff0c\u57ce\u5e02\u7ea7\u6545\u969cRPO=0\uff0cRTO < 30\u79d2\uff0cOceanBase\u4e3b\u5907\u5e93\u7279\u6027\u4f7f\u5f97\u96c6\u7fa4\u95f4\u53ef\u4ee5\u53d1\u9001\u4e8b\u52a1\u65e5\u5fd7\u5b9e\u73b0\u6570\u636e\u540c\u6b65\u3002 \u9ad8\u517c\u5bb9\u6027 \u5bf9\u4e8emysql\u548coracle\u6570\u636e\u5e93\u751f\u6001\u7ed9\u4e88\u4e86\u5f88\u597d\u7684\u652f\u6301 \u591a\u79df\u6237 \u5355\u96c6\u7fa4\u4e0b\u53ef\u4ee5\u4e3a\u4e0d\u540c\u79df\u6237\u63d0\u4f9b\u670d\u52a1\uff0c\u5145\u5206\u5229\u7528\u670d\u52a1\u6027\u80fd \u9ad8\u6027\u80fd \u57fa\u4e8elsm-tree\u7ed3\u6784\u7684\u5b58\u50a8\u5f15\u64ce\u4f7f\u5f97\u8bfb\u5199\u8d85\u8d8a\u5173\u7cfb\u578b\u6570\u636e\u5e93 \u900f\u660e\u53ef\u6269\u5c55 OceanBase\u7279\u8272\u7684\u603b\u63a7\u670d\u52a1\u548c\u5206\u533a\u8d1f\u8f7d\u5747\u8861\u4f7f\u5f97\u7cfb\u7edf\u5177\u6709\u6781\u5f3a\u7684\u53ef\u6269\u5c55\u6027\uff0c\u53ef\u4ee5\u5728\u7ebf\u6269\u7f29\u5bb9\uff0c\u6269\u7f29\u5bb9\u540e\u81ea\u52a8\u5b9e\u73b0\u8d1f\u8f7d \u5206\u5e03\u5f0f\u4e8b\u52a1\u5f15\u64ce \u652f\u6301\u4e8b\u52a1ACID\u5c5e\u6027\uff0c\u5e76\u4e14\u652f\u6301\u5f3a\u4e00\u81f4\u6027 \u6df7\u5408\u4e8b\u7269\u548c\u5206\u6790\u5904\u7406 \u5206\u5e03\u5f0f\u8ba1\u7b97\u5f15\u64ce\u53ef\u4ee5\u5145\u5206\u5229\u7528\u591a\u4e2a\u8282\u70b9\u8ba1\u7b97\u80fd\u529b\uff0c\u5b8c\u6210\u5bf9OLTP\u548cOLAP\u5e94\u7528\u7684\u652f\u6301","title":"\u6838\u5fc3\u7279\u6027"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/","text":"\u6570\u636e\u7c7b\u578b \u00b6 \u4e0d\u652f\u6301\u7a7a\u95f4\u6570\u636e\u7c7b\u578b SQL\u8bed\u6cd5 \u00b6 \u4e0d\u652f\u6301 SELECT \u2026 FOR SHARE \u2026 \u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u5e8f \u00b6 \u652f\u6301\u73b0\u5728\u7ebf\u4e0a\u4f7f\u7528\u5b57\u7b26\u96c6 \u51fd\u6570 \u00b6 ob\u4e0d\u652f\u6301\u7684\u51fd\u6570ops\u5747\u4e0d\u6d89\u53ca \u5206\u533a\u652f\u6301 \u00b6 ob\u4e8c\u7ea7\u5206\u533a\u7c7b\u578b\u652f\u6301\u4f18\u4e8emysql \u5b58\u50a8\u5f15\u64ce \u00b6 \u57fa\u4e8elsm-tree\u67b6\u6784\u7684\u5b58\u50a8\u5f15\u64ce","title":"02 Mysql\u517c\u5bb9\u6027\u5bf9\u6bd4"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/#_1","text":"\u4e0d\u652f\u6301\u7a7a\u95f4\u6570\u636e\u7c7b\u578b","title":"\u6570\u636e\u7c7b\u578b"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/#sql","text":"\u4e0d\u652f\u6301 SELECT \u2026 FOR SHARE \u2026","title":"SQL\u8bed\u6cd5"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/#_2","text":"\u652f\u6301\u73b0\u5728\u7ebf\u4e0a\u4f7f\u7528\u5b57\u7b26\u96c6","title":"\u5b57\u7b26\u96c6\u548c\u5b57\u7b26\u5e8f"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/#_3","text":"ob\u4e0d\u652f\u6301\u7684\u51fd\u6570ops\u5747\u4e0d\u6d89\u53ca","title":"\u51fd\u6570"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/#_4","text":"ob\u4e8c\u7ea7\u5206\u533a\u7c7b\u578b\u652f\u6301\u4f18\u4e8emysql","title":"\u5206\u533a\u652f\u6301"},{"location":"oceanbase/1%20%E4%BB%8B%E7%BB%8D/02%20Mysql%E5%85%BC%E5%AE%B9%E6%80%A7%E5%AF%B9%E6%AF%94/#_5","text":"\u57fa\u4e8elsm-tree\u67b6\u6784\u7684\u5b58\u50a8\u5f15\u64ce","title":"\u5b58\u50a8\u5f15\u64ce"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/","text":"1 OBServer \u00b6 \u6bcf\u4e2a\u8282\u70b9\u4f1a\u8fd0\u884c\u4e00\u4e2a\u6216\u591a\u4e2aobserver\u7684\u670d\u52a1\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u670d\u52a1\u8d1f\u8d23\u81ea\u5df1\u6240\u5728\u8282\u70b9\u4e0a\u5206\u533a\u6570\u636e\u7684\u5b58\u53d6\uff0c\u4e5f\u8d1f\u8d23\u8def\u7531\u5230\u672c\u673aSQL\u8bed\u53e5\u7684\u89e3\u6790\u6267\u884c\uff0c\u901a\u8fc7TCP/IP \u534f\u8bae\u901a\u4fe1\uff0c\u540c\u65f6\u6bcf\u4e2a\u670d\u52a1\u4e0e\u5916\u90e8\u5e94\u7528\u5efa\u7acb\u8fde\u63a5\u63d0\u4f9b\u670d\u52a1 2 RootService \u00b6 \u8d44\u6e90\u7ba1\u7406 Region/Zone/Observer/Resource Pool/Unit\u7b49\u5143\u4fe1\u606f\u7ba1\u7406\uff0c\u6bd4\u5982\u4e0a\u4e0b\u7ebfOBServer\uff0c\u6539\u53d8tenant\u8d44\u6e90\u89c4\u683c\u7b49\u7b49 \u8d1f\u8f7d\u5747\u8861 \u51b3\u5b9aUnit/Partition\u5728\u591a\u4e2a\u673a\u5668\u95f4\u7684\u5206\u5e03\uff0c\u5747\u8861\u673a\u5668\u95f4\u4e3b\u5206\u533a\u4e2a\u6570\uff0c\u5728\u5bb9\u707e\u573a\u666f\u8fd8\u53ef\u4ee5\u8865\u5145\u7f3a\u5931Replica Schema\u7ba1\u7406 \u8d1f\u8d23\u5904\u7406DDL\u8bf7\u6c42\u5e76\u751f\u6210\u65b0Schema 3 PartiotionService \u00b6 \u5206\u533a\u670d\u52a1\u7528\u4e8e\u8d1f\u8d23\u6bcf\u4e2aOBServer\u4e0a\u5404\u4e2a\u5206\u533a\u7684\u7ba1\u7406\u548c\u64cd\u4f5c\u529f\u80fd\u7684\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e0e\u4e8b\u52a1\u5f15\u64ce\u548c\u5b58\u50a8\u5f15\u64ce\u5b58\u5728\u5f88\u591a\u8c03\u7528\u5173\u7cfb 4 Paxos\u7ec4 \u00b6 OB\u57fa\u4e8ePaxos\u7684 \u5206\u5e03\u5f0f\u9009\u4e3e\u7b97\u6cd5 \u5b9e\u73b0\u7cfb\u7edf\u9ad8\u53ef\u7528\uff0c\u6700\u5c0f\u529b\u5ea6\u53ef\u4ee5\u505a\u5230\u5206\u533a\u7ea7\u522b \u4e3b\u526f\u5206\u533a\u901a\u8fc7 multi-paxos\u5206\u5e03\u5f0f\u5171\u8bc6\u534f\u8bae \u8fdb\u884c\u65e5\u5fd7\u540c\u6b65\u5b9e\u73b0\u6570\u636e\u4e00\u81f4\u6027\uff0c\u5206\u533a\u548c\u526f\u672c\u6784\u6210\u72ec\u7acb\u7684Paxos\u590d\u5236\u7ec4\uff0c\u4e3b\u5206\u533a\u5206\u5e03\u5728\u4e0d\u540cObserver\u4e0a\u53ef\u4ee5\u5b9e\u73b0\u591a\u70b9\u5199\u5165 5 \u5b58\u50a8\u5f15\u64ce\uff08LSM-Tree\uff09Log Structured Merge Tree \u00b6 \u6ce8: \u589e\u91cf\u6570\u636e\u5b58\u653e\u5728\u5185\u5b58(MemTable)\uff0c\u57fa\u7ebf\u6570\u636e\u5b58\u653e\u5728\u78c1\u76d8(SSTable)\u3002 \u5185\u5b58\u8fbe\u5230\u9608\u503c\u4f1a\u8f6c\u50a8SSTable \u6700\u7ec8\u548c\u57fa\u7ebfSSTable(ROS) \u5408\u5e76 DML \u00b6 \u63d2\u5165 \u00b6 \u5199\u5165\u5185\u5b58\u6811\uff0c\u540c\u65f6\u4f1a\u66f4\u65b0\u652f\u6491\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5982\u884c\u7f13\u5b58\u7ea7\u522b\u5e03\u9686\u8fc7\u6ee4\u5668\u548c\u7a00\u758f\u7d22\u5f15 \u5185\u5b58\u6811\u8d85\u8fc7\u9608\u503c\uff0c\u4f1a\u5c06\u5185\u5b58\u6811\u6570\u636e\u6309\u7167\u987a\u5e8f\u5237\u5230\u8f6c\u50a8SSTable \u66f4\u65b0 \u00b6 \u901a\u8fc7\u884c\u7f13\u5b58\u67e5\u8be2\u5bf9\u5e94\u6570\u636e\uff0c\u66f4\u65b0\u6570\u636e\u5237\u5230\u5185\u5b58\u6811 \u884c\u7f13\u5b58\u4e0d\u5b58\u5728\uff0c\u67e5\u8be2\u5757\u7f13\u5b58 -> \u8f6c\u50a8SSTable -> \u57fa\u7ebfSSTable\uff0cload\u5230\u5185\u5b58\u66f4\u65b0 \u5220\u9664 \u00b6 \u5c06\u5220\u9664\u6570\u636e\u6807\u8bb0\u4e3a\u5893\u7891\u6570\u636e\uff0c\u6700\u7ec8\u8f6c\u50a8\u5230\u57fa\u7ebfSSTable\uff0c\u538b\u5b9e\u540e\u53ef\u4ee5\u5c06\u6b64\u5185\u5b58\u533a\u57df\u6e05\u7a7a \u67e5\u8be2 \u00b6 \u901a\u8fc7\u5e03\u9686\u8fc7\u6ee4\u5668\u67e5\u8be2\u884c\u7f13\u5b58\uff0c\u5b58\u5728\u76f4\u63a5\u67e5\u8be2\u884c\u7f13\u5b58\uff0c\u4e0d\u5b58\u5728\u67e5\u8be2\u5185\u5b58\u6811\u548c\u5757\u7f13\u5b58\uff0c\u4ecd\u4e0d\u5b58\u5728\u67e5\u8be2\u57fa\u7ebfSSTable","title":"01 \u6574\u4f53\u67b6\u6784"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#1-observer","text":"\u6bcf\u4e2a\u8282\u70b9\u4f1a\u8fd0\u884c\u4e00\u4e2a\u6216\u591a\u4e2aobserver\u7684\u670d\u52a1\u8fdb\u7a0b\uff0c\u6bcf\u4e2a\u670d\u52a1\u8d1f\u8d23\u81ea\u5df1\u6240\u5728\u8282\u70b9\u4e0a\u5206\u533a\u6570\u636e\u7684\u5b58\u53d6\uff0c\u4e5f\u8d1f\u8d23\u8def\u7531\u5230\u672c\u673aSQL\u8bed\u53e5\u7684\u89e3\u6790\u6267\u884c\uff0c\u901a\u8fc7TCP/IP \u534f\u8bae\u901a\u4fe1\uff0c\u540c\u65f6\u6bcf\u4e2a\u670d\u52a1\u4e0e\u5916\u90e8\u5e94\u7528\u5efa\u7acb\u8fde\u63a5\u63d0\u4f9b\u670d\u52a1","title":"1 OBServer"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#2-rootservice","text":"\u8d44\u6e90\u7ba1\u7406 Region/Zone/Observer/Resource Pool/Unit\u7b49\u5143\u4fe1\u606f\u7ba1\u7406\uff0c\u6bd4\u5982\u4e0a\u4e0b\u7ebfOBServer\uff0c\u6539\u53d8tenant\u8d44\u6e90\u89c4\u683c\u7b49\u7b49 \u8d1f\u8f7d\u5747\u8861 \u51b3\u5b9aUnit/Partition\u5728\u591a\u4e2a\u673a\u5668\u95f4\u7684\u5206\u5e03\uff0c\u5747\u8861\u673a\u5668\u95f4\u4e3b\u5206\u533a\u4e2a\u6570\uff0c\u5728\u5bb9\u707e\u573a\u666f\u8fd8\u53ef\u4ee5\u8865\u5145\u7f3a\u5931Replica Schema\u7ba1\u7406 \u8d1f\u8d23\u5904\u7406DDL\u8bf7\u6c42\u5e76\u751f\u6210\u65b0Schema","title":"2 RootService"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#3-partiotionservice","text":"\u5206\u533a\u670d\u52a1\u7528\u4e8e\u8d1f\u8d23\u6bcf\u4e2aOBServer\u4e0a\u5404\u4e2a\u5206\u533a\u7684\u7ba1\u7406\u548c\u64cd\u4f5c\u529f\u80fd\u7684\u6a21\u5757\uff0c\u8fd9\u4e2a\u6a21\u5757\u4e0e\u4e8b\u52a1\u5f15\u64ce\u548c\u5b58\u50a8\u5f15\u64ce\u5b58\u5728\u5f88\u591a\u8c03\u7528\u5173\u7cfb","title":"3 PartiotionService"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#4-paxos","text":"OB\u57fa\u4e8ePaxos\u7684 \u5206\u5e03\u5f0f\u9009\u4e3e\u7b97\u6cd5 \u5b9e\u73b0\u7cfb\u7edf\u9ad8\u53ef\u7528\uff0c\u6700\u5c0f\u529b\u5ea6\u53ef\u4ee5\u505a\u5230\u5206\u533a\u7ea7\u522b \u4e3b\u526f\u5206\u533a\u901a\u8fc7 multi-paxos\u5206\u5e03\u5f0f\u5171\u8bc6\u534f\u8bae \u8fdb\u884c\u65e5\u5fd7\u540c\u6b65\u5b9e\u73b0\u6570\u636e\u4e00\u81f4\u6027\uff0c\u5206\u533a\u548c\u526f\u672c\u6784\u6210\u72ec\u7acb\u7684Paxos\u590d\u5236\u7ec4\uff0c\u4e3b\u5206\u533a\u5206\u5e03\u5728\u4e0d\u540cObserver\u4e0a\u53ef\u4ee5\u5b9e\u73b0\u591a\u70b9\u5199\u5165","title":"4 Paxos\u7ec4"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#5-lsm-treelog-structured-merge-tree","text":"\u6ce8: \u589e\u91cf\u6570\u636e\u5b58\u653e\u5728\u5185\u5b58(MemTable)\uff0c\u57fa\u7ebf\u6570\u636e\u5b58\u653e\u5728\u78c1\u76d8(SSTable)\u3002 \u5185\u5b58\u8fbe\u5230\u9608\u503c\u4f1a\u8f6c\u50a8SSTable \u6700\u7ec8\u548c\u57fa\u7ebfSSTable(ROS) \u5408\u5e76","title":"5 \u5b58\u50a8\u5f15\u64ce\uff08LSM-Tree\uff09Log Structured Merge Tree"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#dml","text":"","title":"DML"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#_1","text":"\u5199\u5165\u5185\u5b58\u6811\uff0c\u540c\u65f6\u4f1a\u66f4\u65b0\u652f\u6491\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5982\u884c\u7f13\u5b58\u7ea7\u522b\u5e03\u9686\u8fc7\u6ee4\u5668\u548c\u7a00\u758f\u7d22\u5f15 \u5185\u5b58\u6811\u8d85\u8fc7\u9608\u503c\uff0c\u4f1a\u5c06\u5185\u5b58\u6811\u6570\u636e\u6309\u7167\u987a\u5e8f\u5237\u5230\u8f6c\u50a8SSTable","title":"\u63d2\u5165"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#_2","text":"\u901a\u8fc7\u884c\u7f13\u5b58\u67e5\u8be2\u5bf9\u5e94\u6570\u636e\uff0c\u66f4\u65b0\u6570\u636e\u5237\u5230\u5185\u5b58\u6811 \u884c\u7f13\u5b58\u4e0d\u5b58\u5728\uff0c\u67e5\u8be2\u5757\u7f13\u5b58 -> \u8f6c\u50a8SSTable -> \u57fa\u7ebfSSTable\uff0cload\u5230\u5185\u5b58\u66f4\u65b0","title":"\u66f4\u65b0"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#_3","text":"\u5c06\u5220\u9664\u6570\u636e\u6807\u8bb0\u4e3a\u5893\u7891\u6570\u636e\uff0c\u6700\u7ec8\u8f6c\u50a8\u5230\u57fa\u7ebfSSTable\uff0c\u538b\u5b9e\u540e\u53ef\u4ee5\u5c06\u6b64\u5185\u5b58\u533a\u57df\u6e05\u7a7a","title":"\u5220\u9664"},{"location":"oceanbase/2%20%E6%9E%B6%E6%9E%84/01%20%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84/#_4","text":"\u901a\u8fc7\u5e03\u9686\u8fc7\u6ee4\u5668\u67e5\u8be2\u884c\u7f13\u5b58\uff0c\u5b58\u5728\u76f4\u63a5\u67e5\u8be2\u884c\u7f13\u5b58\uff0c\u4e0d\u5b58\u5728\u67e5\u8be2\u5185\u5b58\u6811\u548c\u5757\u7f13\u5b58\uff0c\u4ecd\u4e0d\u5b58\u5728\u67e5\u8be2\u57fa\u7ebfSSTable","title":"\u67e5\u8be2"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/","text":"1 \u6982\u8ff0 \u00b6 \u79df\u6237\u65e2\u662f\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u5bb9\u5668\uff0c\u53c8\u662f\u8d44\u6e90\uff08CPU/Memory/IO\uff09\u7684\u5bb9\u5668 2 \u7cfb\u7edf\u79df\u6237 \u00b6 \u7ba1\u7406\u5458\uff1a \u7ba1\u7406\u6240\u6709\u666e\u901a\u79df\u6237 3 \u666e\u901a\u79df\u6237 \u00b6 \u903b\u8f91\u4e0a = mysql server \u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u7528\u6237 \u53ef\u4ee5\u521b\u5efa\u6570\u636e\u5e93\uff08database\uff09\u3001\u8868\uff08table\uff09\u7b49\u6240\u6709\u5ba2\u4f53\u5bf9\u8c61 \u6709\u81ea\u5df1\u72ec\u7acb\u7684\u7cfb\u7edf\u8868\u548c\u7cfb\u7edf\u89c6\u56fe \u6709\u81ea\u5df1\u72ec\u7acb\u7684\u7cfb\u7edf\u53d8\u91cf \u6570\u636e\u5e93\u5b9e\u4f8b\u6240\u5177\u5907\u7684\u5176\u4ed6\u7279\u6027 \u6240\u6709\u7528\u6237\u6570\u636e\u7684\u5143\u4fe1\u606f\u90fd\u5b58\u50a8\u5728\u666e\u901a\u79df\u6237\u4e0b\uff0c\u79df\u6237 \u5f7c\u6b64\u9694\u79bb\u4e0d\u53ef\u8bbf\u95ee 4 \u79df\u6237\u4e0e\u8d44\u6e90\u7ba1\u7406 \u00b6 OB \u4e00\u4e2a\u96c6\u7fa4\u5185\u53ef\u5305\u542b\u591a\u4e2a\u76f8\u4e92\u72ec\u7acb\u7684\u79df\u6237 \u79df\u6237\u8d44\u6e90\u7684\u521b\u5efa \u00b6 \u521b\u5efa\u79df\u6237\u524d\uff0c\u9700\u9996\u5148\u786e\u5b9a \u79df\u6237\u7684\u8d44\u6e90\u914d\u7f6e\u3001\u4f7f\u7528\u8d44\u6e90\u8303\u56f4 \u7b49\u3002\u79df\u6237\u521b\u5efa\u7684\u901a\u7528\u6d41\u7a0b\u5982\u4e0b\uff1a \u521b\u5efa\u8d44\u6e90\u914d\u7f6e \u7528\u6765\u63cf\u8ff0\u8d44\u6e90\u6c60\u4e2d\u6bcf\u4e2a\u8d44\u6e90\u5355\u5143\u53ef\u7528\u7684 CPU\u3001\u5185\u5b58\u3001\u5b58\u50a8\u7a7a\u95f4\u548c IOPS \u7b49\u7684\u89c4\u683c \u521b\u5efa\u8d44\u6e90\u6c60 \u8d44\u6e90\u6c60\u7531\u82e5\u5e72\u4e2a\u8d44\u6e90\u5355\u5143\u7ec4\u6210\uff0c\u901a\u8fc7\u7ed9\u8d44\u6e90\u6c60\u6307\u5b9a\u8d44\u6e90\u914d\u7f6e\uff0c\u53ef\u6307\u5b9a\u8d44\u6e90\u6c60\u4e0b\u5404\u8d44\u6e90\u5355\u5143\u7684\u7269\u7406\u8d44\u6e90 \u521b\u5efa\u79df\u6237 \u4e00\u4e2a\u8d44\u6e90\u6c60\u4ec5\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u79df\u6237\uff0c\u4e00\u4e2a\u79df\u6237\u53ef\u62e5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8d44\u6e90\u6c60\uff0c\u79df\u6237\u5728\u540c\u4e00\u4e2a Zone \u4e0a\u4ec5\u80fd\u6709\u4e00\u4e2a\u8d44\u6e90\u6c60 \u79df\u6237\u8d44\u6e90\u7684\u53d8\u66f4 \u00b6 \u4fee\u6539\u8d44\u6e90\u914d\u7f6e \u76f4\u63a5\u8c03\u6574\u8d44\u6e90\u914d\u7f6e\u7684 CPU \u6216 Memory \u7b49\u7684\u503c\uff0c\u8fdb\u800c\u76f4\u63a5\u5f71\u54cd\u79df\u6237\u5728\u8be5\u8d44\u6e90\u6c60\u4e0a\u7684\u8d44\u6e90\u89c4\u683c\u548c\u670d\u52a1\u80fd\u529b obclient > CREATE RESOURCE UNIT uc1 MAX_CPU 5 , MIN_CPU 4 , MAX_MEMORY '36G' , MIN_MEMORY '32G' , MAX_IOPS 128 , MIN_IOPS 128 , MAX_DISK_SIZE '2T' , MAX_SESSION_NUM 64 ; obclient > CREATE RESOURCE POOL pool1 UNIT 'uc1' , UNIT_NUM 2 , ZONE_LIST ( 'z1' , 'z2' ); obclient > CREATE RESOURCE POOL pool2 UNIT 'uc1' , UNIT_NUM 1 , ZONE_LIST ( 'z3' ); obclient > CREATE TENANT tt resource_pool_list = ( 'pool1' , 'pool2' ); obclient > ALTER RESOURCE UNIT uc1 MAX_CPU 6 , MIN_MEMORY '36G' ; \u5207\u6362\u8d44\u6e90\u914d\u7f6e \u8c03\u6574\u8d44\u6e90\u6c60\u4e0b\u6bcf\u4e2a\u8d44\u6e90\u5355\u5143\u7684\u8d44\u6e90\u89c4\u683c\uff0c\u8fdb\u800c\u8c03\u6574\u79df\u6237\u5728\u8be5\u8d44\u6e90\u6c60\u4e0a\u7684\u8d44\u6e90\u89c4\u683c\u548c\u670d\u52a1\u80fd\u529b obclient > ALTER RESOURCE POOL rp1 UNIT 'uc2' ; \u53d8\u66f4 UNIT_NUM \u8c03\u6574\u8d44\u6e90\u6c60\u7684 UNIT_NUM \u53ef\u4ee5\u8c03\u6574\u8d44\u6e90\u6c60\u4e0b\u6bcf\u4e2a Zone \u5185\u8d44\u6e90\u5355\u5143\u7684\u6570\u91cf\uff0c\u8fdb\u800c\u901a\u8fc7\u8c03\u6574\u8d44\u6e90\u5355\u5143\u7684\u6570\u91cf\u6765\u63d0\u9ad8\u6216\u964d\u4f4e\u8be5\u79df\u6237\u5728\u5bf9\u5e94 Zone \u4e0a\u7684\u670d\u52a1\u80fd\u529b obclient > CREATE RESOURCE POOL rp1 UNIT 'uc1' , UNIT_NUM 2 , ZONE_LIST ( 'zone1' , 'zone2' ); obclient > ALTER RESOURCE POOL rp1 UNIT_NUM 3 ; // \u8c03\u5927 unit num obclient > ALTER RESOURCE POOL rp1 UNIT_NUM 2 ; // \u8c03\u5c0f unit num obclient > ALTER RESOURCE POOL rp1 UNIT_NUM 1 DELETE UNIT = ( 1001 , 1003 ); // \u6307\u5b9a\u8d44\u6e90\u5355\u5143\u8c03\u5c0f unit num \u53d8\u66f4 ZONE_LIST \u8c03\u6574\u8d44\u6e90\u6c60\u7684 ZONE_LIST \u53ef\u4ee5\u8c03\u6574\u8d44\u6e90\u6c60\u5728 Zone \u7ef4\u5ea6\u7684\u4f7f\u7528\u8303\u56f4\uff0c\u4ece\u800c\u8c03\u6574\u79df\u6237\u6570\u636e\u5728 Zone \u7ef4\u5ea6\u7684\u670d\u52a1\u8303\u56f4 obclient > CREATE RESOURCE POOL pool1 UNIT_NUM = 3 , UNIT = 'unit_config' , ZONE_LIST = ( 'z1' , 'z2' , 'z3' ); obclient > CREATE RESOURCE POOL pool2 UNIT_NUM = 3 , UNIT = 'unit_config' , ZONE_LIST = ( 'z1' , 'z2' , 'z3' ); obclient > ALTER RESOURCE POOL pool1 ZONE_LIST = ( 'z1' , 'z2' , 'z3' , 'z4' ); obclient > ALTER RESOURCE POOL pool2 ZONE_LIST = ( 'z1' , 'z2' ); \u5206\u88c2\u8d44\u6e90\u6c60 obclient > CREATE RESOURCE POOL pool1 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z1' , 'z2' , 'z3' ); obclient > ALTER RESOURCE POOL pool1 SPLIT INTO ( 'pool10' , 'pool11' , 'pool12' ) ON ( 'z1' , 'z2' , 'z3' ); obclient > ALTER RESOURCE POOL pool10 UNIT = 'uc1' ; obclient > ALTER RESOURCE POOL pool11 UNIT = 'uc2' ; obclient > ALTER RESOURCE POOL pool12 UNIT = 'uc3' ; \u5408\u5e76\u8d44\u6e90\u6c60 obclient > CREATE RESOURCE POOL pool1 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z1' ); obclient > CREATE RESOURCE POOL pool2 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z2' ); obclient > CREATE RESOURCE POOL pool3 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z3' ); obclient > ALTER RESOURCE POOL MERGE ( 'pool1' , 'pool2' , 'pool3' ) INTO ( 'pool0' ); 5 \u79df\u6237\u95f4\u7684\u8d44\u6e90\u9694\u79bb \u00b6 \u4e3a\u4e86\u786e\u4fdd\u79df\u6237\u95f4\u4e0d\u51fa\u73b0\u8d44\u6e90\u4e89\u62a2\u4fdd\u969c\u4e1a\u52a1\u7a33\u5b9a\u8fd0\u884c\uff0c OB \u9488\u5bf9\u79df\u6237\u95f4\u7684\u8d44\u6e90\u8fdb\u884c\u4e86\u9694\u79bb\u3002 OB \u4e2d\u628a Unit \u5f53\u4f5c\u7ed9\u79df\u6237\u5206\u914d\u8d44\u6e90\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u4e00\u4e2a Unit \u53ef\u4ee5\u7c7b\u6bd4\u4e8e\u4e00\u4e2a Docker \u5bb9\u5668\u3002\u4e00\u4e2a OBServer \u4e0a\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a Unit\uff0c\u5728 OBServer\u4e0a\u6bcf\u521b\u5efa\u4e00\u4e2a Unit \u90fd\u4f1a\u5360\u7528\u4e00\u90e8\u5206\u8be5 OBServer \u7684 CPU\u3001\u5185\u5b58\u7b49\u7269\u7406\u8d44\u6e90\u3002 \u4e00\u4e2a\u79df\u6237\u53ef\u4ee5\u5728\u591a\u4e2a OBServer\u4e0a\u653e\u7f6e\u591a\u4e2a Unit\uff0c\u4f46\u4e00\u4e2a\u7279\u5b9a\u7684\u79df\u6237\u5728\u67d0\u4e2a OBServer \u4e0a\u53ea\u80fd\u6709\u4e00\u4e2a Unit\u3002\u4e00\u4e2a\u79df\u6237\u7684\u591a\u4e2a Unit \u76f8\u4e92\u72ec\u7acb\uff0cOceanBase \u6570\u636e\u5e93\u76ee\u524d\u6ca1\u6709\u6c47\u603b\u591a\u4e2a Unit \u7684\u8d44\u6e90\u5360\u7528\u8fdb\u884c\u5168\u5c40\u7684\u8d44\u6e90\u63a7\u5236, \u5177\u4f53\u6765\u8bb2\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u4e00\u4e2a\u79df\u6237\u5728\u67d0\u4e2a OBServer \u4e0a\u7684\u8d44\u6e90\u6ca1\u5f97\u5230\u6ee1\u8db3\uff0c\u5c31\u8ba9\u5b83\u5728\u53e6\u4e00\u4e2a OBServer \u4e0a\u53bb\u62a2\u5176\u5b83\u79df\u6237\u7684\u8d44\u6e90\u3002 \u6240\u8c13\u8d44\u6e90\u9694\u79bb\uff0c\u5c31\u662f OBServer \u63a7\u5236\u672c\u5730\u591a\u4e2a Unit \u95f4\u7684\u8d44\u6e90\u5206\u914d\u7684\u884c\u4e3a, \u5b83\u662f OBServer \u672c\u5730\u7684\u884c\u4e3a\u3002 \u666e\u901a\u7528\u6237\u7684\u89c6\u89d2\u770b\u9694\u79bb\u6548\u679c \u5185\u5b58\u5b8c\u5168\u9694\u79bb SQL \u6267\u884c\u8fc7\u7a0b\u5404\u79cd\u7b97\u5b50\u4f7f\u7528\u7684\u5185\u5b58\u662f\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684\u5185\u5b58\u8017\u5c3d\u4e0d\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u79df\u6237\u3002 Block Cache \u548c MEMTable \u662f\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684\u5185\u5b58\u8017\u5c3d\u4e0d\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u79df\u6237\u7684\u5199\u5165\u548c\u8bfb\u53d6\u3002 CPU \u901a\u8fc7\u7528\u6237\u6001\u8c03\u5ea6\u5b9e\u73b0\u9694\u79bb \u4e00\u4e2a\u79df\u6237\u80fd\u4f7f\u7528\u7684 CPU \u8d44\u6e90\u662f\u7531 Unit \u89c4\u683c\u51b3\u5b9a\u7684\uff0c\u4e0d\u8fc7 OBServer \u76ee\u524d\u662f\u5141\u8bb8\u79df\u6237 CPU \u8d85\u5356\u7684\u3002 \u5927\u90e8\u5206\u6570\u636e\u7ed3\u6784\u662f\u5206\u79bb\u7684 SQL \u7684 Plan Cache \u662f\u79df\u6237\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684 Plan Cache \u6dd8\u6c70\u4e0d\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u79df\u6237\u3002 SQL \u7684 Audit \u8868\u662f\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684 QPS \u592a\u9ad8\uff0c\u4e0d\u4f1a\u51b2\u6d17\u6389\u53e6\u4e00\u4e2a\u79df\u6237\u7684 Audit \u4fe1\u606f\u3002 \u4e8b\u52a1\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\u662f\u5206\u79bb\u7684\u3002\u5177\u4f53\u5305\u62ec\uff1a \u4e00\u4e2a\u79df\u6237\u7684\u884c\u9501\u6302\u8d77\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u79df\u6237 \u4e00\u4e2a\u79df\u6237\u7684\u4e8b\u52a1\u6302\u8d77\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u79df\u6237 \u4e00\u4e2a\u79df\u6237\u7684\u56de\u653e\u51fa\u95ee\u9898\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u5b83\u79df\u6237 Clog \u662f\u5171\u4eab\u7684 \u4e00\u4e2a OBServer \u4e0a\u7684\u4e0d\u540c\u79df\u6237\u5171\u4eab Clog \u6587\u4ef6\uff0c\u8fd9\u4e2a\u8bbe\u8ba1\u4e3b\u8981\u662f\u4e3a\u4e86\u8ba9\u4e8b\u52a1\u7684 Group Commit \u80fd\u6709\u66f4\u597d\u7684\u6548\u679c","title":"01 \u591a\u79df\u6237"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#1","text":"\u79df\u6237\u65e2\u662f\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u5bb9\u5668\uff0c\u53c8\u662f\u8d44\u6e90\uff08CPU/Memory/IO\uff09\u7684\u5bb9\u5668","title":"1 \u6982\u8ff0"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#2","text":"\u7ba1\u7406\u5458\uff1a \u7ba1\u7406\u6240\u6709\u666e\u901a\u79df\u6237","title":"2 \u7cfb\u7edf\u79df\u6237"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#3","text":"\u903b\u8f91\u4e0a = mysql server \u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u7528\u6237 \u53ef\u4ee5\u521b\u5efa\u6570\u636e\u5e93\uff08database\uff09\u3001\u8868\uff08table\uff09\u7b49\u6240\u6709\u5ba2\u4f53\u5bf9\u8c61 \u6709\u81ea\u5df1\u72ec\u7acb\u7684\u7cfb\u7edf\u8868\u548c\u7cfb\u7edf\u89c6\u56fe \u6709\u81ea\u5df1\u72ec\u7acb\u7684\u7cfb\u7edf\u53d8\u91cf \u6570\u636e\u5e93\u5b9e\u4f8b\u6240\u5177\u5907\u7684\u5176\u4ed6\u7279\u6027 \u6240\u6709\u7528\u6237\u6570\u636e\u7684\u5143\u4fe1\u606f\u90fd\u5b58\u50a8\u5728\u666e\u901a\u79df\u6237\u4e0b\uff0c\u79df\u6237 \u5f7c\u6b64\u9694\u79bb\u4e0d\u53ef\u8bbf\u95ee","title":"3 \u666e\u901a\u79df\u6237"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#4","text":"OB \u4e00\u4e2a\u96c6\u7fa4\u5185\u53ef\u5305\u542b\u591a\u4e2a\u76f8\u4e92\u72ec\u7acb\u7684\u79df\u6237","title":"4 \u79df\u6237\u4e0e\u8d44\u6e90\u7ba1\u7406"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#_1","text":"\u521b\u5efa\u79df\u6237\u524d\uff0c\u9700\u9996\u5148\u786e\u5b9a \u79df\u6237\u7684\u8d44\u6e90\u914d\u7f6e\u3001\u4f7f\u7528\u8d44\u6e90\u8303\u56f4 \u7b49\u3002\u79df\u6237\u521b\u5efa\u7684\u901a\u7528\u6d41\u7a0b\u5982\u4e0b\uff1a \u521b\u5efa\u8d44\u6e90\u914d\u7f6e \u7528\u6765\u63cf\u8ff0\u8d44\u6e90\u6c60\u4e2d\u6bcf\u4e2a\u8d44\u6e90\u5355\u5143\u53ef\u7528\u7684 CPU\u3001\u5185\u5b58\u3001\u5b58\u50a8\u7a7a\u95f4\u548c IOPS \u7b49\u7684\u89c4\u683c \u521b\u5efa\u8d44\u6e90\u6c60 \u8d44\u6e90\u6c60\u7531\u82e5\u5e72\u4e2a\u8d44\u6e90\u5355\u5143\u7ec4\u6210\uff0c\u901a\u8fc7\u7ed9\u8d44\u6e90\u6c60\u6307\u5b9a\u8d44\u6e90\u914d\u7f6e\uff0c\u53ef\u6307\u5b9a\u8d44\u6e90\u6c60\u4e0b\u5404\u8d44\u6e90\u5355\u5143\u7684\u7269\u7406\u8d44\u6e90 \u521b\u5efa\u79df\u6237 \u4e00\u4e2a\u8d44\u6e90\u6c60\u4ec5\u80fd\u5c5e\u4e8e\u4e00\u4e2a\u79df\u6237\uff0c\u4e00\u4e2a\u79df\u6237\u53ef\u62e5\u6709\u4e00\u4e2a\u6216\u591a\u4e2a\u8d44\u6e90\u6c60\uff0c\u79df\u6237\u5728\u540c\u4e00\u4e2a Zone \u4e0a\u4ec5\u80fd\u6709\u4e00\u4e2a\u8d44\u6e90\u6c60","title":"\u79df\u6237\u8d44\u6e90\u7684\u521b\u5efa"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#_2","text":"\u4fee\u6539\u8d44\u6e90\u914d\u7f6e \u76f4\u63a5\u8c03\u6574\u8d44\u6e90\u914d\u7f6e\u7684 CPU \u6216 Memory \u7b49\u7684\u503c\uff0c\u8fdb\u800c\u76f4\u63a5\u5f71\u54cd\u79df\u6237\u5728\u8be5\u8d44\u6e90\u6c60\u4e0a\u7684\u8d44\u6e90\u89c4\u683c\u548c\u670d\u52a1\u80fd\u529b obclient > CREATE RESOURCE UNIT uc1 MAX_CPU 5 , MIN_CPU 4 , MAX_MEMORY '36G' , MIN_MEMORY '32G' , MAX_IOPS 128 , MIN_IOPS 128 , MAX_DISK_SIZE '2T' , MAX_SESSION_NUM 64 ; obclient > CREATE RESOURCE POOL pool1 UNIT 'uc1' , UNIT_NUM 2 , ZONE_LIST ( 'z1' , 'z2' ); obclient > CREATE RESOURCE POOL pool2 UNIT 'uc1' , UNIT_NUM 1 , ZONE_LIST ( 'z3' ); obclient > CREATE TENANT tt resource_pool_list = ( 'pool1' , 'pool2' ); obclient > ALTER RESOURCE UNIT uc1 MAX_CPU 6 , MIN_MEMORY '36G' ; \u5207\u6362\u8d44\u6e90\u914d\u7f6e \u8c03\u6574\u8d44\u6e90\u6c60\u4e0b\u6bcf\u4e2a\u8d44\u6e90\u5355\u5143\u7684\u8d44\u6e90\u89c4\u683c\uff0c\u8fdb\u800c\u8c03\u6574\u79df\u6237\u5728\u8be5\u8d44\u6e90\u6c60\u4e0a\u7684\u8d44\u6e90\u89c4\u683c\u548c\u670d\u52a1\u80fd\u529b obclient > ALTER RESOURCE POOL rp1 UNIT 'uc2' ; \u53d8\u66f4 UNIT_NUM \u8c03\u6574\u8d44\u6e90\u6c60\u7684 UNIT_NUM \u53ef\u4ee5\u8c03\u6574\u8d44\u6e90\u6c60\u4e0b\u6bcf\u4e2a Zone \u5185\u8d44\u6e90\u5355\u5143\u7684\u6570\u91cf\uff0c\u8fdb\u800c\u901a\u8fc7\u8c03\u6574\u8d44\u6e90\u5355\u5143\u7684\u6570\u91cf\u6765\u63d0\u9ad8\u6216\u964d\u4f4e\u8be5\u79df\u6237\u5728\u5bf9\u5e94 Zone \u4e0a\u7684\u670d\u52a1\u80fd\u529b obclient > CREATE RESOURCE POOL rp1 UNIT 'uc1' , UNIT_NUM 2 , ZONE_LIST ( 'zone1' , 'zone2' ); obclient > ALTER RESOURCE POOL rp1 UNIT_NUM 3 ; // \u8c03\u5927 unit num obclient > ALTER RESOURCE POOL rp1 UNIT_NUM 2 ; // \u8c03\u5c0f unit num obclient > ALTER RESOURCE POOL rp1 UNIT_NUM 1 DELETE UNIT = ( 1001 , 1003 ); // \u6307\u5b9a\u8d44\u6e90\u5355\u5143\u8c03\u5c0f unit num \u53d8\u66f4 ZONE_LIST \u8c03\u6574\u8d44\u6e90\u6c60\u7684 ZONE_LIST \u53ef\u4ee5\u8c03\u6574\u8d44\u6e90\u6c60\u5728 Zone \u7ef4\u5ea6\u7684\u4f7f\u7528\u8303\u56f4\uff0c\u4ece\u800c\u8c03\u6574\u79df\u6237\u6570\u636e\u5728 Zone \u7ef4\u5ea6\u7684\u670d\u52a1\u8303\u56f4 obclient > CREATE RESOURCE POOL pool1 UNIT_NUM = 3 , UNIT = 'unit_config' , ZONE_LIST = ( 'z1' , 'z2' , 'z3' ); obclient > CREATE RESOURCE POOL pool2 UNIT_NUM = 3 , UNIT = 'unit_config' , ZONE_LIST = ( 'z1' , 'z2' , 'z3' ); obclient > ALTER RESOURCE POOL pool1 ZONE_LIST = ( 'z1' , 'z2' , 'z3' , 'z4' ); obclient > ALTER RESOURCE POOL pool2 ZONE_LIST = ( 'z1' , 'z2' ); \u5206\u88c2\u8d44\u6e90\u6c60 obclient > CREATE RESOURCE POOL pool1 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z1' , 'z2' , 'z3' ); obclient > ALTER RESOURCE POOL pool1 SPLIT INTO ( 'pool10' , 'pool11' , 'pool12' ) ON ( 'z1' , 'z2' , 'z3' ); obclient > ALTER RESOURCE POOL pool10 UNIT = 'uc1' ; obclient > ALTER RESOURCE POOL pool11 UNIT = 'uc2' ; obclient > ALTER RESOURCE POOL pool12 UNIT = 'uc3' ; \u5408\u5e76\u8d44\u6e90\u6c60 obclient > CREATE RESOURCE POOL pool1 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z1' ); obclient > CREATE RESOURCE POOL pool2 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z2' ); obclient > CREATE RESOURCE POOL pool3 UNIT = 'uc0' , UNIT_NUM = 1 , ZONE_LIST = ( 'z3' ); obclient > ALTER RESOURCE POOL MERGE ( 'pool1' , 'pool2' , 'pool3' ) INTO ( 'pool0' );","title":"\u79df\u6237\u8d44\u6e90\u7684\u53d8\u66f4"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/01%20%E5%A4%9A%E7%A7%9F%E6%88%B7/#5","text":"\u4e3a\u4e86\u786e\u4fdd\u79df\u6237\u95f4\u4e0d\u51fa\u73b0\u8d44\u6e90\u4e89\u62a2\u4fdd\u969c\u4e1a\u52a1\u7a33\u5b9a\u8fd0\u884c\uff0c OB \u9488\u5bf9\u79df\u6237\u95f4\u7684\u8d44\u6e90\u8fdb\u884c\u4e86\u9694\u79bb\u3002 OB \u4e2d\u628a Unit \u5f53\u4f5c\u7ed9\u79df\u6237\u5206\u914d\u8d44\u6e90\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u4e00\u4e2a Unit \u53ef\u4ee5\u7c7b\u6bd4\u4e8e\u4e00\u4e2a Docker \u5bb9\u5668\u3002\u4e00\u4e2a OBServer \u4e0a\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a Unit\uff0c\u5728 OBServer\u4e0a\u6bcf\u521b\u5efa\u4e00\u4e2a Unit \u90fd\u4f1a\u5360\u7528\u4e00\u90e8\u5206\u8be5 OBServer \u7684 CPU\u3001\u5185\u5b58\u7b49\u7269\u7406\u8d44\u6e90\u3002 \u4e00\u4e2a\u79df\u6237\u53ef\u4ee5\u5728\u591a\u4e2a OBServer\u4e0a\u653e\u7f6e\u591a\u4e2a Unit\uff0c\u4f46\u4e00\u4e2a\u7279\u5b9a\u7684\u79df\u6237\u5728\u67d0\u4e2a OBServer \u4e0a\u53ea\u80fd\u6709\u4e00\u4e2a Unit\u3002\u4e00\u4e2a\u79df\u6237\u7684\u591a\u4e2a Unit \u76f8\u4e92\u72ec\u7acb\uff0cOceanBase \u6570\u636e\u5e93\u76ee\u524d\u6ca1\u6709\u6c47\u603b\u591a\u4e2a Unit \u7684\u8d44\u6e90\u5360\u7528\u8fdb\u884c\u5168\u5c40\u7684\u8d44\u6e90\u63a7\u5236, \u5177\u4f53\u6765\u8bb2\uff0c\u4e0d\u4f1a\u56e0\u4e3a\u4e00\u4e2a\u79df\u6237\u5728\u67d0\u4e2a OBServer \u4e0a\u7684\u8d44\u6e90\u6ca1\u5f97\u5230\u6ee1\u8db3\uff0c\u5c31\u8ba9\u5b83\u5728\u53e6\u4e00\u4e2a OBServer \u4e0a\u53bb\u62a2\u5176\u5b83\u79df\u6237\u7684\u8d44\u6e90\u3002 \u6240\u8c13\u8d44\u6e90\u9694\u79bb\uff0c\u5c31\u662f OBServer \u63a7\u5236\u672c\u5730\u591a\u4e2a Unit \u95f4\u7684\u8d44\u6e90\u5206\u914d\u7684\u884c\u4e3a, \u5b83\u662f OBServer \u672c\u5730\u7684\u884c\u4e3a\u3002 \u666e\u901a\u7528\u6237\u7684\u89c6\u89d2\u770b\u9694\u79bb\u6548\u679c \u5185\u5b58\u5b8c\u5168\u9694\u79bb SQL \u6267\u884c\u8fc7\u7a0b\u5404\u79cd\u7b97\u5b50\u4f7f\u7528\u7684\u5185\u5b58\u662f\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684\u5185\u5b58\u8017\u5c3d\u4e0d\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u79df\u6237\u3002 Block Cache \u548c MEMTable \u662f\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684\u5185\u5b58\u8017\u5c3d\u4e0d\u4f1a\u5f71\u54cd\u5230\u53e6\u4e00\u4e2a\u79df\u6237\u7684\u5199\u5165\u548c\u8bfb\u53d6\u3002 CPU \u901a\u8fc7\u7528\u6237\u6001\u8c03\u5ea6\u5b9e\u73b0\u9694\u79bb \u4e00\u4e2a\u79df\u6237\u80fd\u4f7f\u7528\u7684 CPU \u8d44\u6e90\u662f\u7531 Unit \u89c4\u683c\u51b3\u5b9a\u7684\uff0c\u4e0d\u8fc7 OBServer \u76ee\u524d\u662f\u5141\u8bb8\u79df\u6237 CPU \u8d85\u5356\u7684\u3002 \u5927\u90e8\u5206\u6570\u636e\u7ed3\u6784\u662f\u5206\u79bb\u7684 SQL \u7684 Plan Cache \u662f\u79df\u6237\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684 Plan Cache \u6dd8\u6c70\u4e0d\u4f1a\u5f71\u54cd\u53e6\u4e00\u4e2a\u79df\u6237\u3002 SQL \u7684 Audit \u8868\u662f\u5206\u79bb\u7684\uff0c\u4e00\u4e2a\u79df\u6237\u7684 QPS \u592a\u9ad8\uff0c\u4e0d\u4f1a\u51b2\u6d17\u6389\u53e6\u4e00\u4e2a\u79df\u6237\u7684 Audit \u4fe1\u606f\u3002 \u4e8b\u52a1\u76f8\u5173\u7684\u6570\u636e\u7ed3\u6784\u662f\u5206\u79bb\u7684\u3002\u5177\u4f53\u5305\u62ec\uff1a \u4e00\u4e2a\u79df\u6237\u7684\u884c\u9501\u6302\u8d77\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u79df\u6237 \u4e00\u4e2a\u79df\u6237\u7684\u4e8b\u52a1\u6302\u8d77\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u4ed6\u79df\u6237 \u4e00\u4e2a\u79df\u6237\u7684\u56de\u653e\u51fa\u95ee\u9898\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5230\u5176\u5b83\u79df\u6237 Clog \u662f\u5171\u4eab\u7684 \u4e00\u4e2a OBServer \u4e0a\u7684\u4e0d\u540c\u79df\u6237\u5171\u4eab Clog \u6587\u4ef6\uff0c\u8fd9\u4e2a\u8bbe\u8ba1\u4e3b\u8981\u662f\u4e3a\u4e86\u8ba9\u4e8b\u52a1\u7684 Group Commit \u80fd\u6709\u66f4\u597d\u7684\u6548\u679c","title":"5 \u79df\u6237\u95f4\u7684\u8d44\u6e90\u9694\u79bb"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/","text":"\u7d22\u5f15\u7b80\u4ecb \u00b6 \u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u7684\u9700\u6c42\u6765\u51b3\u5b9a\u5728\u67d0\u4e9b\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\uff0c\u4ece\u800c\u52a0\u5feb\u5728\u8fd9\u4e9b\u5b57\u6bb5\u7684\u67e5\u8be2\u901f\u5ea6 \u4f7f\u7528\u7d22\u5f15 : \u52a0\u901f\u67e5\u8be2 \u7d22\u5f15\u5b58\u50a8\u7684\u5217\u6570\u901a\u5e38\u8f83\u5c11\uff0c\u53ef\u4ee5\u8282\u7701\u67e5\u8be2 IO but: \u5f53 \u4e1a\u52a1\u53d1\u751f\u53d8\u5316 \u65f6\uff0c\u9700\u8981\u91cd\u65b0\u8bc4\u4f30\u4ee5\u524d\u521b\u5efa\u7684\u7d22\u5f15\u662f\u5426\u6ee1\u8db3\u9700\u6c42\u3002 \u5199\u5165\u6570\u636e\u65f6\uff0c\u9700\u8981 \u7ef4\u62a4\u7d22\u5f15\u8868 \u4e2d\u7684\u6570\u636e\uff0c\u6d88\u8017\u4e00\u5b9a\u7684\u6027\u80fd\u4ee3\u4ef7\u3002 \u7d22\u5f15\u8868\u4f1a\u5360\u7528 \u5185\u5b58\u3001\u78c1\u76d8 \u7b49\u8d44\u6e90\u3002 \u8bbe\u8ba1\u539f\u5219 \u00b6 \u6700\u9002\u5408\u7d22\u5f15\u7684\u5217\u662f\u51fa\u73b0\u5728 WHERE \u5b50\u53e5 \u4e2d\u7684\u5217\uff0c\u6216\u8fde\u63a5\u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u5217\u3002 \u4f7f\u7528 \u60df\u4e00\u7d22\u5f15 \u3002\u8003\u8651\u67d0\u5217\u4e2d\u503c\u7684\u5206\u5e03\u3002\u7d22\u5f15\u7684\u5217\u7684\u57fa\u6570\u8d8a\u5927\uff0c\u7d22\u5f15\u7684\u6548\u679c\u8d8a\u597d\u3002 \u4f7f\u7528\u77ed\u7d22\u5f15\u3002\u5982\u679c\u5bf9\u5b57\u7b26\u4e32\u5217\u8fdb\u884c\u7d22\u5f15\uff0c\u5e94\u8be5\u6307\u5b9a\u4e00\u4e2a\u524d\u7f00\u957f\u5ea6\uff0c\u53ea\u8981\u6709\u53ef\u80fd\u5c31\u5e94\u8be5\u8fd9\u6837\u505a\u3002 \u5229\u7528\u6700\u5de6\u524d\u7f00\u3002 \u5728\u521b\u5efa\u4e00\u4e2a n \u5217\u7684\u7d22\u5f15\u65f6\uff0c \u5b9e\u9645\u662f\u521b\u5efa\u4e86 MySQL \u53ef\u5229\u7528\u7684 n \u4e2a\u7d22\u5f15\u3002\u591a\u5217\u7d22\u5f15\u53ef\u8d77\u51e0\u4e2a\u7d22\u5f15\u7684\u4f5c\u7528\uff0c \u56e0\u4e3a\u53ef\u5229\u7528\u7d22\u5f15\u4e2d\u6700\u5de6\u8fb9\u7684\u5217\u96c6\u6765\u5339\u914d\u884c\u3002 \u8fd9\u6837\u7684\u5217\u96c6\u79f0\u4e3a\u6700\u5de6\u524d\u7f00\u3002 \u4e0d\u8981\u8fc7\u5ea6\u7d22\u5f15\u3002\u6bcf\u4e2a\u989d\u5916\u7684\u7d22\u5f15\u90fd\u8981\u5360\u7528\u989d\u5916\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c \u5e76\u964d\u4f4e\u5199\u64cd\u4f5c\u7684\u6027\u80fd\u3002 \u5728\u4fee\u6539\u8868\u7684\u5185\u5bb9\u65f6\uff0c \u7d22\u5f15\u5fc5\u987b\u8fdb\u884c\u66f4\u65b0\uff0c\u6709\u65f6\u53ef\u80fd\u9700\u8981\u91cd\u6784\uff0c\u56e0\u6b64\uff0c\u7d22\u5f15\u8d8a\u591a\uff0c\u6240\u82b1\u7684\u65f6\u95f4\u8d8a\u957f\u3002 \u5bf9\u4e8e InnoDB \u5b58\u50a8\u5f15\u64ce\u7684\u8868\uff0c\u5c3d\u91cf\u81ea\u5df1\u6307\u5b9a\u4e3b\u952e\u3002InnoDB \u8868\u7684\u666e\u901a\u7d22\u5f15\u90fd\u4f1a\u4fdd\u5b58\u4e3b\u952e\u7684\u952e\u503c\uff0c\u6240\u4ee5\u4e3b\u952e\u8981\u5c3d\u53ef\u80fd\u9009\u62e9\u8f83\u77ed\u7684\u6570\u636e\u7c7b\u578b\uff0c \u53ef\u4ee5\u6709\u6548\u5730\u51cf\u5c11\u7d22\u5f15\u7684\u78c1\u76d8\u5360\u7528\uff0c \u63d0\u9ad8\u7d22\u5f15\u7684\u7f13\u5b58\u6548\u679c\u3002 BTREE \u7d22\u5f15\u4e0e HASH \u7d22\u5f15 \u00b6 MEMORY \u5b58\u50a8\u5f15\u64ce\u7684\u8868\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 BTREE\u7d22\u5f15 \u6216\u8005 HASH\u7d22\u5f15 \uff0c \u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u7d22\u5f15\u5404\u6709\u5176\u4e0d\u540c\u7684\u9002\u7528\u8303\u56f4\u3002 HASH \u7d22\u5f15\u6709\u4e00\u4e9b\u91cd\u8981\u7684\u7279\u5f81\u9700\u8981\u5728\u4f7f\u7528\u7684\u65f6\u5019\u7279\u522b\u6ce8\u610f\uff1a \u53ea\u7528\u4e8e\u4f7f\u7528=\u6216<=>\uff08NULL\u7684\u5b89\u5168\u6bd4\u8f83\uff09\u64cd\u4f5c\u7b26\u7684\u7b49\u5f0f\u6bd4\u8f83\uff08\u4f46\u662f\u5f88\u5feb\uff09\u3002 \u4f18\u5316\u5668\u4e0d\u80fd\u4f7f\u7528 HASH \u7d22\u5f15\u6765\u52a0\u901f ORDER BY \u64cd\u4f5c\u3002 MySQL \u4e0d\u80fd\u786e\u5b9a\u5728\u4e24\u4e2a\u503c\u4e4b\u95f4\u5927\u7ea6\u6709\u591a\u5c11\u884c\u3002 \u5982\u679c\u5c06\u4e00\u4e2a MyISAM \u8868\u6539\u4e3a HASH \u7d22 \u5f15\u7684 MEMORY \u8868\uff0c\u4f1a\u5f71\u54cd\u4e00\u4e9b\u67e5\u8be2\u7684\u6267\u884c\u6548\u7387\u3002 \u53ea\u80fd\u4f7f\u7528\u6574\u4e2a\u5173\u952e\u5b57\u6765\u641c\u7d22\u4e00\u884c\u3002 \u800c\u5bf9\u4e8e BTREE \u7d22\u5f15\uff0c \u5f53\u4f7f\u7528>\u3001 <\u3001 >=\u3001 <=\u3001 BETWEEN\u3001!=\u6216\u8005<>\uff0c \u6216\u8005 LIKE 'pattern' \uff08\u5176 \u4e2d'pattern'\u4e0d\u4ee5\u901a\u914d\u7b26\u5f00\u59cb\uff09\u64cd\u4f5c\u7b26\u65f6\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u76f8\u5173\u5217\u4e0a\u7684\u7d22\u5f15\u3002 IN \u8303\u56f4\u67e5\u8be2\u9002\u7528\u4e8e BTREE \u7d22\u5f15\u548c HASH \u7d22\u5f15\uff1a SELECT * FROM t1 WHERE key_col IN ( 15 , 18 , 20 ); InnoDB \u548c MyISAM \u4e0d\u652f\u6301HASH\u7d22\u5f15\u7c7b\u578b \uff0c\u5982\u679c\u6307\u5b9a\u4e86\u4f7f\u7528HASH\u7c7b\u578b\u7684\u7d22\u5f15\uff0c\u4f1a\u88ab\u66ff\u6362\u4e3aBTREE\u3002 \u6ce8\u610f \uff1a\u5982\u679c\u9700\u8981\u8bbf\u95ee\u5927\u90e8\u5206\u884c\uff0c\u987a\u5e8f\u8bfb\u53d6\u8981\u5feb\u5f97\u591a\uff0c\u56e0\u4e3a\u6b64\u65f6\u5e94\u907f\u514d\u78c1\u76d8\u641c\u7d22\u3002 \u5c40\u90e8\u7d22\u5f15\u548c\u5168\u5c40\u7d22\u5f15 OCEANBASE \u00b6 MySQL/PostgreSQL \u53ea\u5b9e\u73b0\u4e86 \u672c\u5730\u7d22\u5f15 ORACLE \u6709 \u672c\u5730\u7d22\u5f15 \u5168\u5c40\u7d22\u5f15 \u5c40\u90e8\u7d22\u5f15 LOCAL \u00b6 \u5c40\u90e8\u7d22\u5f15\u662f\u9488\u5bf9 \u5355\u4e2a\u5206\u533a\u4e0a \u7684\u6570\u636e\u521b\u5efa\u7684\u7d22\u5f15\uff0c\u56e0\u6b64\u5c40\u90e8\u7d22\u5f15\u7684\u7d22\u5f15\u952e\u503c\u8ddf\u8868\u4e2d\u7684\u6570\u636e\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\uff0c\u5373 \u5c40\u90e8\u7d22\u5f15\u4e0a\u7684\u4e00\u4e2a\u5206\u533a\u4e00\u5b9a\u5bf9\u5e94\u5230\u4e00\u4e2a\u8868\u5206\u533a \uff0c\u5b83\u4eec\u5177\u6709\u76f8\u540c\u7684\u5206\u533a\u89c4\u5219\uff0c\u56e0\u6b64\u5bf9\u4e8e \u5c40\u90e8\u552f\u4e00\u7d22\u5f15 \u800c\u8a00\uff0c\u5b83\u53ea\u80fd\u4fdd\u8bc1\u5206\u533a \u5185\u90e8\u7684\u552f\u4e00\u6027 \uff0c\u800c\u65e0\u6cd5\u4fdd\u8bc1\u8868\u6570\u636e\u7684\u5168\u5c40\u552f\u4e00\u6027\u3002 \u5982\u679c\u8981\u4f7f\u7528\u5c40\u90e8\u552f\u4e00\u7d22\u5f15\u53bb\u5bf9\u6570\u636e\u552f\u4e00\u6027\u505a\u7ea6\u675f\uff0c\u90a3\u4e48\u5c40\u90e8\u552f\u4e00\u7d22\u5f15\u4e2d\u5fc5\u987b\u5305\u542b\u8868\u5206\u533a\u952e employee \u8868\u6309\u7167 emp_id \u505a\u4e86 Range \u5206\u533a\uff0c\u540c\u65f6\u4e5f\u5728 emp_name \u4e0a\u521b\u5efa\u4e86\u5c40\u90e8\u7d22\u5f15\u3002 \u5168\u5c40\u7d22\u5f15 GLOBAL \u00b6 \u5168\u5c40\u7d22\u5f15\u7684\u5206\u533a\u89c4\u5219\u8ddf\u8868\u5206\u533a\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u5168\u5c40\u7d22\u5f15\u5141\u8bb8\u6307\u5b9a\u81ea\u5df1\u7684\u5206\u533a\u89c4\u5219\u548c\u5206\u533a\u4e2a\u6570\uff0c \u4e0d\u4e00\u5b9a\u9700\u8981\u8ddf\u8868\u5206\u533a\u89c4\u5219\u4fdd\u6301\u4e00\u81f4 \u5168\u5c40\u975e\u5206\u533a\u7d22\u5f15\uff08Global Non-Partitioned Index\uff09 \u00b6 \u4e0d\u5206\u533a \uff1a\u4fdd\u6301\u5355\u4e00\u7684\u6570\u636e\u7ed3\u6784\uff0c\u548c\u975e\u5206\u533a\u8868\u7684\u7d22\u5f15\u7c7b\u4f3c\u3002\u4f46\u7531\u4e8e\u4e3b\u8868\u5df2\u7ecf\u505a\u4e86\u5206\u533a\uff0c\u56e0\u6b64\u4f1a\u51fa\u73b0\u7d22\u5f15\u4e2d\u7684\u67d0\u4e00\u4e2a\u952e\u6620\u5c04\u5230\u4e0d\u540c\u4e3b\u8868\u5206\u533a\u7684\u60c5\u51b5\uff0c\u5373\u4e00\u5bf9\u591a\u7684\u5bf9\u5e94\u5173\u7cfb \u5168\u5c40\u5206\u533a\u7d22\u5f15\uff08Global Partitioned Index\uff09 \u00b6 \u5206\u533a \uff1a\u7d22\u5f15\u6570\u636e\u6309\u7167\u6307\u5b9a\u7684\u65b9\u5f0f\u505a\u5206\u533a\u5904\u7406\uff0c\u5c06\u7d22\u5f15\u6570\u636e\u5206\u6563\u5230\u4e0d\u540c\u7684\u5206\u533a\u4e2d\u3002\u4f46\u7d22\u5f15\u7684\u5206\u533a\u6a21\u5f0f\u662f\u5b8c\u5168\u72ec\u7acb\u7684\uff0c\u548c\u4e3b\u8868\u7684\u5206\u533a\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u4e2a\u7d22\u5f15\u5206\u533a\u6765\u8bf4\uff0c\u91cc\u9762\u7684\u67d0\u4e00\u4e2a\u952e\u90fd\u53ef\u80fd\u6620\u5c04\u5230\u4e0d\u540c\u7684\u4e3b\u8868\u5206\u533a\uff08\u5f53\u7d22\u5f15\u952e\u6709\u91cd\u590d\u503c\u65f6\uff09\uff0c\u7d22\u5f15\u5206\u533a\u548c\u4e3b\u8868\u5206\u533a\u4e4b\u95f4\u662f\u591a\u5bf9\u591a\u7684\u5bf9\u5e94\u5173\u7cfb\u3002 employee \u8868\u6309\u7167 emp_id \u505a\u4e86 Range \u5206\u533a\uff0c\u540c\u65f6\u5728 emp_name \u4e0a\u505a\u4e86\u5168\u5c40\u5206\u533a\u7d22\u5f15\u3002\u53ef\u4ee5\u770b\u5230\u540c\u4e00\u4e2a\u7d22\u5f15\u5206\u533a\u91cc\u7684\u952e\uff0c\u4f1a\u6307\u5411\u4e0d\u540c\u7684\u4e3b\u8868\u5206\u533a\u3002 Note \u975e\u5206\u533a\u8868\u4e5f\u53ef\u4ee5\u521b\u5efa\u5168\u5c40\u5206\u533a\u7d22\u5f15\uff0c\u4f46\u5982\u679c\u4e3b\u8868\u6ca1\u6709\u5206\u533a\uff0c\u901a\u5e38\u6765\u8bf4\u7d22\u5f15\u4e5f\u5c31\u6ca1\u6709\u5fc5\u8981\u5206\u533a\u4e86\u3002 \u63a8\u8350\u4f7f\u7528 \u5168\u5c40\u7d22\u5f15 \u7684\u573a\u666f\u5305\u62ec\uff1a \u4e1a\u52a1\u4e0a\u9664\u4e86\u4e3b\u952e\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u5217\u7684\u7ec4\u5408\u9700\u8981\u6ee1\u8db3\u5168\u5c40\u552f\u4e00\u6027\u7684\u5f3a\u9700\u6c42\uff0c\u8fd9\u4e2a\u4e1a\u52a1\u9700\u6c42\u4ec5\u80fd\u901a\u8fc7\u5168\u5c40\u6027\u7684\u552f\u4e00\u7d22\u5f15\u6765\u5b9e\u73b0 \u4e1a\u52a1\u7684\u67e5\u8be2\u65e0\u6cd5\u5f97\u5230\u5206\u533a\u952e\u7684\u6761\u4ef6\u8c13\u8bcd\uff0c\u4e14\u4e1a\u52a1\u8868\u6ca1\u6709\u9ad8\u5e76\u53d1\u7684\u540c\u65f6\u5199\u5165\uff0c\u4e3a\u907f\u514d\u8fdb\u884c\u5168\u5206\u533a\u7684\u626b\u63cf\uff0c\u53ef\u4ee5\u6839\u636e\u67e5\u8be2\u6761\u4ef6\u6784\u5efa\u5168\u5c40\u7d22\u5f15\uff0c\u5fc5\u8981\u65f6\u53ef\u4ee5\u5c06\u5168\u5c40\u7d22\u5f15\u6309\u7167\u65b0\u7684\u5206\u533a\u952e\u6765\u5206\u533a \u5168\u5c40\u7d22\u5f15\u867d\u7136\u4e3a\u5168\u5c40\u552f\u4e00\u3001\u6570\u636e\u91cd\u65b0\u5206\u533a\u5e26\u6765\u4e86\u53ef\u80fd\uff0c\u89e3\u51b3\u4e86\u4e00\u4e9b\u4e1a\u52a1\u9700\u8981\u6839\u636e\u4e0d\u540c\u7ef4\u5ea6\u8fdb\u884c\u67e5\u8be2\u7684\u5f3a\u9700\u6c42\uff0c\u4f46\u662f\u4e3a\u6b64\u4ed8\u51fa\u7684\u4ee3\u4ef7\u662f\u6bcf\u4e00\u7b14\u6570\u636e\u7684\u5199\u5165\u90fd\u6709\u53ef\u80fd\u53d8\u6210 \u8de8\u673a\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1 \uff0c\u5728\u9ad8\u5e76\u53d1\u7684\u5199\u5165\u573a\u666f\u4e0b\u5b83\u5c06\u5f71\u54cd\u7cfb\u7edf\u7684\u5199\u5165\u6027\u80fd\u3002\u5f53\u4e1a\u52a1\u7684\u67e5\u8be2\u53ef\u4ee5\u62e5\u6709\u5206\u533a\u952e\u7684\u6761\u4ef6\u8c13\u8bcd\u65f6\uff0cOceanBase \u6570\u636e\u5e93\u4f9d\u65e7\u63a8\u8350\u6784\u5efa\u5c40\u90e8\u7d22\u5f15\uff0c\u901a\u8fc7\u6570\u636e\u5e93\u4f18\u5316\u5668\u7684 \u5206\u533a\u88c1\u526a\u529f\u80fd \uff0c\u6392\u9664\u6389\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u5206\u533a\u3002\u8fd9\u6837\u7684\u505a\u6cd5\u53ef\u4ee5\u540c\u65f6\u517c\u987e\u67e5\u8be2\u548c\u5199\u5165\u7684\u6027\u80fd\uff0c\u8ba9\u7cfb\u7edf\u7684\u603b\u4f53\u6027\u80fd\u8868\u73b0\u66f4\u4f18\u3002 \u552f\u4e00\u7d22\u5f15\u548c\u975e\u552f\u4e00\u7d22\u5f15 \u00b6 \u7d22\u5f15\u8868\u5206\u4e3a\u552f\u4e00\u7d22\u5f15\u548c\u975e\u552f\u4e00\u7d22\u5f15\uff0c\u5176\u4e2d\u552f\u4e00\u7d22\u5f15\u4fdd\u8bc1\u5728\u8868\u5185\u7684\u7d22\u5f15\u5217\u4e0a\u4e0d\u5b58\u5728\u4e24\u884c\u6709\u5b8c\u5168\u76f8\u540c\u7684\u503c\uff0c\u800c\u975e\u552f\u4e00\u7d22\u5f15\u5219\u53ef\u80fd\u5b58\u5728\u5b8c\u5168\u76f8\u540c\u7684\u503c\u3002\u5728 OceanBase \u6570\u636e\u5e93\u4e2d\uff0cNULL \u503c\u4e5f\u4f1a\u5b58\u50a8\u5728\u7d22\u5f15\u4e2d\u3002 \u200b\u5bf9\u4e8e\u975e\u552f\u4e00\u7d22\u5f15\uff0c\u7d22\u5f15\u8868\u7684\u5b58\u50a8\u952e\u662f\u7528\u6237\u6307\u5b9a\u7684\u7d22\u5f15\u5217\u548c\u4e3b\u8868\u4e3b\u952e\uff1b\u800c\u5bf9\u4e8e\u552f\u4e00\u7d22\u5f15\u5217\uff0c\u7d22\u5f15\u8868\u7684\u5b58\u50a8\u952e\u662f\u7528\u6237\u6307\u5b9a\u7684\u7d22\u5f15\u5217\u548c\u53ef\u53d8\u7684\u4e3b\u8868\u4e3b\u952e\u5217\uff0c\u8fd9\u91cc\u53ef\u53d8\u7684\u542b\u4e49\u662f\u4e3b\u952e\u5217\u7684\u503c\u662f\u968f\u7d22\u5f15\u5217\u503c\u7684\u4e0d\u540c\u800c\u4e0d\u540c\u3002 \u5982\u4e0b\u4f8b\u6240\u793a\uff0c\u5bf9\u4e8e\u975e\u552f\u4e00\u7d22\u5f15\u8868 i1\uff0c\u5b83\u7684\u5b58\u50a8\u952e\u662f c2 \u548c c1\uff0c\u800c\u5bf9\u4e8e\u552f\u4e00\u7d22\u5f15\u8868 i2\uff0c\u5b83\u7684\u5b58\u50a8\u952e\u662f c2\uff0c\u800c c1 \u662f\u53ef\u53d8\u7684\u3002\u5f53 c2 \u4e3a NULL \u65f6\uff0c\u53ef\u53d8\u7684 c1 \u5217\u503c\u662f\u4e3b\u8868 c1 \u5217\u7684\u503c\uff1b\u5f53 c2 \u4e0d\u4e3a NULL \u65f6\uff0c\u53ef\u53d8\u7684 c1 \u5217\u503c\u4e3a NULL\u3002 CREATE TABLE t1 ( c1 INT , c2 INT , c3 INT , c4 INT , PRIMARY KEY ( c1 )); CREATE INDEX i1 ON t1 ( c2 ); CREATE UNIQUE INDEX i2 ON t1 ( c3 ); \u7d22\u5f15\u7684\u4f7f\u7528 \u00b6 \u5f53\u7528\u6237\u521b\u5efa\u597d\u7d22\u5f15\u540e\uff0cOceanBase \u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u7ef4\u62a4\u8be5\u7d22\u5f15\uff0c\u6240\u6709\u7684 DML \u64cd\u4f5c\u90fd\u4f1a\u5b9e\u65f6\u66f4\u65b0\u7d22\u5f15\u8868\u76f8\u5e94\u7684\u6570\u636e\u8bb0\u5f55\uff0c\u540c\u65f6\u4f18\u5316\u5668\u4e5f\u4f1a\u6839\u636e\u7528\u6237\u7684\u67e5\u8be2\u6765\u81ea\u52a8\u5730\u9009\u62e9\u662f\u5426\u4f7f\u7528\u7d22\u5f15\u3002\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u8fdb\u884c\u7d22\u5f15\u626b\u63cf\u3002 \u5f53 SQL \u67e5\u8be2\u8bed\u53e5\u6307\u5b9a\u8c13\u8bcd\u6761\u4ef6\u67e5\u8be2\u7684\u662f\u7d22\u5f15\u5217\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u5730\u62bd\u53d6\u8c13\u8bcd\u6761\u4ef6\u4f5c\u4e3a\u67e5\u8be2\u7d22\u5f15\u7684\u8303\u56f4\uff0c\u4e5f\u5c31\u662f\u67e5\u8be2\u7d22\u5f15\u8868\u7684\u8d77\u59cb\u952e\u548c\u7ec8\u6b62\u952e\u3002\u6570\u636e\u5e93\u6839\u636e\u8d77\u59cb\u952e\u80fd\u5b9a\u4f4d\u5230\u6570\u636e\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u6839\u636e\u7ec8\u6b62\u952e\u80fd\u5b9a\u4f4d\u51fa\u6570\u636e\u7ed3\u675f\u4f4d\u7f6e\uff0c\u800c\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u8303\u56f4\u5185\u6240\u5305\u542b\u7684\u6570\u636e\u662f\u9700\u8981\u88ab\u6b64\u67e5\u8be2\u626b\u63cf\u7684\u6570\u636e\u3002 \u200b\u5bf9\u4e8e\u7d22\u5f15\u8868\uff0cOceanBase \u6570\u636e\u5e93\u5b58\u50a8\u65f6\u4f7f\u7528 MemTable \u5185\u5b58 \u548c SSTable \u78c1\u76d8 \u6765\u5b58\u50a8\u6570\u636e\uff0c\u5176\u4e2d MemTable \u4f7f\u7528\u7684\u662fB+ \u6811\u7ed3\u6784\uff0c\u800c SSTable \u4f7f\u7528\u7684\u662f\u5b8f\u5757\u7ed3\u6784\u3002\u5728 MemTable \u6216\u8005 SSTable \u90fd\u6309\u7167\u4e0a\u8ff0\u626b\u63cf\u8fc7\u7a0b\uff0c\u626b\u63cf\u51fa\u76f8\u5e94\u7684\u6570\u636e\uff0c\u800c\u6700\u7ec8\u7684\u6570\u636e\u884c\u662f\u7531 MemTable \u548c SSTable \u7684\u6570\u636e\u884c\u878d\u5408\u6210\u5b8c\u6574\u7684\u6570\u636e\u884c\u3002 \u56e0\u6b64\uff0c OB \u67e5\u8be2\u7d22\u5f15\u8868\u6570\u636e\u7684\u5b8c\u6574\u8fc7\u7a0b\u5982\u4e0b\uff1a \u5728 MemTable \u4e2d\u67e5\u8be2\u6570\u636e\u3002 \u5728 SSTable \u4e2d\u67e5\u8be2\u6570\u636e\u3002 \u5c06 MemTable \u548c SSTable \u4e2d\u7684\u6570\u636e\u878d\u5408\uff0c\u5f97\u5230\u5b8c\u6574\u7684\u884c\u3002 \u200b\u5f53 SQL \u67e5\u8be2\u8bed\u53e5\u53ea\u6d89\u53ca\u5230\u7d22\u5f15\u8868\u4e2d\u7684\u5217\u65f6\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u4f1a\u6839\u636e\u7528\u6237\u6307\u5b9a\u7684\u5217\uff0c\u6309\u7167\u4e0a\u8ff0\u67e5\u8be2\u8fc7\u7a0b\uff0c\u67e5\u8be2\u76f8\u5e94\u7d22\u5f15\u8868\u7684 MemTable \u548c SSTable\uff0c\u5f97\u5230\u5b8c\u6574\u7684\u6570\u636e\u884c\u3002 \u200b\u5f53 SQL \u67e5\u8be2\u8bed\u53e5\u9664\u4e86\u5305\u542b\u7d22\u5f15\u8868\u4e2d\u7684\u5217\uff0c\u8fd8\u5305\u542b\u5176\u4ed6\u5217\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u5148\u901a\u8fc7\u7d22\u5f15\u8868\uff0c\u67e5\u8be2\u51fa\u76f8\u5173\u7684\u884c\uff0c\u5e76\u6839\u636e\u884c\u4e0a\u7684\u4e3b\u952e\uff0c\u6309\u7167\u4e0a\u8ff0\u67e5\u8be2\u8fc7\u7a0b\uff0c\u5230\u4e3b\u8868\u4e2d\u67e5\u8be2\u6240\u9700\u8981\u7684\u6570\u636e\u5217 \u56de\u8868 \u3002 \u7d22\u5f15\u7684\u5b58\u50a8 \u00b6 OB \u4e2d\uff0c\u7d22\u5f15\u8868\u7684\u5b58\u50a8\u7c7b\u4f3c\u4e8e\u666e\u901a\u7684\u6570\u636e\u8868\uff0c\u5176\u6570\u636e\u4e5f\u662f\u5b58\u50a8\u5728\u5b8f\u5757\u548c\u5fae\u5757\u7684\u7ed3\u6784\u4e2d\u3002\u7531\u4e8e OB \u4f7f\u7528\u7684\u662f\u805a\u96c6\u7d22\u5f15\u8868\u6a21\u578b\uff0c\u56e0\u6b64\u5728\u7d22\u5f15\u7684\u884c\u4e2d\u9664\u4e86\u7528\u6237\u6307\u5b9a\u7684\u7d22\u5f15\u5217\u4e4b\u5916\uff0c\u8fd8\u4f1a\u5b58\u50a8\u4e3b\u8868\u7684\u4e3b\u952e\u5217\uff0c\u4ee5\u65b9\u4fbf\u8fdb\u884c\u56de\u8868\u3002","title":"02 \u7d22\u5f15"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#_1","text":"\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u7684\u9700\u6c42\u6765\u51b3\u5b9a\u5728\u67d0\u4e9b\u5b57\u6bb5\u521b\u5efa\u7d22\u5f15\uff0c\u4ece\u800c\u52a0\u5feb\u5728\u8fd9\u4e9b\u5b57\u6bb5\u7684\u67e5\u8be2\u901f\u5ea6 \u4f7f\u7528\u7d22\u5f15 : \u52a0\u901f\u67e5\u8be2 \u7d22\u5f15\u5b58\u50a8\u7684\u5217\u6570\u901a\u5e38\u8f83\u5c11\uff0c\u53ef\u4ee5\u8282\u7701\u67e5\u8be2 IO but: \u5f53 \u4e1a\u52a1\u53d1\u751f\u53d8\u5316 \u65f6\uff0c\u9700\u8981\u91cd\u65b0\u8bc4\u4f30\u4ee5\u524d\u521b\u5efa\u7684\u7d22\u5f15\u662f\u5426\u6ee1\u8db3\u9700\u6c42\u3002 \u5199\u5165\u6570\u636e\u65f6\uff0c\u9700\u8981 \u7ef4\u62a4\u7d22\u5f15\u8868 \u4e2d\u7684\u6570\u636e\uff0c\u6d88\u8017\u4e00\u5b9a\u7684\u6027\u80fd\u4ee3\u4ef7\u3002 \u7d22\u5f15\u8868\u4f1a\u5360\u7528 \u5185\u5b58\u3001\u78c1\u76d8 \u7b49\u8d44\u6e90\u3002","title":"\u7d22\u5f15\u7b80\u4ecb"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#_2","text":"\u6700\u9002\u5408\u7d22\u5f15\u7684\u5217\u662f\u51fa\u73b0\u5728 WHERE \u5b50\u53e5 \u4e2d\u7684\u5217\uff0c\u6216\u8fde\u63a5\u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u5217\u3002 \u4f7f\u7528 \u60df\u4e00\u7d22\u5f15 \u3002\u8003\u8651\u67d0\u5217\u4e2d\u503c\u7684\u5206\u5e03\u3002\u7d22\u5f15\u7684\u5217\u7684\u57fa\u6570\u8d8a\u5927\uff0c\u7d22\u5f15\u7684\u6548\u679c\u8d8a\u597d\u3002 \u4f7f\u7528\u77ed\u7d22\u5f15\u3002\u5982\u679c\u5bf9\u5b57\u7b26\u4e32\u5217\u8fdb\u884c\u7d22\u5f15\uff0c\u5e94\u8be5\u6307\u5b9a\u4e00\u4e2a\u524d\u7f00\u957f\u5ea6\uff0c\u53ea\u8981\u6709\u53ef\u80fd\u5c31\u5e94\u8be5\u8fd9\u6837\u505a\u3002 \u5229\u7528\u6700\u5de6\u524d\u7f00\u3002 \u5728\u521b\u5efa\u4e00\u4e2a n \u5217\u7684\u7d22\u5f15\u65f6\uff0c \u5b9e\u9645\u662f\u521b\u5efa\u4e86 MySQL \u53ef\u5229\u7528\u7684 n \u4e2a\u7d22\u5f15\u3002\u591a\u5217\u7d22\u5f15\u53ef\u8d77\u51e0\u4e2a\u7d22\u5f15\u7684\u4f5c\u7528\uff0c \u56e0\u4e3a\u53ef\u5229\u7528\u7d22\u5f15\u4e2d\u6700\u5de6\u8fb9\u7684\u5217\u96c6\u6765\u5339\u914d\u884c\u3002 \u8fd9\u6837\u7684\u5217\u96c6\u79f0\u4e3a\u6700\u5de6\u524d\u7f00\u3002 \u4e0d\u8981\u8fc7\u5ea6\u7d22\u5f15\u3002\u6bcf\u4e2a\u989d\u5916\u7684\u7d22\u5f15\u90fd\u8981\u5360\u7528\u989d\u5916\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c \u5e76\u964d\u4f4e\u5199\u64cd\u4f5c\u7684\u6027\u80fd\u3002 \u5728\u4fee\u6539\u8868\u7684\u5185\u5bb9\u65f6\uff0c \u7d22\u5f15\u5fc5\u987b\u8fdb\u884c\u66f4\u65b0\uff0c\u6709\u65f6\u53ef\u80fd\u9700\u8981\u91cd\u6784\uff0c\u56e0\u6b64\uff0c\u7d22\u5f15\u8d8a\u591a\uff0c\u6240\u82b1\u7684\u65f6\u95f4\u8d8a\u957f\u3002 \u5bf9\u4e8e InnoDB \u5b58\u50a8\u5f15\u64ce\u7684\u8868\uff0c\u5c3d\u91cf\u81ea\u5df1\u6307\u5b9a\u4e3b\u952e\u3002InnoDB \u8868\u7684\u666e\u901a\u7d22\u5f15\u90fd\u4f1a\u4fdd\u5b58\u4e3b\u952e\u7684\u952e\u503c\uff0c\u6240\u4ee5\u4e3b\u952e\u8981\u5c3d\u53ef\u80fd\u9009\u62e9\u8f83\u77ed\u7684\u6570\u636e\u7c7b\u578b\uff0c \u53ef\u4ee5\u6709\u6548\u5730\u51cf\u5c11\u7d22\u5f15\u7684\u78c1\u76d8\u5360\u7528\uff0c \u63d0\u9ad8\u7d22\u5f15\u7684\u7f13\u5b58\u6548\u679c\u3002","title":"\u8bbe\u8ba1\u539f\u5219"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#btree-hash","text":"MEMORY \u5b58\u50a8\u5f15\u64ce\u7684\u8868\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528 BTREE\u7d22\u5f15 \u6216\u8005 HASH\u7d22\u5f15 \uff0c \u4e24\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u7d22\u5f15\u5404\u6709\u5176\u4e0d\u540c\u7684\u9002\u7528\u8303\u56f4\u3002 HASH \u7d22\u5f15\u6709\u4e00\u4e9b\u91cd\u8981\u7684\u7279\u5f81\u9700\u8981\u5728\u4f7f\u7528\u7684\u65f6\u5019\u7279\u522b\u6ce8\u610f\uff1a \u53ea\u7528\u4e8e\u4f7f\u7528=\u6216<=>\uff08NULL\u7684\u5b89\u5168\u6bd4\u8f83\uff09\u64cd\u4f5c\u7b26\u7684\u7b49\u5f0f\u6bd4\u8f83\uff08\u4f46\u662f\u5f88\u5feb\uff09\u3002 \u4f18\u5316\u5668\u4e0d\u80fd\u4f7f\u7528 HASH \u7d22\u5f15\u6765\u52a0\u901f ORDER BY \u64cd\u4f5c\u3002 MySQL \u4e0d\u80fd\u786e\u5b9a\u5728\u4e24\u4e2a\u503c\u4e4b\u95f4\u5927\u7ea6\u6709\u591a\u5c11\u884c\u3002 \u5982\u679c\u5c06\u4e00\u4e2a MyISAM \u8868\u6539\u4e3a HASH \u7d22 \u5f15\u7684 MEMORY \u8868\uff0c\u4f1a\u5f71\u54cd\u4e00\u4e9b\u67e5\u8be2\u7684\u6267\u884c\u6548\u7387\u3002 \u53ea\u80fd\u4f7f\u7528\u6574\u4e2a\u5173\u952e\u5b57\u6765\u641c\u7d22\u4e00\u884c\u3002 \u800c\u5bf9\u4e8e BTREE \u7d22\u5f15\uff0c \u5f53\u4f7f\u7528>\u3001 <\u3001 >=\u3001 <=\u3001 BETWEEN\u3001!=\u6216\u8005<>\uff0c \u6216\u8005 LIKE 'pattern' \uff08\u5176 \u4e2d'pattern'\u4e0d\u4ee5\u901a\u914d\u7b26\u5f00\u59cb\uff09\u64cd\u4f5c\u7b26\u65f6\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u76f8\u5173\u5217\u4e0a\u7684\u7d22\u5f15\u3002 IN \u8303\u56f4\u67e5\u8be2\u9002\u7528\u4e8e BTREE \u7d22\u5f15\u548c HASH \u7d22\u5f15\uff1a SELECT * FROM t1 WHERE key_col IN ( 15 , 18 , 20 ); InnoDB \u548c MyISAM \u4e0d\u652f\u6301HASH\u7d22\u5f15\u7c7b\u578b \uff0c\u5982\u679c\u6307\u5b9a\u4e86\u4f7f\u7528HASH\u7c7b\u578b\u7684\u7d22\u5f15\uff0c\u4f1a\u88ab\u66ff\u6362\u4e3aBTREE\u3002 \u6ce8\u610f \uff1a\u5982\u679c\u9700\u8981\u8bbf\u95ee\u5927\u90e8\u5206\u884c\uff0c\u987a\u5e8f\u8bfb\u53d6\u8981\u5feb\u5f97\u591a\uff0c\u56e0\u4e3a\u6b64\u65f6\u5e94\u907f\u514d\u78c1\u76d8\u641c\u7d22\u3002","title":"BTREE \u7d22\u5f15\u4e0e HASH \u7d22\u5f15"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#oceanbase","text":"MySQL/PostgreSQL \u53ea\u5b9e\u73b0\u4e86 \u672c\u5730\u7d22\u5f15 ORACLE \u6709 \u672c\u5730\u7d22\u5f15 \u5168\u5c40\u7d22\u5f15","title":"\u5c40\u90e8\u7d22\u5f15\u548c\u5168\u5c40\u7d22\u5f15 OCEANBASE"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#local","text":"\u5c40\u90e8\u7d22\u5f15\u662f\u9488\u5bf9 \u5355\u4e2a\u5206\u533a\u4e0a \u7684\u6570\u636e\u521b\u5efa\u7684\u7d22\u5f15\uff0c\u56e0\u6b64\u5c40\u90e8\u7d22\u5f15\u7684\u7d22\u5f15\u952e\u503c\u8ddf\u8868\u4e2d\u7684\u6570\u636e\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\uff0c\u5373 \u5c40\u90e8\u7d22\u5f15\u4e0a\u7684\u4e00\u4e2a\u5206\u533a\u4e00\u5b9a\u5bf9\u5e94\u5230\u4e00\u4e2a\u8868\u5206\u533a \uff0c\u5b83\u4eec\u5177\u6709\u76f8\u540c\u7684\u5206\u533a\u89c4\u5219\uff0c\u56e0\u6b64\u5bf9\u4e8e \u5c40\u90e8\u552f\u4e00\u7d22\u5f15 \u800c\u8a00\uff0c\u5b83\u53ea\u80fd\u4fdd\u8bc1\u5206\u533a \u5185\u90e8\u7684\u552f\u4e00\u6027 \uff0c\u800c\u65e0\u6cd5\u4fdd\u8bc1\u8868\u6570\u636e\u7684\u5168\u5c40\u552f\u4e00\u6027\u3002 \u5982\u679c\u8981\u4f7f\u7528\u5c40\u90e8\u552f\u4e00\u7d22\u5f15\u53bb\u5bf9\u6570\u636e\u552f\u4e00\u6027\u505a\u7ea6\u675f\uff0c\u90a3\u4e48\u5c40\u90e8\u552f\u4e00\u7d22\u5f15\u4e2d\u5fc5\u987b\u5305\u542b\u8868\u5206\u533a\u952e employee \u8868\u6309\u7167 emp_id \u505a\u4e86 Range \u5206\u533a\uff0c\u540c\u65f6\u4e5f\u5728 emp_name \u4e0a\u521b\u5efa\u4e86\u5c40\u90e8\u7d22\u5f15\u3002","title":"\u5c40\u90e8\u7d22\u5f15 LOCAL"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#global","text":"\u5168\u5c40\u7d22\u5f15\u7684\u5206\u533a\u89c4\u5219\u8ddf\u8868\u5206\u533a\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u5168\u5c40\u7d22\u5f15\u5141\u8bb8\u6307\u5b9a\u81ea\u5df1\u7684\u5206\u533a\u89c4\u5219\u548c\u5206\u533a\u4e2a\u6570\uff0c \u4e0d\u4e00\u5b9a\u9700\u8981\u8ddf\u8868\u5206\u533a\u89c4\u5219\u4fdd\u6301\u4e00\u81f4","title":"\u5168\u5c40\u7d22\u5f15 GLOBAL"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#global-non-partitioned-index","text":"\u4e0d\u5206\u533a \uff1a\u4fdd\u6301\u5355\u4e00\u7684\u6570\u636e\u7ed3\u6784\uff0c\u548c\u975e\u5206\u533a\u8868\u7684\u7d22\u5f15\u7c7b\u4f3c\u3002\u4f46\u7531\u4e8e\u4e3b\u8868\u5df2\u7ecf\u505a\u4e86\u5206\u533a\uff0c\u56e0\u6b64\u4f1a\u51fa\u73b0\u7d22\u5f15\u4e2d\u7684\u67d0\u4e00\u4e2a\u952e\u6620\u5c04\u5230\u4e0d\u540c\u4e3b\u8868\u5206\u533a\u7684\u60c5\u51b5\uff0c\u5373\u4e00\u5bf9\u591a\u7684\u5bf9\u5e94\u5173\u7cfb","title":"\u5168\u5c40\u975e\u5206\u533a\u7d22\u5f15\uff08Global Non-Partitioned Index\uff09"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#global-partitioned-index","text":"\u5206\u533a \uff1a\u7d22\u5f15\u6570\u636e\u6309\u7167\u6307\u5b9a\u7684\u65b9\u5f0f\u505a\u5206\u533a\u5904\u7406\uff0c\u5c06\u7d22\u5f15\u6570\u636e\u5206\u6563\u5230\u4e0d\u540c\u7684\u5206\u533a\u4e2d\u3002\u4f46\u7d22\u5f15\u7684\u5206\u533a\u6a21\u5f0f\u662f\u5b8c\u5168\u72ec\u7acb\u7684\uff0c\u548c\u4e3b\u8868\u7684\u5206\u533a\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff0c\u56e0\u6b64\u5bf9\u4e8e\u6bcf\u4e2a\u7d22\u5f15\u5206\u533a\u6765\u8bf4\uff0c\u91cc\u9762\u7684\u67d0\u4e00\u4e2a\u952e\u90fd\u53ef\u80fd\u6620\u5c04\u5230\u4e0d\u540c\u7684\u4e3b\u8868\u5206\u533a\uff08\u5f53\u7d22\u5f15\u952e\u6709\u91cd\u590d\u503c\u65f6\uff09\uff0c\u7d22\u5f15\u5206\u533a\u548c\u4e3b\u8868\u5206\u533a\u4e4b\u95f4\u662f\u591a\u5bf9\u591a\u7684\u5bf9\u5e94\u5173\u7cfb\u3002 employee \u8868\u6309\u7167 emp_id \u505a\u4e86 Range \u5206\u533a\uff0c\u540c\u65f6\u5728 emp_name \u4e0a\u505a\u4e86\u5168\u5c40\u5206\u533a\u7d22\u5f15\u3002\u53ef\u4ee5\u770b\u5230\u540c\u4e00\u4e2a\u7d22\u5f15\u5206\u533a\u91cc\u7684\u952e\uff0c\u4f1a\u6307\u5411\u4e0d\u540c\u7684\u4e3b\u8868\u5206\u533a\u3002 Note \u975e\u5206\u533a\u8868\u4e5f\u53ef\u4ee5\u521b\u5efa\u5168\u5c40\u5206\u533a\u7d22\u5f15\uff0c\u4f46\u5982\u679c\u4e3b\u8868\u6ca1\u6709\u5206\u533a\uff0c\u901a\u5e38\u6765\u8bf4\u7d22\u5f15\u4e5f\u5c31\u6ca1\u6709\u5fc5\u8981\u5206\u533a\u4e86\u3002 \u63a8\u8350\u4f7f\u7528 \u5168\u5c40\u7d22\u5f15 \u7684\u573a\u666f\u5305\u62ec\uff1a \u4e1a\u52a1\u4e0a\u9664\u4e86\u4e3b\u952e\u5916\uff0c\u8fd8\u6709\u5176\u4ed6\u5217\u7684\u7ec4\u5408\u9700\u8981\u6ee1\u8db3\u5168\u5c40\u552f\u4e00\u6027\u7684\u5f3a\u9700\u6c42\uff0c\u8fd9\u4e2a\u4e1a\u52a1\u9700\u6c42\u4ec5\u80fd\u901a\u8fc7\u5168\u5c40\u6027\u7684\u552f\u4e00\u7d22\u5f15\u6765\u5b9e\u73b0 \u4e1a\u52a1\u7684\u67e5\u8be2\u65e0\u6cd5\u5f97\u5230\u5206\u533a\u952e\u7684\u6761\u4ef6\u8c13\u8bcd\uff0c\u4e14\u4e1a\u52a1\u8868\u6ca1\u6709\u9ad8\u5e76\u53d1\u7684\u540c\u65f6\u5199\u5165\uff0c\u4e3a\u907f\u514d\u8fdb\u884c\u5168\u5206\u533a\u7684\u626b\u63cf\uff0c\u53ef\u4ee5\u6839\u636e\u67e5\u8be2\u6761\u4ef6\u6784\u5efa\u5168\u5c40\u7d22\u5f15\uff0c\u5fc5\u8981\u65f6\u53ef\u4ee5\u5c06\u5168\u5c40\u7d22\u5f15\u6309\u7167\u65b0\u7684\u5206\u533a\u952e\u6765\u5206\u533a \u5168\u5c40\u7d22\u5f15\u867d\u7136\u4e3a\u5168\u5c40\u552f\u4e00\u3001\u6570\u636e\u91cd\u65b0\u5206\u533a\u5e26\u6765\u4e86\u53ef\u80fd\uff0c\u89e3\u51b3\u4e86\u4e00\u4e9b\u4e1a\u52a1\u9700\u8981\u6839\u636e\u4e0d\u540c\u7ef4\u5ea6\u8fdb\u884c\u67e5\u8be2\u7684\u5f3a\u9700\u6c42\uff0c\u4f46\u662f\u4e3a\u6b64\u4ed8\u51fa\u7684\u4ee3\u4ef7\u662f\u6bcf\u4e00\u7b14\u6570\u636e\u7684\u5199\u5165\u90fd\u6709\u53ef\u80fd\u53d8\u6210 \u8de8\u673a\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1 \uff0c\u5728\u9ad8\u5e76\u53d1\u7684\u5199\u5165\u573a\u666f\u4e0b\u5b83\u5c06\u5f71\u54cd\u7cfb\u7edf\u7684\u5199\u5165\u6027\u80fd\u3002\u5f53\u4e1a\u52a1\u7684\u67e5\u8be2\u53ef\u4ee5\u62e5\u6709\u5206\u533a\u952e\u7684\u6761\u4ef6\u8c13\u8bcd\u65f6\uff0cOceanBase \u6570\u636e\u5e93\u4f9d\u65e7\u63a8\u8350\u6784\u5efa\u5c40\u90e8\u7d22\u5f15\uff0c\u901a\u8fc7\u6570\u636e\u5e93\u4f18\u5316\u5668\u7684 \u5206\u533a\u88c1\u526a\u529f\u80fd \uff0c\u6392\u9664\u6389\u4e0d\u7b26\u5408\u6761\u4ef6\u7684\u5206\u533a\u3002\u8fd9\u6837\u7684\u505a\u6cd5\u53ef\u4ee5\u540c\u65f6\u517c\u987e\u67e5\u8be2\u548c\u5199\u5165\u7684\u6027\u80fd\uff0c\u8ba9\u7cfb\u7edf\u7684\u603b\u4f53\u6027\u80fd\u8868\u73b0\u66f4\u4f18\u3002","title":"\u5168\u5c40\u5206\u533a\u7d22\u5f15\uff08Global Partitioned Index\uff09"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#_3","text":"\u7d22\u5f15\u8868\u5206\u4e3a\u552f\u4e00\u7d22\u5f15\u548c\u975e\u552f\u4e00\u7d22\u5f15\uff0c\u5176\u4e2d\u552f\u4e00\u7d22\u5f15\u4fdd\u8bc1\u5728\u8868\u5185\u7684\u7d22\u5f15\u5217\u4e0a\u4e0d\u5b58\u5728\u4e24\u884c\u6709\u5b8c\u5168\u76f8\u540c\u7684\u503c\uff0c\u800c\u975e\u552f\u4e00\u7d22\u5f15\u5219\u53ef\u80fd\u5b58\u5728\u5b8c\u5168\u76f8\u540c\u7684\u503c\u3002\u5728 OceanBase \u6570\u636e\u5e93\u4e2d\uff0cNULL \u503c\u4e5f\u4f1a\u5b58\u50a8\u5728\u7d22\u5f15\u4e2d\u3002 \u200b\u5bf9\u4e8e\u975e\u552f\u4e00\u7d22\u5f15\uff0c\u7d22\u5f15\u8868\u7684\u5b58\u50a8\u952e\u662f\u7528\u6237\u6307\u5b9a\u7684\u7d22\u5f15\u5217\u548c\u4e3b\u8868\u4e3b\u952e\uff1b\u800c\u5bf9\u4e8e\u552f\u4e00\u7d22\u5f15\u5217\uff0c\u7d22\u5f15\u8868\u7684\u5b58\u50a8\u952e\u662f\u7528\u6237\u6307\u5b9a\u7684\u7d22\u5f15\u5217\u548c\u53ef\u53d8\u7684\u4e3b\u8868\u4e3b\u952e\u5217\uff0c\u8fd9\u91cc\u53ef\u53d8\u7684\u542b\u4e49\u662f\u4e3b\u952e\u5217\u7684\u503c\u662f\u968f\u7d22\u5f15\u5217\u503c\u7684\u4e0d\u540c\u800c\u4e0d\u540c\u3002 \u5982\u4e0b\u4f8b\u6240\u793a\uff0c\u5bf9\u4e8e\u975e\u552f\u4e00\u7d22\u5f15\u8868 i1\uff0c\u5b83\u7684\u5b58\u50a8\u952e\u662f c2 \u548c c1\uff0c\u800c\u5bf9\u4e8e\u552f\u4e00\u7d22\u5f15\u8868 i2\uff0c\u5b83\u7684\u5b58\u50a8\u952e\u662f c2\uff0c\u800c c1 \u662f\u53ef\u53d8\u7684\u3002\u5f53 c2 \u4e3a NULL \u65f6\uff0c\u53ef\u53d8\u7684 c1 \u5217\u503c\u662f\u4e3b\u8868 c1 \u5217\u7684\u503c\uff1b\u5f53 c2 \u4e0d\u4e3a NULL \u65f6\uff0c\u53ef\u53d8\u7684 c1 \u5217\u503c\u4e3a NULL\u3002 CREATE TABLE t1 ( c1 INT , c2 INT , c3 INT , c4 INT , PRIMARY KEY ( c1 )); CREATE INDEX i1 ON t1 ( c2 ); CREATE UNIQUE INDEX i2 ON t1 ( c3 );","title":"\u552f\u4e00\u7d22\u5f15\u548c\u975e\u552f\u4e00\u7d22\u5f15"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#_4","text":"\u5f53\u7528\u6237\u521b\u5efa\u597d\u7d22\u5f15\u540e\uff0cOceanBase \u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u7ef4\u62a4\u8be5\u7d22\u5f15\uff0c\u6240\u6709\u7684 DML \u64cd\u4f5c\u90fd\u4f1a\u5b9e\u65f6\u66f4\u65b0\u7d22\u5f15\u8868\u76f8\u5e94\u7684\u6570\u636e\u8bb0\u5f55\uff0c\u540c\u65f6\u4f18\u5316\u5668\u4e5f\u4f1a\u6839\u636e\u7528\u6237\u7684\u67e5\u8be2\u6765\u81ea\u52a8\u5730\u9009\u62e9\u662f\u5426\u4f7f\u7528\u7d22\u5f15\u3002\u672c\u6587\u4e3b\u8981\u4ecb\u7ecd\u5982\u4f55\u8fdb\u884c\u7d22\u5f15\u626b\u63cf\u3002 \u5f53 SQL \u67e5\u8be2\u8bed\u53e5\u6307\u5b9a\u8c13\u8bcd\u6761\u4ef6\u67e5\u8be2\u7684\u662f\u7d22\u5f15\u5217\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u5730\u62bd\u53d6\u8c13\u8bcd\u6761\u4ef6\u4f5c\u4e3a\u67e5\u8be2\u7d22\u5f15\u7684\u8303\u56f4\uff0c\u4e5f\u5c31\u662f\u67e5\u8be2\u7d22\u5f15\u8868\u7684\u8d77\u59cb\u952e\u548c\u7ec8\u6b62\u952e\u3002\u6570\u636e\u5e93\u6839\u636e\u8d77\u59cb\u952e\u80fd\u5b9a\u4f4d\u5230\u6570\u636e\u5f00\u59cb\u7684\u4f4d\u7f6e\uff0c\u6839\u636e\u7ec8\u6b62\u952e\u80fd\u5b9a\u4f4d\u51fa\u6570\u636e\u7ed3\u675f\u4f4d\u7f6e\uff0c\u800c\u5f00\u59cb\u548c\u7ed3\u675f\u4f4d\u7f6e\u8303\u56f4\u5185\u6240\u5305\u542b\u7684\u6570\u636e\u662f\u9700\u8981\u88ab\u6b64\u67e5\u8be2\u626b\u63cf\u7684\u6570\u636e\u3002 \u200b\u5bf9\u4e8e\u7d22\u5f15\u8868\uff0cOceanBase \u6570\u636e\u5e93\u5b58\u50a8\u65f6\u4f7f\u7528 MemTable \u5185\u5b58 \u548c SSTable \u78c1\u76d8 \u6765\u5b58\u50a8\u6570\u636e\uff0c\u5176\u4e2d MemTable \u4f7f\u7528\u7684\u662fB+ \u6811\u7ed3\u6784\uff0c\u800c SSTable \u4f7f\u7528\u7684\u662f\u5b8f\u5757\u7ed3\u6784\u3002\u5728 MemTable \u6216\u8005 SSTable \u90fd\u6309\u7167\u4e0a\u8ff0\u626b\u63cf\u8fc7\u7a0b\uff0c\u626b\u63cf\u51fa\u76f8\u5e94\u7684\u6570\u636e\uff0c\u800c\u6700\u7ec8\u7684\u6570\u636e\u884c\u662f\u7531 MemTable \u548c SSTable \u7684\u6570\u636e\u884c\u878d\u5408\u6210\u5b8c\u6574\u7684\u6570\u636e\u884c\u3002 \u56e0\u6b64\uff0c OB \u67e5\u8be2\u7d22\u5f15\u8868\u6570\u636e\u7684\u5b8c\u6574\u8fc7\u7a0b\u5982\u4e0b\uff1a \u5728 MemTable \u4e2d\u67e5\u8be2\u6570\u636e\u3002 \u5728 SSTable \u4e2d\u67e5\u8be2\u6570\u636e\u3002 \u5c06 MemTable \u548c SSTable \u4e2d\u7684\u6570\u636e\u878d\u5408\uff0c\u5f97\u5230\u5b8c\u6574\u7684\u884c\u3002 \u200b\u5f53 SQL \u67e5\u8be2\u8bed\u53e5\u53ea\u6d89\u53ca\u5230\u7d22\u5f15\u8868\u4e2d\u7684\u5217\u65f6\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u4f1a\u6839\u636e\u7528\u6237\u6307\u5b9a\u7684\u5217\uff0c\u6309\u7167\u4e0a\u8ff0\u67e5\u8be2\u8fc7\u7a0b\uff0c\u67e5\u8be2\u76f8\u5e94\u7d22\u5f15\u8868\u7684 MemTable \u548c SSTable\uff0c\u5f97\u5230\u5b8c\u6574\u7684\u6570\u636e\u884c\u3002 \u200b\u5f53 SQL \u67e5\u8be2\u8bed\u53e5\u9664\u4e86\u5305\u542b\u7d22\u5f15\u8868\u4e2d\u7684\u5217\uff0c\u8fd8\u5305\u542b\u5176\u4ed6\u5217\u65f6\uff0c\u6570\u636e\u5e93\u4f1a\u5148\u901a\u8fc7\u7d22\u5f15\u8868\uff0c\u67e5\u8be2\u51fa\u76f8\u5173\u7684\u884c\uff0c\u5e76\u6839\u636e\u884c\u4e0a\u7684\u4e3b\u952e\uff0c\u6309\u7167\u4e0a\u8ff0\u67e5\u8be2\u8fc7\u7a0b\uff0c\u5230\u4e3b\u8868\u4e2d\u67e5\u8be2\u6240\u9700\u8981\u7684\u6570\u636e\u5217 \u56de\u8868 \u3002","title":"\u7d22\u5f15\u7684\u4f7f\u7528"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/02%20%E7%B4%A2%E5%BC%95/#_5","text":"OB \u4e2d\uff0c\u7d22\u5f15\u8868\u7684\u5b58\u50a8\u7c7b\u4f3c\u4e8e\u666e\u901a\u7684\u6570\u636e\u8868\uff0c\u5176\u6570\u636e\u4e5f\u662f\u5b58\u50a8\u5728\u5b8f\u5757\u548c\u5fae\u5757\u7684\u7ed3\u6784\u4e2d\u3002\u7531\u4e8e OB \u4f7f\u7528\u7684\u662f\u805a\u96c6\u7d22\u5f15\u8868\u6a21\u578b\uff0c\u56e0\u6b64\u5728\u7d22\u5f15\u7684\u884c\u4e2d\u9664\u4e86\u7528\u6237\u6307\u5b9a\u7684\u7d22\u5f15\u5217\u4e4b\u5916\uff0c\u8fd8\u4f1a\u5b58\u50a8\u4e3b\u8868\u7684\u4e3b\u952e\u5217\uff0c\u4ee5\u65b9\u4fbf\u8fdb\u884c\u56de\u8868\u3002","title":"\u7d22\u5f15\u7684\u5b58\u50a8"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/","text":"\u6982\u5ff5 \u00b6 \u5206\u533a\u5c06\u4e00\u5f20\u8868\u5206\u4e3a\u51e0\u4e2a\u5206\u533a\u8fdb\u884c\u5b58\u50a8 [\u7269\u7406\u5206\u533a] \uff0c\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u5f20\u8868\u3002\u5206\u533a\u952e\u7528\u4e8e\u6839\u636e\u67d0\u4e2a\u533a\u95f4\u503c [RANGE] \u3001\u7279\u5b9a\u503c\u5217\u8868 [LIST] \u6216hash\u51fd\u6570\u503c [HASH] \u6267\u884c\u6570\u636e\u7684\u805a\u96c6\uff0c\u8ba9\u6570\u636e\u66f4\u5177\u5206\u5e03\u89c4\u5219\u5206\u5e03\u5728\u4e0d\u540c\u7684\u5206\u533a\u4e2d\uff0c\u8ba9\u4e00\u4e2a\u5927\u5bf9\u8c61\u53d8\u6210\u4e00\u4e9b\u5c0f\u5bf9\u8c61\u3002 \u5206\u533a\u7684\u4f18\u70b9\uff1a \u53ef\u4ee5\u5728\u4e00\u4e2a\u8868\u4e2d\u5b58\u50a8\u6bd4\u5728\u5355\u4e2a\u78c1\u76d8\u6216\u6587\u4ef6\u7cfb\u7edf\u5206\u533a\u4e0a\u80fd\u4fdd\u5b58\u7684\u66f4\u591a\u7684\u6570\u636e \u53ef\u4ee5\u8f7b\u677e\u7684\u79fb\u9664\u6216\u6dfb\u52a0\u5206\u533a\u8fbe\u5230\u5220\u9664\u6570\u636e\u6216\u65b0\u589e\u5b58\u50a8\u6570\u636e\u7684\u7a7a\u95f4 \u4e00\u4e9b\u67e5\u8be2\u53ef\u4ee5\u5f97\u5230\u5f88\u597d\u7684\u4f18\u5316 \u4e3e\u4f8b: \u6307\u5b9a\u5206\u533a\u67e5\u8be2 \u8de8\u591a\u4e2a\u78c1\u76d8\u5206\u6563\u6570\u636e\u67e5\u8be2\uff0c\u83b7\u5f97\u66f4\u5927\u7684\u541e\u5410\u91cf \u5206\u533a\u8868\u7684\u521b\u5efa \u00b6 CREATE [ TEMPORARY ] TABLE [ IF NOT EXISTS ] tbl_name ( create_definition ,...) [ table_options ] [ partition_options ] partition_options : PARTITION BY { [ LINEAR ] HASH ( expr ) | [ LINEAR ] KEY ( column_list ) | RANGE { ( expr ) | COLUMNS ( column_list ) } | LIST { ( expr ) | COLUMNS ( column_list ) } } [ PARTITIONS num ] [ SUBPARTITION BY { [ LINEAR ] HASH ( expr ) | [ LINEAR ] KEY ( column_list ) } [ SUBPARTITIONS num ] ] [( partition_definition [, partition_definition ] ...)] partition_definition : PARTITION partition_name [ VALUES { LESS THAN { ( expr | value_list ) | MAXVALUE } | IN ( value_list ) } ] [[ STORAGE ] ENGINE [ = ] engine_name ] [ COMMENT [ = ] 'comment_text' ] [ DATA DIRECTORY [ = ] 'data_dir' ] [ INDEX DIRECTORY [ = ] 'index_dir' ] [ MAX_ROWS [ = ] max_number_of_rows ] [ MIN_ROWS [ = ] min_number_of_rows ] [ TABLESPACE [ = ] tablespace_name ] [ NODEGROUP [ = ] node_group_id ] [( subpartition_definition [, subpartition_definition ] ...)] subpartition_definition : SUBPARTITION logical_name [[ STORAGE ] ENGINE [ = ] engine_name ] [ COMMENT [ = ] 'comment_text' ] [ DATA DIRECTORY [ = ] 'data_dir' ] [ INDEX DIRECTORY [ = ] 'index_dir' ] [ MAX_ROWS [ = ] max_number_of_rows ] [ MIN_ROWS [ = ] min_number_of_rows ] [ TABLESPACE [ = ] tablespace_name ] [ NODEGROUP [ = ] node_group_id ] Note \u5206\u533a\u9009\u9879\u4e00\u5b9a\u8981\u653e\u5728\u6700\u540e \u6307\u5b9a\u8868\u7684\u5206\u533a\u6570 PARTITIONS num \u65f6\uff0c\u5fc5\u987b\u5c06\u5176\u8868\u793a\u4e3a\u4e0d\u5e26\u524d\u5bfc\u96f6\u7684\u975e\u96f6\u6b63\u6574\u6570 \u5206\u533a\u8868\u4e0a\u6ca1\u6709\u4e3b\u952e/\u552f\u4e00\u952e \u6216\u8005 \u6bcf\u4e2a [mysql] \u552f\u4e00\u952e | [OB] \u4e3b\u952e \u90fd\u5fc5\u987b\u5305\u542b\u6240\u6709\u5206\u533a\u952e \u5206\u533a\u7684\u540d\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199 \u67e5\u770b\u5206\u533a \u00b6 \u4f7f\u7528 SHOW CREATE TABLE \u67e5\u770b\u5206\u533a\u8868\u7684\u5206\u533a\u5b50\u53e5\u3002 \u4f7f\u7528 SHOW TABLE STATUS \u786e\u8ba4\u662f\u5426\u662f\u5206\u533a\u8868\u3002 \u67e5\u8be2 INFORMATION_SCHEMA.PARTITIONS \u8868\uff1a SELECT * FROM INFORMATION_SCHEMA . PARTITIONS WHERE TABLE_NAME = 'table_name' ; \u4f7f\u7528 EXPLAIN select_statement \u67e5\u770b\u4f7f\u7528\u4e86\u54ea\u4e9b\u5206\u533a \u5220\u9664\u5206\u533a \u00b6 \u548c\u5220\u9664\u8868\u4e00\u6837\uff0c\u4f7f\u7528 TRUNCATE / DROP \u6e05\u7a7a\u5206\u533a\uff08\u6bd4 DELETE \u8981\u5feb\uff09 -- DROP PARTITION can only be used on RANGE/LIST partitions ALTER TABLE table_name TRUNCATE / DROP PARTITION partition_name ; \u5206\u533a\u7c7b\u578b \u00b6 \u901a\u8fc7 KEY RANGE COLUMNS LIST COLUMNS \u5206\u533a\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 DATE TIME DATETIME \u7c7b\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u5b57\u6bb5\u3002 \u5176\u5b83\u7684\u5206\u533a\u7c7b\u578b\u5728\u8981\u6c42\u4e00\u4e2a\u8fd4\u56de\u6574\u578b\u6570\u503c\u6216NULL\u7684\u5206\u533a\u8868\u8fbe\u5f0f RANGE \u5206\u533a \u00b6 \u6309\u8303\u56f4\u5206\u533a\u7684\u8868\u7684\u5206\u533a\u65b9\u5f0f\u662f\uff1a\u6bcf\u4e2a\u5206\u533a\u5305\u542b\u5206\u533a\u8868\u8fbe\u5f0f\u503c\u4f4d\u4e8e\u7ed9\u5b9a\u8303\u56f4\u5185\u7684\u884c\u3002 \u8303\u56f4\u5e94\u8be5\u662f \u8fde\u7eed\u4f46\u4e0d\u91cd\u53e0\u7684 \uff0c\u5e76\u4e14\u4f7f\u7528 VALUES LESS THAN \u8fd0\u7b97\u7b26\u5b9a\u4e49\u3002 NULL\u4f1a\u88ab\u5f53\u4f5c\u6700\u5c0f\u503c\u6765\u5904\u7406 \u652f\u6301\u4f7f\u7528 DATE,DATETIME \u7c7b\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e \u652f\u6301\u4f7f\u7528 UNIX_TIMESTAMP,YEAR \u7b49\u51fd\u6570\u8fdb\u884c\u5206\u533a -- \u4f7f\u7528\u6574\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e CREATE TABLE ` range_test ` ( ` ID ` int ( 11 ) DEFAULT NULL ) PARTITION BY RANGE ( ID ) ( PARTITION P0 VALUES LESS THAN ( 5 ) ENGINE = InnoDB , PARTITION P1 VALUES LESS THAN ( 10 ) ENGINE = InnoDB ) -- \u4f7f\u7528DATE\u7c7b\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e CREATE TABLE members ( username VARCHAR ( 16 ) NOT NULL , email VARCHAR ( 35 ), joined DATE NOT NULL ) PARTITION BY RANGE COLUMNS ( joined ) ( PARTITION p0 VALUES LESS THAN ( '1960-01-01' ), PARTITION p1 VALUES LESS THAN MAXVALUE ); -- \u4f7f\u7528UNIX_TIMESTAMP\u51fd\u6570\u8fdb\u884c\u5206\u533a CREATE TABLE quarterly_report_status ( report_id INT NOT NULL , report_updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ) PARTITION BY RANGE ( UNIX_TIMESTAMP ( report_updated ) ) ( PARTITION p0 VALUES LESS THAN ( UNIX_TIMESTAMP ( '2008-01-01 00:00:00' ) ), PARTITION p1 VALUES LESS THAN ( MAXVALUE ) ); -- \u4f7f\u7528YEAR\u7b49\u51fd\u6570\u8fdb\u884c\u5206\u533a CREATE TABLE employees ( id INT NOT NULL , separated DATE NOT NULL DEFAULT '9999-12-31' , store_id INT ) PARTITION BY RANGE ( YEAR ( separated ) ) ( PARTITION p0 VALUES LESS THAN ( 1991 ), PARTITION p1 VALUES LESS THAN MAXVALUE ); RANGE \u5206\u533a\u7c7b\u578b\u7279\u522b\u9002\u5408\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a \u9700\u8981\u5220\u9664\u65e7\u6570\u636e\u65f6\u3002\u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u901a\u8fc7\u5220\u9664\u5206\u533a\u6765\u5220\u9664\u65e7\u6570\u636e ALTER TABLE employees DROP PARTITION p0; \u4f7f\u7528\u5305\u542b\u65e5\u671f\u6216\u65f6\u95f4\u503c\u7684\u5217\uff0c\u6216\u5305\u542b\u6765\u81ea\u5176\u4ed6\u4e00\u4e9b\u7cfb\u5217\u7684\u503c \u7ecf\u5e38\u8fd0\u884c\u5305\u542b\u5206\u533a\u952e\u7684\u67e5\u8be2 LIST \u5206\u533a \u00b6 \u5efa\u7acb\u79bb\u6563\u7684\u503c\u5217\u8868\u544a\u8bc9\u6570\u636e\u5e93\u7279\u5b9a\u7684\u503c\u5c5e\u4e8e\u54ea\u4e2a\u5206\u533a\u3002 \u4ece\u5c5e\u4e8e\u4e00\u4e2a \u679a\u4e3e\u5217\u8868 \u7684\u503c\u7684\u96c6\u5408\uff0c RANGE\u5206\u533a \u662f\u4ece\u5c5e\u4e8e\u4e00\u4e2a\u8fde\u7eed\u533a\u95f4\u503c\u7684\u96c6\u5408\u3002 \u6ca1\u6709\u7c7b\u4f3c\u4e8e MAXVALUE \u7684\u503c\u6765\u5339\u914d\u6240\u6709\u7684\u60c5\u51b5\uff1b \u6240\u6709\u88ab\u671f\u671b\u7684\u503c \u90fd\u5e94\u8be5\u88ab\u5305\u542b\u8fdb PARTITION ... VALUES IN (...) \u5b50\u53e5\u3002 \u4f7f\u7528\u5355\u4e2aINSERT\u8bed\u53e5\u63d2\u5165\u591a\u884c\u65f6\uff0c\u884c\u4e3a\u53d6\u51b3\u4e8e\u8868\u662f\u5426\u4f7f\u7528\u4e8b\u52a1\u5b58\u50a8\u5f15\u64ce\uff1a \u5bf9\u4e8e\u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u6574\u4e2a\u63d2\u5165\u8bed\u53e5\u4f1a\u88ab\u5f53\u505a\u4e00\u4e2a\u5355\u4e00\u7684\u4e8b\u52a1\u3002 \u5bf9\u4e8e\u4e0d\u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u5728\u5305\u542b\u672a\u5339\u914d\u503c\u7684\u4e4b\u524d\u7684\u8bb0\u5f55\u4f1a\u88ab\u63d2\u5165\uff0c\u81ea\u5df1\u53ca\u5176\u4e4b\u540e\u7684\u4e0d\u4f1a\u3002 \u53ef\u4ee5\u4f7f\u7528 IGNORE \u5173\u952e\u5b57\u5ffd\u7565\u6b64\u7c7b\u9519\u8bef\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5305\u542b\u672a\u5339\u914d\u7684\u503c\u7684\u8bb0\u5f55\u4e0d\u4f1a\u63d2\u5165\uff0c\u5176\u4f59\u7684\u90fd\u4f1a\u88ab\u63d2\u5165\u5230\u6570\u636e\u5e93\u5e76\u4e14\u4e0d\u4f1a\u53d1\u51fa\u9519\u8bef\u3002 MariaDB [ MYISAM_TEST ] > CREATE TABLE IF NOT EXISTS list_test ( ID INT ) MAX_ROWS = 8 PARTITION BY LIST ( ID ) ( PARTITION P0 VALUES IN ( 1 , 2 , 3 , 4 , 5 ), PARTITION P1 VALUES IN ( 6 , 7 , 8 ) ); MariaDB [ MYISAM_TEST ] > INSERT INTO list_test VALUES ( 1 ),( 3 ),( 9 ); ERROR 1526 ( HY000 ): Table has no partition for value 9 MariaDB [ MYISAM_TEST ] > INSERT IGNORE INTO list_test VALUES ( 1 ),( 3 ),( 9 ); Query OK , 2 rows affected , 1 warning ( 0 . 00 sec ) Records : 3 Duplicates : 1 Warnings : 1 MariaDB [ MYISAM_TEST ] > SELECT * FROM list_test ; + ------+ | ID | + ------+ | 1 | | 3 | + ------+ COLUMNS \u5206\u533a \u00b6 \u5217\u5206\u533a\u662f RANGE \u548c LIST \u5206\u533a\u7684\u53d8\u79cd\u3002COLUMNS\u5206\u533a\u5141\u8bb8\u5728\u5206\u533a\u952e\u4e2d \u4f7f\u7528\u591a\u4e2a\u5217 \u3002 RANGE COLUMNS \u5206\u533a\u548c LIST COLUMNS \u5206\u533a\u90fd\u652f\u6301\u975e\u6574\u578b\uff08non-integer\uff09\u5b57\u6bb5\u4f5c\u4e3a\u503c\u7684\u8303\u56f4\u6216\u5217\u7684\u6210\u5458\uff0c\u4ee5\u4e0b\u662f\u8fd0\u884c\u7684\u6570\u636e\u7c7b\u578b\uff1a \u6240\u6709\u7684\u6574\u6570\u7c7b\u578b\uff1a TINYINT, SMALLINT, MEDIUMINT, INT (INTEGER), BIGINT \u90e8\u5206\u65f6\u95f4\u7c7b\u578b\uff1a DATE \u548c DATETIME \u90e8\u5206\u5b57\u7b26\u4e32\u7c7b\u578b\uff1a CHAR, VARCHAR, BINARY, VARBINARY RANGE COLUMNS \u5206\u533a \u00b6 \u8fd9\u79cd\u5206\u533a\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528\u6574\u6570\u7c7b\u578b\u4ee5\u5916\u7684\u7c7b\u578b\u5217\u6765\u5b9a\u4e49\u8303\u56f4\u3002 \u76f8\u6bd4\u4e8e RANGE \u5206\u533a\uff0c RANGE COLUMNS \u5206\u533a: \u53ea\u63a5\u53d7\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u6bb5\u7ec4\u5408\u7684\u5217\u8868\u3002 \u5212\u5206 \u57fa\u4e8e\u5143\u7ec4 \u4e4b\u95f4\u7684\u6bd4\u8f83 \u4e0d\u53d7\u9650\u4e8e\u6574\u6570\u7c7b\u578b \u5176\u5b83\u7c7b\u578b\u4e5f\u53ef\u4ee5\u7528\u4f5c\u5206\u533a\u5b57\u6bb5\u3002 CREATE TABLE table_name PARTITIONED BY RANGE COLUMNS ( column_list ) ( PARTITION partition_name VALUES LESS THAN ( value_list )[, PARTITION partition_name VALUES LESS THAN ( value_list )][, ...] ); column_list : column_name [, column_name ][, ...] value_list : value [, value ][, ...] \u4e3e\u4f8b : mysql > CREATE TABLE rcx ( -> a INT , -> b INT , -> c CHAR ( 3 ) -> d INT , -> ) -> PARTITION BY RANGE COLUMNS ( a , d , c ) ( -> PARTITION p0 VALUES LESS THAN ( 5 , 10 , 'ggg' ), -> PARTITION p1 VALUES LESS THAN ( 10 , 20 , 'mmm' ), -> PARTITION p2 VALUES LESS THAN ( 15 , 30 , 'sss' ), -> PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE , MAXVALUE ) -> ); Query OK , 0 rows affected ( 0 . 15 sec ) \u5206\u533a\u7684\u5b9a\u4e49\u5fc5\u987b\u9075\u4ece\u9012\u589e\u7684\u987a\u5e8f\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff1a -- \u6b63\u786e CREATE TABLE rc4 ( a INT , b INT , c INT ) PARTITION BY RANGE COLUMNS ( a , b , c ) ( PARTITION p0 VALUES LESS THAN ( 0 , 25 , 50 ), PARTITION p1 VALUES LESS THAN ( 10 , 20 , 100 ), PARTITION p2 VALUES LESS THAN ( 10 , 30 , 50 ) PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE , MAXVALUE ) ); -- \u9519\u8bef mysql > CREATE TABLE rcf ( -> a INT , -> b INT , -> c INT -> ) -> PARTITION BY RANGE COLUMNS ( a , b , c ) ( -> PARTITION p0 VALUES LESS THAN ( 0 , 25 , 50 ), -> PARTITION p1 VALUES LESS THAN ( 20 , 20 , 100 ), -> PARTITION p2 VALUES LESS THAN ( 10 , 30 , 50 ), -> PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE , MAXVALUE ) -> ); ERROR 1493 ( HY000 ): VALUES LESS THAN value must be strictly increasing for each partition \u4e3e\u4f8b : -- \u521b\u5efa\u5206\u533a\u8868 MariaDB [ MYISAM_TEST ] > CREATE TABLE rc1 ( -> a INT , -> b INT -> ) -> PARTITION BY RANGE COLUMNS ( a , b ) ( -> PARTITION p0 VALUES LESS THAN ( 5 , 12 ), -> PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE ) -> ); -- \u63d2\u5165\u6570\u636e MariaDB [ MYISAM_TEST ] > INSERT INTO rc1 VALUES ( 5 , 2 ), ( 5 , 10 ), ( 5 , 12 ); -- \u67e5\u770b\u6570\u636e\u5206\u5e03 MariaDB [ MYISAM_TEST ] > SELECT PARTITION_NAME , TABLE_ROWS FROM INFORMATION_SCHEMA . PARTITIONS WHERE TABLE_NAME = 'rc1' ; + ----------------+------------+ | PARTITION_NAME | TABLE_ROWS | + ----------------+------------+ | p0 | 2 | | p3 | 1 | + ----------------+------------+ \u591a\u884c\u5206\u533a\u5bf9\u4e8e\u5206\u533a\u952e\u7684\u6bd4\u8f83\u662f\u5bf9\u5143\u7ec4\u8fdb\u884c\u6bd4\u8f83\uff0c\u7c7b\u4f3c\u4e8e\u8fd9\u6837\uff1a mysql > SELECT ( 5 , 10 ) < ( 5 , 12 ), ( 5 , 11 ) < ( 5 , 12 ), ( 5 , 12 ) < ( 5 , 12 ); + -----------------+-----------------+-----------------+ | ( 5 , 10 ) < ( 5 , 12 ) | ( 5 , 11 ) < ( 5 , 12 ) | ( 5 , 12 ) < ( 5 , 12 ) | + -----------------+-----------------+-----------------+ | 1 | 1 | 0 | + -----------------+-----------------+-----------------+ 1 row in set ( 0 . 00 sec ) LIST COLUMNS \u5206\u533a \u00b6 \u8fd9\u79cd\u5206\u533a\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e\uff0c\u5e76\u4f7f\u7528\u6574\u6570\u7c7b\u578b\u4ee5\u5916\u7684\u7c7b\u578b\u5217\u6765\u5b9a\u4e49\u8303\u56f4\u3002 \u4e0eRANGE COLUMNS \u7c7b\u4f3c\uff0c\u53c2\u8003\u4e0a\u6587\u8bf4\u660e\u3002 \u591a\u4e2a\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e\u7684\u5199\u6cd5\uff1a CREATE TABLE lc ( a INT NULL , b INT NULL ) PARTITION BY LIST COLUMNS ( a , b ) ( PARTITION p0 VALUES IN ( ( 0 , 0 ), ( NULL , NULL ) ), PARTITION p1 VALUES IN ( ( 0 , 1 ), ( 0 , 2 ), ( 0 , 3 ), ( 1 , 1 ), ( 1 , 2 ) ), PARTITION p2 VALUES IN ( ( 1 , 0 ), ( 2 , 0 ), ( 2 , 1 ), ( 3 , 0 ), ( 3 , 1 ) ), PARTITION p3 VALUES IN ( ( 1 , 3 ), ( 2 , 2 ), ( 2 , 3 ), ( 3 , 2 ), ( 3 , 3 ) ) ); HASH \u5206\u533a \u00b6 \u901a\u8fc7 HASH \u8fdb\u884c\u5206\u533a\u4e3b\u8981\u7528\u4e8e\u786e\u4fdd\u5728\u9884\u5b9a\u5206\u533a\u6570\u91cf\u4e4b\u95f4\u5747\u5300\u5730\u5206\u5e03\u6570\u636e\u3002 CREATE TABLE employees ( ... ) PARTITION BY HASH ( expr ) PARTITIONS num ; \u5206\u533a\u952e expr \u662f\u6574\u578b\u7684\u5b57\u6bb5\u6216\u8005\u662f\u8fd4\u56de\u6574\u578b\u7684\u8868\u8fbe\u5f0f\uff0c\u540c\u65f6\u9700\u8981\u6307\u5b9a\u5206\u533a\u6570\u91cf num \u3002 CREATE TABLE employees ( id INT NOT NULL , hired DATE NOT NULL DEFAULT '1970-01-01' , separated DATE NOT NULL DEFAULT '9999-12-31' , ) PARTITION BY HASH ( YEAR ( hired ) ) PARTITIONS 4 ; expr \u5fc5\u987b\u8fd4\u56de\u975e\u5e38\u91cf\u975e\u968f\u673a\u6570\u7684 \u6574\u578b\u503c \u3002\u975e\u5e38\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8868\u8fbe\u5f0f\u8d8a\u63a5\u8fd1\u5b83\u6240\u57fa\u4e8e\u7684\u5217\u7684\u503c\uff0cMySQL\u5c31\u8d8a\u6709\u6548\u5730\u4f7f\u7528\u8868\u8fbe\u5f0f\u8fdb\u884c\u6563\u5217\u5206\u533a\u3002\u901a\u8fc7 \u53d6\u6a21\u8fd0\u7b97 \u8ba1\u7b97\u5b58\u50a8\u7684\u5206\u533a\u53f7\uff1a N = MOD( expr , num )\u3002 \u5e38\u89c4HASH\u5206\u533a\u8ba9\u6bcf\u4e2a\u5206\u533a\u7ba1\u7406\u7684\u6570\u636e\u90fd\u51cf\u5c11\u4e86\uff0c\u63d0\u9ad8\u4e86\u67e5\u8be2\u6548\u7387\uff1b\u4f46\u662f\u5728\u5206\u533a\u7ba1\u7406\u4e0a\u7684\u4ee3\u4ef7\u592a\u5927\uff0c\u6545\u63d0\u4f9b\u4e86\u7ebf\u6027\u5206\u533a LINEAR HASH Partitioning \u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002 LINEAR HASH \u5206\u533a mysql \u00b6 \u7ebf\u6027\u6563\u5217\u5229\u7528\u7ebf\u6027\u4e8c\u6b21\u5e42\u7b97\u6cd5\uff0c\u800c\u5e38\u89c4\u6563\u5217\u4f7f\u7528\u6563\u5217\u51fd\u6570\u503c\u7684\u6a21\u6570\u3002 CREATE TABLE employees ( ... ) PARTITION BY LINEAR HASH ( expr ) PARTITIONS num ; \u5206\u533a\u53f7 N \u901a\u8fc7\u4ee5\u4e0b\u7b97\u6cd5\u8ba1\u7b97\uff1a \u627e\u5230\u4e0b\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e num \u76842\u7684\u5e42 V V = POWER ( 2 , CEILING ( LOG ( 2 , num ))) \u8bbe\u7f6e N = expr & (V - 1) While N >= num : Set V = V / 2 Set N = N & ( V - 1) \u4e3e\u4f8b \uff1a CREATE TABLE t1 ( col1 INT , col2 CHAR ( 5 ), col3 DATE ) PARTITION BY LINEAR HASH ( YEAR ( col3 ) ) PARTITIONS 6 ; V = POWER ( 2 , CEILING ( LOG ( 2 , 6 ) )) = 8 N = YEAR ( '1998-10-19' ) & ( 8 - 1 ) = 1998 & 7 = 6 ( 6 >= 6 is TRUE : additional step required ) N = 6 & (( 8 / 2 ) - 1 ) = 6 & 3 = 2 ( 2 >= 6 is FALSE : record stored in partition # 2 ) \u5f53\u7ebf\u6027\u5206\u533a\u7684\u5206\u533a\u6570\u662f 2\u7684N\u6b21\u5e42 \u65f6\uff0c\u5b83\u4e0e\u5e38\u89c4\u5206\u533a\u7684\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 \u4f18\u7f3a\u70b9\uff1a \u4f18\u70b9\uff1a\u5728\u5206\u533a\u7ba1\u7406\uff08\u589e\u52a0\u3001\u5220\u9664\u3001\u5408\u5e76\u3001\u62c6\u5206\uff09\u65f6\uff0c\u5904\u7406\u66f4\u52a0\u8fc5\u901f \u7f3a\u70b9\uff1a\u76f8\u5bf9\u4e8e\u5e38\u89c4HASH\u5206\u533a\uff0c\u7ebf\u6027\u5206\u533a\u6570\u636e\u5206\u5e03\u4e0d\u592a\u5747\u5300\u3002 KEY \u5206\u533a \u00b6 \u7c7b\u4f3c\u4e8eHASH\u5206\u533a\uff0c\u4f46\u662f\u4f7f\u7528MySQL\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u54c8\u5e0c\u51fd\u6570\u3002NDB Cluster \u4f7f\u7528MD5()\uff1b\u5176\u5b83\u7684\u4f7f\u7528\u57fa\u4e8e\u5bc6\u7801\u52a0\u5bc6\u7b97\u6cd5\u7684\u54c8\u5e0c\u51fd\u6570\u3002 CREATE TABLE employees ( ... ) PARTITION BY KEY ( expr ) PARTITIONS num ; \u5206\u533a\u952e expr \u662f0\u6216\u591a\u4e2a\u5b57\u6bb5\u540d\uff0c\u652f\u6301\u9664BLOB\u6216TEXT\u4e4b\u5916\u7684\u5176\u5b83\u7c7b\u578b\u4f5c\u4e3a\u5206\u533a\u952e\uff08\u67e5\u770b\u4e0a\u6587 \u5206\u533a\u7c7b\u578b \uff09\u3002\u7528\u4f5c\u5206\u533a\u952e\u7684\u4efb\u4f55\u5217\u5fc5\u987b\u5305\u542b\u8868\u7684\u4e3b\u952e\u7684\u90e8\u5206\u6216\u5168\u90e8\uff0c\u5982\u679c\u8868\u6709\u4e00\u4e2a\u3002\u5982\u679c\u6ca1\u6709\u5c06\u5217\u540d\u6307\u5b9a\u4e3a\u5206\u533a\u952e\uff0c\u5219\u4f7f\u7528\u8868\u7684\u4e3b\u952e\uff08\u5982\u679c\u6709\uff09\u3002\u5728\u6ca1\u6709\u4e3b\u952e\u65f6\uff0c\u9009\u62e9 \u552f\u4e00\u975e\u7a7a\u952e *\u4f5c\u4e3a\u5206\u533a\u952e\u3002 \u6ce8\u610f\uff1a\u4e0d\u80fd\u6267\u884c ALTER TABLE DROP PRIMARY KEY \u5220\u9664key\u7c7b\u578b\u7684\u5206\u533a\uff0c\u4f46\u662fNDB Cluster\u53ef\u4ee5\u3002 LINEAR KEY \u5206\u533a mysql \u00b6 \u4e0e\u7ebf\u6027HASH\u5206\u533a\u7c7b\u4f3c\u3002 \u5b50\u5206\u533a \u00b6 \u5b50\u5206\u533a\uff08 Subpartitioning \uff09\u4e5f\u79f0\u4e3a\u590d\u5408\u5206\u533a \u4e8c\u7ea7\u5206\u533a[ob] \uff0c\u662f\u5bf9\u5206\u533a\u8868\u4e2d\u5206\u533a\u7684\u8fdb\u4e00\u6b65\u5212\u5206\u3002 \u521b\u5efa\u8bed\u6cd5\u89c1\u4e0a\u6587\u3002 mysql \u652f\u6301\u5bf9 RANGE\u5206\u533a \u548c LIST\u5206\u533a \u5212\u5206\u7684\u8868\u518d\u5212\u5206\uff0c\u5b50\u5206\u533a\u53c8\u652f\u6301 HASH\u5206\u533a \u7c7b\u578b \u548cKEY\u5206\u533a \u7c7b\u578b\u3002 OceanBase MySQL \u6a21\u5f0f\u652f\u6301 HASH \u3001 RANGE \u3001 LIST \u3001 KEY \u3001 RANGE COLUMNS \u548c LIST COLUMNS \u4efb\u610f\u4e24\u79cd\u5206\u533a\u65b9\u5f0f\u7684\u7ec4\u5408 -- \u7b2c\u4e00\u79cd\u5199\u6cd5 CREATE TABLE ts ( id INT , purchased DATE ) PARTITION BY RANGE ( YEAR ( purchased ) ) SUBPARTITION BY HASH ( TO_DAYS ( purchased ) ) SUBPARTITIONS 2 ( PARTITION p0 VALUES LESS THAN ( 1990 ), PARTITION p1 VALUES LESS THAN ( 2000 ), PARTITION p2 VALUES LESS THAN MAXVALUE ); -- \u7b2c\u4e8c\u79cd\u5199\u6cd5 CREATE TABLE ts ( id INT , purchased DATE ) PARTITION BY RANGE ( YEAR ( purchased ) ) SUBPARTITION BY HASH ( TO_DAYS ( purchased ) ) ( PARTITION p0 VALUES LESS THAN ( 1990 ) ( SUBPARTITION s0 , SUBPARTITION s1 ), PARTITION p1 VALUES LESS THAN ( 2000 ) ( SUBPARTITION s2 , SUBPARTITION s3 ), PARTITION p2 VALUES LESS THAN MAXVALUE ( SUBPARTITION s4 , SUBPARTITION s5 ) ); ts \u8868\u6709\u4e09\u4e2a\u5206\u533a\uff1a p0, p1, p2 \uff0c\u6bcf\u4e2a\u5206\u533a\u518d\u8fdb\u4e00\u6b65\u5212\u5206\u4e3a\u4e24\u4e2a\u5206\u533a\uff0c\u6240\u6709\u5171\u6709 2*3 = 6 \u4e2a\u5206\u533a\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u6bcf\u4e2a\u5206\u533a\u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5b50\u5206\u533a \u4e0d\u5141\u8bb8\u53ea\u5bf9\u4e00\u90e8\u5206\u5206\u533a\u5b9a\u4e49\u5b50\u5206\u533a \u5728\u6574\u4e2a\u8868\u4e2d\u6bcf\u4e2a\u5b50\u5206\u533a\u7684\u540d\u79f0\u5fc5\u987b\u662f\u552f\u4e00\u7684 MySQL\u5206\u533a\u5982\u4f55\u5904\u7406NULL \u00b6 Note NULL \u4e0d\u662f\u4e00\u4e2a\u6570\u5b57\u3002 MySQL\u7684\u5206\u533a\u5b9e\u73b0\u5c06NULL\u89c6\u4e3a \u5c0f\u4e8e\u4efb\u4f55\u975eNULL\u503c \uff0c\u5c31\u50cfORDER BY\u4e00\u6837\u3002 RANGE partitioning \u00b6 \u5982\u679c\u8ba1\u7b97\u8fc7\u540e\u5206\u533a\u952e\u7684\u503c\u4e3aNULL\uff0c\u5c06\u8be5\u8bb0\u5f55\u63d2\u5165\u5230 \u6700\u4f4e\u7684\u5206\u533a \u4e2d\u3002 LIST partitioning \u00b6 \u6709\u4e00\u4e2a\u5206\u533a\u7684\u503c \u5305\u542bNULL \u65f6\uff0c\u7531LIST\u5206\u533a\u7684\u8868\u624d\u5141\u8bb8NULL\u503c\u3002 HASH and KEY partitioning \u00b6 NULL\u503c\u88ab\u89c6\u4e3a \u96f6 \u3002 \u5206\u533a\u88c1\u526a \u00b6 \u67e5\u8be2\u65f6\u5e26\u4e0a \u5206\u533aKEY mysql\u4ec5\u4f1a\u67e5\u8be2\u76f8\u5173\u7684\u5206\u533a\u6570\u636e mysql > create table range_t ( int a NOT NULL , int b NOT NULL ) partition by range ( a ) ( partition p1 values less than ( 100 ), partition p2 values less than maxvalue ); mysql > explain select * from range_t where a < 10 ; + ----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+ | id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra | + ----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+ | 1 | SIMPLE | range_t | p1 | ALL | NULL | NULL | NULL | NULL | 1 | 100 . 00 | Using where | + ----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+ 1 row in set , 1 warning ( 0 . 00 sec ) \u5206\u533a\u7ba1\u7406 \u00b6 \u52a8\u4f5c\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u3001\u91cd\u7ec4\uff08\u5408\u5e76\u3001\u5206\u79bb\uff09\u3002\u4f7f\u7528 ALTER TABLE \u8bed\u53e5\u5e26\u6709\u7684 partition_options \u5b50\u53e5\u6267\u884c\uff0c\u4e0e\u521b\u5efa\u5206\u533a\u7684\u8bed\u6cd5\u76f8\u540c\u3002\u8fd9\u4e9b\u52a8\u4f5c\u4f1a\u6d89\u53ca\u5230\u6570\u636e\u7684\u8fc1\u79fb\u3002 Note \u6240\u6709\u7684\u5206\u533a\u90fd\u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5b50\u5206\u533a\uff0c\u5e76\u4e14\u5b50\u5206\u533a\u4e00\u65e6\u521b\u5efa\u5c31\u4e0d\u53ef\u6539\u53d8\u3002\u540c\u4e00\u6761\u8bed\u53e5\u4e2d\u53ea\u6709\u4e00\u4e2a\u52a8\u4f5c\u53ef\u4ee5\u88ab\u6267\u884c\u3002 RANGE and LIST \u7684\u7ba1\u7406 \u00b6 \u5220\u9664 \u00b6 ALTER TABLE ... DROP PARTITION ... \u5206\u533a\u4e2d\u7684\u6570\u636e\u540c\u65f6\u4e5f\u88ab\u5220\u9664\u3002 NDBCLUSTER \u5b58\u50a8\u5f15\u64ce\u4e0d\u652f\u6301\u8be5\u64cd\u4f5c\u3002 \u6dfb\u52a0 \u00b6 ALTER TABLE ... ADD PARTITION partition_definitions RANGE\u53ea\u80fd\u5728\u5206\u533a\u5c3e\u90e8\u6dfb\u52a0\u65b0\u7684\u5206\u533a\uff0c\u5e76\u4e14\u5176\u8303\u56f4\u6bd4\u5b58\u5728\u7684\u5206\u533a\u90fd\u5927\u3002 ALTER TABLE members ADD PARTITION ( PARTITION p3 VALUES LESS THAN ( 2010 )); ALTER TABLE tt ADD PARTITION ( PARTITION p2 VALUES IN ( 7 , 14 , 21 ), PARTITION p3 VALUES IN ( 1 )); LIST\u5206\u533a\u4e0d\u80fd\u5305\u542b\u91cd\u590d\u7684\u503c \u91cd\u7ec4 \u00b6 ALTER TABLE table_name REORGANIZE PARTITION partition_names INTO ( partition_definitions ) \u6570\u636e\u4f1a\u5b58\u50a8\u5728\u65b0\u7684\u5206\u533a\u4e0a\u3002 \u5206\u79bb\u5206\u533a\uff1a ALTER TABLE members REORGANIZE PARTITION p0 INTO ( PARTITION n0 VALUES LESS THAN ( 1970 ), PARTITION n1 VALUES LESS THAN ( 1980 ) ); \u5408\u5e76\u5206\u533a\uff1a ALTER TABLE members REORGANIZE PARTITION s0 , s1 INTO ( PARTITION p0 VALUES LESS THAN ( 1970 ) ); \u5206\u79bb\u4e0e\u5408\u5e76\u7684\u5173\u7cfb\u4e0d\u5fc5\u662f\u4e00\u5bf9\u591a\u6216\u591a\u5bf9\u4e00\uff0c\u53ef\u4ee5\u662f \u591a\u5bf9\u591a \uff1a ALTER TABLE members REORGANIZE PARTITION p0 , p1 , p2 , p3 INTO ( PARTITION m0 VALUES LESS THAN ( 1980 ), PARTITION m1 VALUES LESS THAN ( 2000 ) ); Warning RANGE\u5206\u533a \u4e0d\u80fd\u8de8\u8303\u56f4\u91cd\u7ec4 \u3002\u4f8b\u5982\uff1a\u4e0d\u80fd\u91cd\u7ec4\u2018p0,p2\u2019\uff0c\u800c\u8df3\u8fc7p1\u3002 \u4e0d\u80fd\u4f7f\u7528\u91cd\u7ec4\u8bed\u53e5\u6539\u53d8\u5206\u533a\u7c7b\u578b\uff0c\u4ee5\u53ca\u6539\u53d8\u5206\u533a\u952e expr \uff1b\u4f7f\u7528 ALTER TABLE ... PARTITION BY ... \u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002 HASH and KEY \u7684\u7ba1\u7406 \u00b6 \u8fd9\u4e24\u4e2a\u5206\u533a\u6ca1\u6709\u5206\u533a\u540d\uff0c\u4e0d\u80fd\u4f7f\u7528\u548c\u5206\u533a\u540d\u76f8\u5173\u7684\u8bed\u53e5\u8fdb\u884c\u7ba1\u7406\u3002 \u5220\u9664 \u00b6 \u4e0d\u53ef\u5220\u9664\u6307\u5b9a\u5206\u533a\uff0c\u4f7f\u7528\u5982\u4e0b\u8bed\u53e5\u5408\u5e76\u5206\u533a\uff1a ALTER TABLE table_name COALESCE PARTITION number number \u662f\u8981\u5408\u5e76\u5230\u5176\u4f59\u5206\u533a\u7684\u5206\u533a\u6570\uff0c\u5373\u5220\u9664\u7684\u5206\u533a\u6570\u3002 MariaDB [ MYISAM_TEST ] > ALTER TABLE hash_par COALESCE PARTITION 2 ; Query OK , 4 rows affected ( 0 . 11 sec ) Records : 4 Duplicates : 0 Warnings : 0 \u6dfb\u52a0 \u00b6 ALTER TABLE table_name ADD PARTITION PARTITIONS number number \u662f\u6dfb\u52a0\u7684\u5206\u533a\u6570\u3002 \u91cd\u7ec4 \u00b6 \u901a\u8fc7\u5220\u9664\u548c\u6dfb\u52a0\u5b9e\u73b0\u3002 \u5b50\u5206\u533a\u4f1a\u81ea\u52a8\u7684\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff1a MariaDB [ MYISAM_TEST ] > ALTER TABLE sub_par_test REORGANIZE PARTITION P0 INTO ( PARTITION P00 VALUES LESS THAN ( 5 ), PARTITION P01 VALUES LESS THAN ( 10 )); Query OK , 2 rows affected ( 0 . 01 sec ) Records : 2 Duplicates : 0 Warnings : 0 \u5206\u533a\u7684\u7ef4\u62a4 \u00b6 \u7ef4\u62a4\u52a8\u4f5c\uff1a CHECK TABLE , OPTIMIZE TABLE , ANALYZE TABLE , and REPAIR TABLE \u3002 \u8bed\u6cd5\uff1a ALTER TABLE table_name action PARTITION { partition_names | ALL } \u91cd\u6784\u5206\u533a \uff1a\u4e22\u5f03\uff08drop\uff09\u5206\u533a\u6240\u6709\u7684\u8bb0\u5f55\uff0c\u7136\u540e\u91cd\u65b0\u63d2\u5165\u6570\u636e\u3002\u5bf9\u4e8e\u788e\u7247\u6574\u7406\u5f88\u6709\u7528\u5904\u3002 ALTER TABLE t1 REBUILD PARTITION p0 , p1 ; \u4f18\u5316\u5206\u533a \uff1a\u82e5\u5220\u9664\u4e86\u4e00\u4e2a\u5206\u533a\u7684\u5927\u91cf\u6570\u636e\uff0c\u6216\u8005\u5728\u53ef\u53d8\u7c7b\u578b\u7684\u5b57\u6bb5\u505a\u51fa\u4e86\u5f88\u591a\u6539\u53d8\uff0c\u53ef\u4f7f\u7528\u6b64\u8bed\u53e5\u6765\u56de\u6536\u672a\u4f7f\u7528\u7684\u7a7a\u95f4\u548c\u4f18\u5316\u5206\u533a\u6570\u636e\u6587\u4ef6\u3002 ALTER TABLE t1 OPTIMIZE PARTITION p0 , p1 ; \u8fd0\u884c OPTIMIZE PARTITION \u4e0e\u8fd0\u884c CHECK PARTITION , ANALYZE PARTITION , and REPAIR PARTITION \u7b49\u4ef7\u3002 \u4e00\u4e9b\u5b58\u50a8\u5f15\u64ce\uff08\u5982InnoDB\uff09\uff0c\u4e0d\u652f\u6301\u5bf9\u5355\u72ec\u7684\u5206\u533a\u4f18\u5316\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6b64\u8bed\u53e5\u5c06\u91cd\u6784\u6574\u4e2a\u8868\u3002\u4eceMySQL 5.5.30\u5f00\u59cb\uff0c\u4f7f\u7528\u6b64\u8bed\u53e5\u5c06\u5bfc\u81f4\u4e00\u4e2abug\uff0c\u4f7f\u7528 ALTER TABLE ... REBUILD PARTITION and ALTER TABLE ... ANALYZE PARTITION \u6765\u907f\u514d\u6574\u4e2a\u95ee\u9898\u3002 \u5206\u6790\u5206\u533a \uff1a\u8bfb\u53d6\u5e76\u5b58\u50a8\u5206\u533a\u7684key\u5206\u5e03\u3002 ALTER TABLE t1 ANALYZE PARTITION p3 ; \u4fee\u590d\u5206\u533a \uff1a\u4fee\u590d\u635f\u574f\u7684\u5206\u533a\u3002 ALTER TABLE t1 REPAIR PARTITION p0 , p1 ; \u68c0\u67e5\u5206\u533a \uff1a\u68c0\u67e5\u5206\u533a\u662f\u5426\u5b58\u5728\u9519\u8bef\u3002 ALTER TABLE trb3 CHECK PARTITION p1 ; \u6b64\u8bed\u53e5\u5c06\u544a\u8bc9\u8868\u4e2d\u7684\u6570\u636e\u6216\u7d22\u5f15\u662f\u5426\u5df2\u635f\u574f\u3002\u53ef\u4ee5\u4f7f\u7528 REPAIR PARTITION \u4fee\u590d\u3002 \u91cd\u5efa\u5206\u533a \uff1a\u5220\u9664\u6307\u5b9a\u5206\u533a\u4ee5\u53ca\u6240\u6709\u6307\u5b9a\u5206\u533a\u7684\u6570\u636e\u5e76\u521b\u5efa\u65b0\u5206\u533a\u3002 ALTER TABLE hash_par TRUNCATE PARTITION ALL ; mysqlcheck and myisamchk \u4e0d\u652f\u6301\u5206\u533a\u8868\u3002 ANALYZE , CHECK , OPTIMIZE , REBUILD , REPAIR , and TRUNCATE \u64cd\u4f5c\u4e0d\u652f\u6301\u5b50\u5206\u533a\u3002 \u5206\u533a\u9650\u5236 \u00b6 \u5212\u5206\u8868\u8fbe\u5f0f\u4e0d\u5141\u8bb8\u7684\u7ed3\u6784\uff1a \u5b58\u50a8\u8fc7\u7a0b\uff0c\u5b58\u50a8\u51fd\u6570\uff0cUDFS\uff0c\u63d2\u4ef6 \u58f0\u660e\u6216\u4f7f\u7528\u53d8\u91cf \u90e8\u5206\u7b97\u672f\u548c\u903b\u8f91\u8fd0\u7b97\u7b26\u4e0d\u5141\u8bb8\u5728\u5212\u5206\u8868\u8fbe\u5f0f\u4e2d\u51fa\u73b0\uff1a \u9664\u6cd5\u8fd0\u7b97\u7b26\uff1a / \u4f4d\u8fd0\u7b97\u7b26\uff1a |, &, ^, <<, >>, ~ MySQL 5.5 \u4e0d\u652f\u6301\u5728\u5206\u533a\u8868\u4e2d\u4f7f\u7528 HANDLER \u8bed\u53e5 \u521b\u5efa\u5206\u533a\u8868\u4e4b\u540e\u4e0d\u8981\u6539\u53d8\u6a21\u5f0f MySQL mode \u6700\u5927\u5206\u533a\u6570\u3002\u4e00\u5f20\u8868\u6700\u591a\u67091024\uff08\u5305\u62ec\u5b50\u5206\u533a\uff09\u4e2a\u5206\u533a\uff0cNDB\u5b58\u50a8\u5f15\u64ce\u4e0d\u53d7\u6b64\u9650\u5236\u3002 \u4e0d\u652f\u6301\u67e5\u8be2\u7f13\u5b58\u3002 \u6bcf\u4e2a\u5206\u533a\u7684 key caches \u3002\u5728MySQL 5.5\u4e2d\uff0cCACHE INDEX\u548cLOAD INDEX INTO CACHE\u8bed\u53e5\u652f\u6301MyISAM\u5206\u533a\u8868\u7684key caches\u3002 InnoDB\u5206\u533a\u8868\u4e0d\u652f\u6301\u5916\u952e -- InnoDB: Foreign keys are not yet supported in conjunction with partitioning CREATE TABLE Persons ( PersonID INT PRIMARY KEY ) CREATE TABLE Orders ( OrderID int NOT NULL , OrderNumber int NOT NULL , PersonID int , PRIMARY KEY ( OrderID ), FOREIGN KEY ( PersonID ) REFERENCES Persons ( PersonID ) ) PARTITION BY HASH ( OrderID ) PARTITIONS 4 ; ALTER TABLE ... ORDER BY\u3002\u5bfc\u81f4\u4ec5\u5728\u6bcf\u4e2a\u5206\u533a\u5185\u5bf9\u8bb0\u5f55\u6392\u5e8f\u3002 \u901a\u8fc7\u4fee\u6539\u4e3b\u952e\u5bf9REPLACE\u8bed\u53e5\u7684\u5f71\u54cd\u3002see Section 19.5.1, \u201cPartitioning Keys, Primary Keys, and Unique Keys\u201d and REPLACE \u5b8c\u6574TEXT\u7d22\u5f15\u3002\u4e0d\u652f\u6301 FULLTEXT \u7d22\u5f15\u6216\u641c\u7d22\u3002 \u7a7a\u95f4\u7c7b\u578b\u7684\u5217\u3002\u5177\u6709\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\uff08\u5982POINT\u6216GEOMETRY\uff09\u7684\u5217\u4e0d\u80fd\u5728\u5206\u533a\u8868\u4e2d\u4f7f\u7528\u3002 \u4e34\u65f6\u8868\u3001log\u8868\u4e0d\u80fd\u5206\u533a\u3002 \u5206\u533a\u952e\u7684\u7c7b\u578b\u3002\u5206\u533a\u952e\u5fc5\u987b\u662f\u6574\u6570\u5217\u6216\u89e3\u6790\u4e3a\u6574\u6570\u7684\u8868\u8fbe\u5f0f\u3002\u53ef\u4ee5\u63a5\u53d7NULL\u503c\u3002\u4e0d\u80fd\u662f\u5b50\u67e5\u8be2\u3002 \u5b50\u5206\u533a\u3002\u53ea\u6709 RANGE \u548c LIST \u8868\u652f\u6301\u5b50\u5206\u533a\uff0c\u5e76\u4e14\u5b50\u5206\u533a\u7684\u7c7b\u578b\u5fc5\u987b\u662f HASH \u6216 KEY \u5206\u533a mysql\u9650\u5236 SUBPARTITION BY KEY \u8981\u6c42\u5fc5\u987b\u6307\u660e\u5206\u533a\u7684\u5b57\u6bb5\u6216\u5b57\u6bb5\u5217\u8868\u3002 \u4e0d\u652f\u6301 DELAYED \u9009\u9879\u3002\u4e0d\u652f\u6301 INSERT DELAYED \u3002 \u6027\u80fd\u65b9\u9762 (1) \u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c (2) \u8868\u9501:\u5206\u533a\u64cd\u4f5c\u4f1a\u5728\u8868\u4e0a\u83b7\u53d6\u5199\u9501\u3002\u8bfb\u53d6\u8868\u7684\u64cd\u4f5c\u51e0\u4e4e\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff1b\u4e00\u65e6\u5206\u533a\u64cd\u4f5c\u5b8c\u6210\uff0c\u5c31\u6267\u884c\u6302\u8d77\u7684INSERT\u548cUPDATE\u64cd\u4f5c (3) LOAD DATA (4) \u5b58\u50a8\u5f15\u64ce blah blah \u5206\u533a\u952e\uff0c\u4e3b\u952e\uff0c\u552f\u4e00\u952e \u00b6 \u4e09\u8005\u7684\u5173\u7cfb\uff1a\u5206\u533a\u8868\u7684\u5206\u533a\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u5217\u5fc5\u987b\u662f\u8868\u53ef\u80fd\u5177\u6709\u7684\u6bcf\u4e2a\u552f\u4e00\u952e\u7684\u4e00\u90e8\u5206\uff08\u4e3b\u952e\u88ab\u5b9a\u4e49\u4e3a\u552f\u4e00\u952e\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff1a**\u8868\u4e0a\u7684\u6bcf\u4e2a\u552f\u4e00\u952e mysql \u5fc5\u987b\u4f7f\u7528\u8868\u7684\u5206\u533a\u8868\u8fbe\u5f0f\u4e2d\u7684\u6bcf\u4e00\u5217\u3002 Note OB\u4e2d\u8868\u662f\u7d22\u5f15\u7ec4\u7ec7\u8868\uff08IOT\uff09\uff0c\u5bf9\u4e8e\u5206\u533a\u8868\u800c\u8a00\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6307\u5b9a\u4e3b\u952e\u7684\u67e5\u8be2\u80fd\u5f88\u5feb\u5b9a\u4f4d\u5230\u8868\u6240\u5728\u7684\u5206\u533a\uff0c\u5206\u533a\u952e\u5fc5\u987b\u662f \u4e3b\u952e \u7684\u5b50\u96c6. \u4f8b\u5982\u4e0b\u9762\u8fd9\u4e9b\u662f\u5408\u6cd5\u7684\uff1a CREATE TABLE t1 ( col1 INT NOT NULL , col2 DATE NOT NULL , col3 INT NOT NULL , col4 INT NOT NULL , UNIQUE KEY ( col1 , col2 , col3 ) ) PARTITION BY HASH ( col3 ) PARTITIONS 4 ; CREATE TABLE t2 ( col1 INT NOT NULL , col2 DATE NOT NULL , col3 INT NOT NULL , col4 INT NOT NULL , UNIQUE KEY ( col1 , col3 ) ) PARTITION BY HASH ( col1 + col3 ) PARTITIONS 4 ; \u4e0e\u5b58\u50a8\u5f15\u64ce\u76f8\u5173\u7684\u5206\u533a\u9650\u5236 \u00b6 MERGE \uff1a\u8868\u4e0d\u80fd\u5206\u533a\u3002\u5206\u533a\u8868\u4e5f\u4e0d\u80fd\u5408\u5e76\u3002 FEDERATED \uff1a\u8868\u4e0d\u80fd\u5206\u533a\u3002 CSV \uff1a\u8868\u4e0d\u80fd\u5206\u533a\u3002 InnoDB \uff1a\u8868\u4e2d\u4e0d\u80fd\u542b\u6709\u5916\u952e\uff0c\u4e5f\u4e0d\u80fd\u6709\u88ab\u5f15\u7528\u4e3a\u5916\u952e\u7684\u5b57\u6bb5\u3002\u5bf9\u4e8e\u5b50\u5206\u533a\u4e5f\u4e0d\u652f\u6301\u591a\u5757\u78c1\u76d8\u5b58\u50a8\u3002\u5b9e\u64cd\u53d1\u73b0MyISAM\u4e5f\u4e0d\u652f\u6301\u4e86\u3002\u4f18\u5316\u76f8\u5173\u53c2\u8003 \u524d\u6587 \u5206\u533a\u7ef4\u62a4\u7ae0\u8282\u3002 \u7528\u6237\u5b9a\u4e49\u7684\u5206\u533a\u548cNDB\u5b58\u50a8\u5f15\u64ce\uff08NDB\u96c6\u7fa4\uff09 \uff1aNDB\u53ea\u652f\u6301 [LINEAR] KEY \u5206\u533a\u7c7b\u578b\u3002 \u4e00\u5f20\u8868\u7684\u6700\u5927\u7684\u5206\u533a\u6570\u53d6\u51b3\u4e8e\u5728\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u6570\u636e\u8282\u70b9\u4e0e\u8282\u70b9\u7ec4\u7684\u6570\u91cf\u3001NDB\u96c6\u7fa4\u7684\u7248\u672c\u3001\u5176\u5b83\u5b9e\u9645\u60c5\u51b5\uff0c See NDB and user-defined partitioning \u3002 NDB\u8868\u4e2d\u6bcf\u4e2a\u5206\u533a\u53ef\u4ee5\u5b58\u50a8\u7684\u6700\u5927\u56fa\u5b9a\u5927\u5c0f\u6570\u636e\u91cf\u4e3a16 GB\u3002 \u5206\u533a\u8868\u5fc5\u987b\u5177\u6709\u663e\u5f0f\u4e3b\u952e\u3002 \u5347\u7ea7\u5206\u533a\u8868\uff1a\u6267\u884c\u5347\u7ea7\u65f6\uff0c\u5fc5\u987b\u8f6c\u50a8\u5e76\u91cd\u65b0\u52a0\u8f7d\u7531 KEY \u5206\u533a\u5e76\u4f7f\u7528\u9664NDB\u4e4b\u5916\u7684\u4efb\u4f55\u5b58\u50a8\u5f15\u64ce\u7684\u8868\u3002 \u6240\u6709\u7684\u5206\u533a\u5fc5\u987b\u4f7f\u7528\u540c\u4e00\u4e2a\u5b58\u50a8\u5f15\u64ce\uff1a\u5206\u533a\u8868\u7684\u6240\u6709\u5206\u533a\u5fc5\u987b\u4f7f\u7528\u76f8\u540c\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u5e76\u4e14\u5b83\u5fc5\u987b\u4e0e\u6574\u4e2a\u8868\u4f7f\u7528\u7684\u5b58\u50a8\u5f15\u64ce\u76f8\u540c\u3002\u53e6\u5916\uff0c\u5982\u679c\u5728\u521b\u5efa\u6216\u4fee\u6539\u8868\u7684\u65f6\u5019\u5728\u8868\u7684\u7ea7\u522b\u6ca1\u6709\u6307\u5b9a\u5b58\u50a8\u5f15\u64ce\uff0c\u8981\u4e48\u4e0d\u6307\u5b9a\u4efb\u4f55\u4e00\u4e2a[\u5b50]\u5206\u533a\u7684\u5f15\u64ce\uff0c\u8981\u4e48\u5168\u90e8\u6307\u5b9a\u3002 \u4e0e\u51fd\u6570\u76f8\u5173\u7684\u5206\u533a\u9650\u5236 \u00b6 \u53c2\u8003 \u5206\u533a\u952e\u5141\u8bb8\u4f7f\u7528\u7684Functions \u5206\u533a\u548c\u8868\u7ea7\u9501\u5b9a \u00b6 \u5bf9\u4e8e\u5728\u6267\u884cDML\u6216DDL\u8bed\u53e5\u65f6\u5b9e\u9645\u6267\u884c\u8868\u7ea7\u9501\u7684MyISAM\u7b49\u5b58\u50a8\u5f15\u64ce\uff0c\u5f71\u54cd\u5206\u533a\u8868\u7684\u8fd9\u79cd\u8bed\u53e5\u4f1a\u5bf9\u8868\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u8fdb\u884c\u9501\u5b9a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u5206\u533a\u90fd\u4f1a\u88ab\u9501\u5b9a\uff0c\u76f4\u5230\u8bed\u53e5\u7ed3\u675f\u3002\u4f8b\u5982\uff0c\u6765\u81eaMyISAM\u7684\u5206\u533a\u8868\u7684SELECT\u4f1a\u5bfc\u81f4\u6574\u4e2a\u8868\u7684\u9501\u5b9a\u3002 \u8fd9\u4f1a\u5bfc\u81f4\u968f\u7740\u5206\u533a\u6570\u91cf\u7684\u589e\u52a0\u4e0b\u9762\u8ba8\u8bba\u7684\u8bed\u53e5\u7684\u6267\u884c\u901f\u5ea6\u56de\u8d8a\u6765\u8d8a\u6162\u3002\u4f46\u662f\u5728MySQL 5.6.6 \u7248\u672c\u5f15\u5165\u4e86\u5206\u533a\u9501\u5b9a\u4fee\u526a\uff08 partition lock pruning \uff09\u5927\u5927\u51cf\u5c11\u4e86\u8fd9\u79cd\u5f71\u54cd\u3002 \u5bf9\u4e8e\u4f7f\u7528\u884c\u7ea7\u9501\u5b9a\u5e76\u4e14\u5728\u5206\u533a\u4fee\u526a\u4e4b\u524d\u4e0d\u4f1a\u5b9e\u9645\u6267\u884c\uff08\u6216\u9700\u8981\u6267\u884c\uff09\u9501\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\uff08\u5982InnoDB\uff09\uff0c\u60c5\u51b5\u4e0d\u4f1a\u5982\u6b64\u3002 \u4e0b\u9762\u8ba8\u8bba\u5728\u91c7\u7528\u8868\u7ea7\u9501\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\u7684\u5206\u533a\u8868\u4e0a\u4f7f\u7528MySQL\u8bed\u53e5\u7684\u5f71\u54cd\u3002 DML \u8bed\u53e5 \u00b6 SELECT \u9501\u5b9a\u6574\u4e2a\u8868\u3002\u5305\u62ec UNION \u548c JOIN \u8bed\u53e5\u5305\u542b\u7684\u8868\u3002 UPDATE \u9501\u5b9a\u6574\u4e2a\u8868\u3002 REPLACE \u9501\u5b9a\u6574\u4e2a\u8868\u3002 INSERT\uff08\u5305\u62ec INSERT ... ON DUPLICATE KEY UPDATE \uff09 \u9501\u5b9a\u6574\u4e2a\u8868\u3002 INSERT ... SELECT \u9501\u5b9a\u6e90\u4e0e\u76ee\u6807\u8868\u3002 LOAD DATA \u9501\u5b9a\u6574\u4e2a\u8868\u3002 \u89e6\u53d1\u5668\u6fc0\u6d3b\u65f6\u9501\u5b9a\u6574\u4e2a\u8868\u3002 DDL \u8bed\u53e5 \u00b6 CREATE VIEW \u9501\u5b9a\u5b83\u8bfb\u5230\u7684\u6240\u6709\u5206\u533a\u8868\u3002 ALTER TABLE \u9501\u5b9a\u5f71\u54cd\u5230\u7684\u5206\u533a\u8868\u3002 \u5176\u5b83\u8bed\u53e5 \u00b6 LOCK TABLES \u9501\u5b9a\u5206\u533a\u8868\u7684\u6240\u6709\u5206\u533a\u3002 CALL stored_procedure( expr ) \u8c03\u7528\u65f6\u9501\u5b9a\u5728 expr \u4e2d\u6d89\u53ca\u5230\u7684\u6240\u6709\u5206\u533a\u8868\u7684\u6240\u6709\u5206\u533a\u3002 ALTER TABLE \u8fd8\u5c06\u5728\u8868\u7ea7\u83b7\u53d6\u5143\u6570\u636e\u9501\u3002","title":"03 MySql\u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_1","text":"\u5206\u533a\u5c06\u4e00\u5f20\u8868\u5206\u4e3a\u51e0\u4e2a\u5206\u533a\u8fdb\u884c\u5b58\u50a8 [\u7269\u7406\u5206\u533a] \uff0c\u672c\u8d28\u4e0a\u8fd8\u662f\u4e00\u5f20\u8868\u3002\u5206\u533a\u952e\u7528\u4e8e\u6839\u636e\u67d0\u4e2a\u533a\u95f4\u503c [RANGE] \u3001\u7279\u5b9a\u503c\u5217\u8868 [LIST] \u6216hash\u51fd\u6570\u503c [HASH] \u6267\u884c\u6570\u636e\u7684\u805a\u96c6\uff0c\u8ba9\u6570\u636e\u66f4\u5177\u5206\u5e03\u89c4\u5219\u5206\u5e03\u5728\u4e0d\u540c\u7684\u5206\u533a\u4e2d\uff0c\u8ba9\u4e00\u4e2a\u5927\u5bf9\u8c61\u53d8\u6210\u4e00\u4e9b\u5c0f\u5bf9\u8c61\u3002 \u5206\u533a\u7684\u4f18\u70b9\uff1a \u53ef\u4ee5\u5728\u4e00\u4e2a\u8868\u4e2d\u5b58\u50a8\u6bd4\u5728\u5355\u4e2a\u78c1\u76d8\u6216\u6587\u4ef6\u7cfb\u7edf\u5206\u533a\u4e0a\u80fd\u4fdd\u5b58\u7684\u66f4\u591a\u7684\u6570\u636e \u53ef\u4ee5\u8f7b\u677e\u7684\u79fb\u9664\u6216\u6dfb\u52a0\u5206\u533a\u8fbe\u5230\u5220\u9664\u6570\u636e\u6216\u65b0\u589e\u5b58\u50a8\u6570\u636e\u7684\u7a7a\u95f4 \u4e00\u4e9b\u67e5\u8be2\u53ef\u4ee5\u5f97\u5230\u5f88\u597d\u7684\u4f18\u5316 \u4e3e\u4f8b: \u6307\u5b9a\u5206\u533a\u67e5\u8be2 \u8de8\u591a\u4e2a\u78c1\u76d8\u5206\u6563\u6570\u636e\u67e5\u8be2\uff0c\u83b7\u5f97\u66f4\u5927\u7684\u541e\u5410\u91cf","title":"\u6982\u5ff5"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_2","text":"CREATE [ TEMPORARY ] TABLE [ IF NOT EXISTS ] tbl_name ( create_definition ,...) [ table_options ] [ partition_options ] partition_options : PARTITION BY { [ LINEAR ] HASH ( expr ) | [ LINEAR ] KEY ( column_list ) | RANGE { ( expr ) | COLUMNS ( column_list ) } | LIST { ( expr ) | COLUMNS ( column_list ) } } [ PARTITIONS num ] [ SUBPARTITION BY { [ LINEAR ] HASH ( expr ) | [ LINEAR ] KEY ( column_list ) } [ SUBPARTITIONS num ] ] [( partition_definition [, partition_definition ] ...)] partition_definition : PARTITION partition_name [ VALUES { LESS THAN { ( expr | value_list ) | MAXVALUE } | IN ( value_list ) } ] [[ STORAGE ] ENGINE [ = ] engine_name ] [ COMMENT [ = ] 'comment_text' ] [ DATA DIRECTORY [ = ] 'data_dir' ] [ INDEX DIRECTORY [ = ] 'index_dir' ] [ MAX_ROWS [ = ] max_number_of_rows ] [ MIN_ROWS [ = ] min_number_of_rows ] [ TABLESPACE [ = ] tablespace_name ] [ NODEGROUP [ = ] node_group_id ] [( subpartition_definition [, subpartition_definition ] ...)] subpartition_definition : SUBPARTITION logical_name [[ STORAGE ] ENGINE [ = ] engine_name ] [ COMMENT [ = ] 'comment_text' ] [ DATA DIRECTORY [ = ] 'data_dir' ] [ INDEX DIRECTORY [ = ] 'index_dir' ] [ MAX_ROWS [ = ] max_number_of_rows ] [ MIN_ROWS [ = ] min_number_of_rows ] [ TABLESPACE [ = ] tablespace_name ] [ NODEGROUP [ = ] node_group_id ] Note \u5206\u533a\u9009\u9879\u4e00\u5b9a\u8981\u653e\u5728\u6700\u540e \u6307\u5b9a\u8868\u7684\u5206\u533a\u6570 PARTITIONS num \u65f6\uff0c\u5fc5\u987b\u5c06\u5176\u8868\u793a\u4e3a\u4e0d\u5e26\u524d\u5bfc\u96f6\u7684\u975e\u96f6\u6b63\u6574\u6570 \u5206\u533a\u8868\u4e0a\u6ca1\u6709\u4e3b\u952e/\u552f\u4e00\u952e \u6216\u8005 \u6bcf\u4e2a [mysql] \u552f\u4e00\u952e | [OB] \u4e3b\u952e \u90fd\u5fc5\u987b\u5305\u542b\u6240\u6709\u5206\u533a\u952e \u5206\u533a\u7684\u540d\u5b57\u4e0d\u533a\u5206\u5927\u5c0f\u5199","title":"\u5206\u533a\u8868\u7684\u521b\u5efa"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_3","text":"\u4f7f\u7528 SHOW CREATE TABLE \u67e5\u770b\u5206\u533a\u8868\u7684\u5206\u533a\u5b50\u53e5\u3002 \u4f7f\u7528 SHOW TABLE STATUS \u786e\u8ba4\u662f\u5426\u662f\u5206\u533a\u8868\u3002 \u67e5\u8be2 INFORMATION_SCHEMA.PARTITIONS \u8868\uff1a SELECT * FROM INFORMATION_SCHEMA . PARTITIONS WHERE TABLE_NAME = 'table_name' ; \u4f7f\u7528 EXPLAIN select_statement \u67e5\u770b\u4f7f\u7528\u4e86\u54ea\u4e9b\u5206\u533a","title":"\u67e5\u770b\u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_4","text":"\u548c\u5220\u9664\u8868\u4e00\u6837\uff0c\u4f7f\u7528 TRUNCATE / DROP \u6e05\u7a7a\u5206\u533a\uff08\u6bd4 DELETE \u8981\u5feb\uff09 -- DROP PARTITION can only be used on RANGE/LIST partitions ALTER TABLE table_name TRUNCATE / DROP PARTITION partition_name ;","title":"\u5220\u9664\u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_5","text":"\u901a\u8fc7 KEY RANGE COLUMNS LIST COLUMNS \u5206\u533a\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 DATE TIME DATETIME \u7c7b\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u5b57\u6bb5\u3002 \u5176\u5b83\u7684\u5206\u533a\u7c7b\u578b\u5728\u8981\u6c42\u4e00\u4e2a\u8fd4\u56de\u6574\u578b\u6570\u503c\u6216NULL\u7684\u5206\u533a\u8868\u8fbe\u5f0f","title":"\u5206\u533a\u7c7b\u578b"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#range","text":"\u6309\u8303\u56f4\u5206\u533a\u7684\u8868\u7684\u5206\u533a\u65b9\u5f0f\u662f\uff1a\u6bcf\u4e2a\u5206\u533a\u5305\u542b\u5206\u533a\u8868\u8fbe\u5f0f\u503c\u4f4d\u4e8e\u7ed9\u5b9a\u8303\u56f4\u5185\u7684\u884c\u3002 \u8303\u56f4\u5e94\u8be5\u662f \u8fde\u7eed\u4f46\u4e0d\u91cd\u53e0\u7684 \uff0c\u5e76\u4e14\u4f7f\u7528 VALUES LESS THAN \u8fd0\u7b97\u7b26\u5b9a\u4e49\u3002 NULL\u4f1a\u88ab\u5f53\u4f5c\u6700\u5c0f\u503c\u6765\u5904\u7406 \u652f\u6301\u4f7f\u7528 DATE,DATETIME \u7c7b\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e \u652f\u6301\u4f7f\u7528 UNIX_TIMESTAMP,YEAR \u7b49\u51fd\u6570\u8fdb\u884c\u5206\u533a -- \u4f7f\u7528\u6574\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e CREATE TABLE ` range_test ` ( ` ID ` int ( 11 ) DEFAULT NULL ) PARTITION BY RANGE ( ID ) ( PARTITION P0 VALUES LESS THAN ( 5 ) ENGINE = InnoDB , PARTITION P1 VALUES LESS THAN ( 10 ) ENGINE = InnoDB ) -- \u4f7f\u7528DATE\u7c7b\u578b\u7684\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e CREATE TABLE members ( username VARCHAR ( 16 ) NOT NULL , email VARCHAR ( 35 ), joined DATE NOT NULL ) PARTITION BY RANGE COLUMNS ( joined ) ( PARTITION p0 VALUES LESS THAN ( '1960-01-01' ), PARTITION p1 VALUES LESS THAN MAXVALUE ); -- \u4f7f\u7528UNIX_TIMESTAMP\u51fd\u6570\u8fdb\u884c\u5206\u533a CREATE TABLE quarterly_report_status ( report_id INT NOT NULL , report_updated TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ) PARTITION BY RANGE ( UNIX_TIMESTAMP ( report_updated ) ) ( PARTITION p0 VALUES LESS THAN ( UNIX_TIMESTAMP ( '2008-01-01 00:00:00' ) ), PARTITION p1 VALUES LESS THAN ( MAXVALUE ) ); -- \u4f7f\u7528YEAR\u7b49\u51fd\u6570\u8fdb\u884c\u5206\u533a CREATE TABLE employees ( id INT NOT NULL , separated DATE NOT NULL DEFAULT '9999-12-31' , store_id INT ) PARTITION BY RANGE ( YEAR ( separated ) ) ( PARTITION p0 VALUES LESS THAN ( 1991 ), PARTITION p1 VALUES LESS THAN MAXVALUE ); RANGE \u5206\u533a\u7c7b\u578b\u7279\u522b\u9002\u5408\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\uff1a \u9700\u8981\u5220\u9664\u65e7\u6570\u636e\u65f6\u3002\u53ef\u4ee5\u5f88\u8f7b\u677e\u5730\u901a\u8fc7\u5220\u9664\u5206\u533a\u6765\u5220\u9664\u65e7\u6570\u636e ALTER TABLE employees DROP PARTITION p0; \u4f7f\u7528\u5305\u542b\u65e5\u671f\u6216\u65f6\u95f4\u503c\u7684\u5217\uff0c\u6216\u5305\u542b\u6765\u81ea\u5176\u4ed6\u4e00\u4e9b\u7cfb\u5217\u7684\u503c \u7ecf\u5e38\u8fd0\u884c\u5305\u542b\u5206\u533a\u952e\u7684\u67e5\u8be2","title":"RANGE \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#list","text":"\u5efa\u7acb\u79bb\u6563\u7684\u503c\u5217\u8868\u544a\u8bc9\u6570\u636e\u5e93\u7279\u5b9a\u7684\u503c\u5c5e\u4e8e\u54ea\u4e2a\u5206\u533a\u3002 \u4ece\u5c5e\u4e8e\u4e00\u4e2a \u679a\u4e3e\u5217\u8868 \u7684\u503c\u7684\u96c6\u5408\uff0c RANGE\u5206\u533a \u662f\u4ece\u5c5e\u4e8e\u4e00\u4e2a\u8fde\u7eed\u533a\u95f4\u503c\u7684\u96c6\u5408\u3002 \u6ca1\u6709\u7c7b\u4f3c\u4e8e MAXVALUE \u7684\u503c\u6765\u5339\u914d\u6240\u6709\u7684\u60c5\u51b5\uff1b \u6240\u6709\u88ab\u671f\u671b\u7684\u503c \u90fd\u5e94\u8be5\u88ab\u5305\u542b\u8fdb PARTITION ... VALUES IN (...) \u5b50\u53e5\u3002 \u4f7f\u7528\u5355\u4e2aINSERT\u8bed\u53e5\u63d2\u5165\u591a\u884c\u65f6\uff0c\u884c\u4e3a\u53d6\u51b3\u4e8e\u8868\u662f\u5426\u4f7f\u7528\u4e8b\u52a1\u5b58\u50a8\u5f15\u64ce\uff1a \u5bf9\u4e8e\u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u6574\u4e2a\u63d2\u5165\u8bed\u53e5\u4f1a\u88ab\u5f53\u505a\u4e00\u4e2a\u5355\u4e00\u7684\u4e8b\u52a1\u3002 \u5bf9\u4e8e\u4e0d\u652f\u6301\u4e8b\u52a1\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u5728\u5305\u542b\u672a\u5339\u914d\u503c\u7684\u4e4b\u524d\u7684\u8bb0\u5f55\u4f1a\u88ab\u63d2\u5165\uff0c\u81ea\u5df1\u53ca\u5176\u4e4b\u540e\u7684\u4e0d\u4f1a\u3002 \u53ef\u4ee5\u4f7f\u7528 IGNORE \u5173\u952e\u5b57\u5ffd\u7565\u6b64\u7c7b\u9519\u8bef\uff0c\u5982\u6b64\u4e00\u6765\uff0c\u5305\u542b\u672a\u5339\u914d\u7684\u503c\u7684\u8bb0\u5f55\u4e0d\u4f1a\u63d2\u5165\uff0c\u5176\u4f59\u7684\u90fd\u4f1a\u88ab\u63d2\u5165\u5230\u6570\u636e\u5e93\u5e76\u4e14\u4e0d\u4f1a\u53d1\u51fa\u9519\u8bef\u3002 MariaDB [ MYISAM_TEST ] > CREATE TABLE IF NOT EXISTS list_test ( ID INT ) MAX_ROWS = 8 PARTITION BY LIST ( ID ) ( PARTITION P0 VALUES IN ( 1 , 2 , 3 , 4 , 5 ), PARTITION P1 VALUES IN ( 6 , 7 , 8 ) ); MariaDB [ MYISAM_TEST ] > INSERT INTO list_test VALUES ( 1 ),( 3 ),( 9 ); ERROR 1526 ( HY000 ): Table has no partition for value 9 MariaDB [ MYISAM_TEST ] > INSERT IGNORE INTO list_test VALUES ( 1 ),( 3 ),( 9 ); Query OK , 2 rows affected , 1 warning ( 0 . 00 sec ) Records : 3 Duplicates : 1 Warnings : 1 MariaDB [ MYISAM_TEST ] > SELECT * FROM list_test ; + ------+ | ID | + ------+ | 1 | | 3 | + ------+","title":"LIST \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#columns","text":"\u5217\u5206\u533a\u662f RANGE \u548c LIST \u5206\u533a\u7684\u53d8\u79cd\u3002COLUMNS\u5206\u533a\u5141\u8bb8\u5728\u5206\u533a\u952e\u4e2d \u4f7f\u7528\u591a\u4e2a\u5217 \u3002 RANGE COLUMNS \u5206\u533a\u548c LIST COLUMNS \u5206\u533a\u90fd\u652f\u6301\u975e\u6574\u578b\uff08non-integer\uff09\u5b57\u6bb5\u4f5c\u4e3a\u503c\u7684\u8303\u56f4\u6216\u5217\u7684\u6210\u5458\uff0c\u4ee5\u4e0b\u662f\u8fd0\u884c\u7684\u6570\u636e\u7c7b\u578b\uff1a \u6240\u6709\u7684\u6574\u6570\u7c7b\u578b\uff1a TINYINT, SMALLINT, MEDIUMINT, INT (INTEGER), BIGINT \u90e8\u5206\u65f6\u95f4\u7c7b\u578b\uff1a DATE \u548c DATETIME \u90e8\u5206\u5b57\u7b26\u4e32\u7c7b\u578b\uff1a CHAR, VARCHAR, BINARY, VARBINARY","title":"COLUMNS \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#range-columns","text":"\u8fd9\u79cd\u5206\u533a\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528\u6574\u6570\u7c7b\u578b\u4ee5\u5916\u7684\u7c7b\u578b\u5217\u6765\u5b9a\u4e49\u8303\u56f4\u3002 \u76f8\u6bd4\u4e8e RANGE \u5206\u533a\uff0c RANGE COLUMNS \u5206\u533a: \u53ea\u63a5\u53d7\u4e00\u4e2a\u6216\u591a\u4e2a\u5b57\u6bb5\u7ec4\u5408\u7684\u5217\u8868\u3002 \u5212\u5206 \u57fa\u4e8e\u5143\u7ec4 \u4e4b\u95f4\u7684\u6bd4\u8f83 \u4e0d\u53d7\u9650\u4e8e\u6574\u6570\u7c7b\u578b \u5176\u5b83\u7c7b\u578b\u4e5f\u53ef\u4ee5\u7528\u4f5c\u5206\u533a\u5b57\u6bb5\u3002 CREATE TABLE table_name PARTITIONED BY RANGE COLUMNS ( column_list ) ( PARTITION partition_name VALUES LESS THAN ( value_list )[, PARTITION partition_name VALUES LESS THAN ( value_list )][, ...] ); column_list : column_name [, column_name ][, ...] value_list : value [, value ][, ...] \u4e3e\u4f8b : mysql > CREATE TABLE rcx ( -> a INT , -> b INT , -> c CHAR ( 3 ) -> d INT , -> ) -> PARTITION BY RANGE COLUMNS ( a , d , c ) ( -> PARTITION p0 VALUES LESS THAN ( 5 , 10 , 'ggg' ), -> PARTITION p1 VALUES LESS THAN ( 10 , 20 , 'mmm' ), -> PARTITION p2 VALUES LESS THAN ( 15 , 30 , 'sss' ), -> PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE , MAXVALUE ) -> ); Query OK , 0 rows affected ( 0 . 15 sec ) \u5206\u533a\u7684\u5b9a\u4e49\u5fc5\u987b\u9075\u4ece\u9012\u589e\u7684\u987a\u5e8f\uff0c\u5426\u5219\u4f1a\u62a5\u9519\uff1a -- \u6b63\u786e CREATE TABLE rc4 ( a INT , b INT , c INT ) PARTITION BY RANGE COLUMNS ( a , b , c ) ( PARTITION p0 VALUES LESS THAN ( 0 , 25 , 50 ), PARTITION p1 VALUES LESS THAN ( 10 , 20 , 100 ), PARTITION p2 VALUES LESS THAN ( 10 , 30 , 50 ) PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE , MAXVALUE ) ); -- \u9519\u8bef mysql > CREATE TABLE rcf ( -> a INT , -> b INT , -> c INT -> ) -> PARTITION BY RANGE COLUMNS ( a , b , c ) ( -> PARTITION p0 VALUES LESS THAN ( 0 , 25 , 50 ), -> PARTITION p1 VALUES LESS THAN ( 20 , 20 , 100 ), -> PARTITION p2 VALUES LESS THAN ( 10 , 30 , 50 ), -> PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE , MAXVALUE ) -> ); ERROR 1493 ( HY000 ): VALUES LESS THAN value must be strictly increasing for each partition \u4e3e\u4f8b : -- \u521b\u5efa\u5206\u533a\u8868 MariaDB [ MYISAM_TEST ] > CREATE TABLE rc1 ( -> a INT , -> b INT -> ) -> PARTITION BY RANGE COLUMNS ( a , b ) ( -> PARTITION p0 VALUES LESS THAN ( 5 , 12 ), -> PARTITION p3 VALUES LESS THAN ( MAXVALUE , MAXVALUE ) -> ); -- \u63d2\u5165\u6570\u636e MariaDB [ MYISAM_TEST ] > INSERT INTO rc1 VALUES ( 5 , 2 ), ( 5 , 10 ), ( 5 , 12 ); -- \u67e5\u770b\u6570\u636e\u5206\u5e03 MariaDB [ MYISAM_TEST ] > SELECT PARTITION_NAME , TABLE_ROWS FROM INFORMATION_SCHEMA . PARTITIONS WHERE TABLE_NAME = 'rc1' ; + ----------------+------------+ | PARTITION_NAME | TABLE_ROWS | + ----------------+------------+ | p0 | 2 | | p3 | 1 | + ----------------+------------+ \u591a\u884c\u5206\u533a\u5bf9\u4e8e\u5206\u533a\u952e\u7684\u6bd4\u8f83\u662f\u5bf9\u5143\u7ec4\u8fdb\u884c\u6bd4\u8f83\uff0c\u7c7b\u4f3c\u4e8e\u8fd9\u6837\uff1a mysql > SELECT ( 5 , 10 ) < ( 5 , 12 ), ( 5 , 11 ) < ( 5 , 12 ), ( 5 , 12 ) < ( 5 , 12 ); + -----------------+-----------------+-----------------+ | ( 5 , 10 ) < ( 5 , 12 ) | ( 5 , 11 ) < ( 5 , 12 ) | ( 5 , 12 ) < ( 5 , 12 ) | + -----------------+-----------------+-----------------+ | 1 | 1 | 0 | + -----------------+-----------------+-----------------+ 1 row in set ( 0 . 00 sec )","title":"RANGE COLUMNS \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#list-columns","text":"\u8fd9\u79cd\u5206\u533a\u7c7b\u578b\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e\uff0c\u5e76\u4f7f\u7528\u6574\u6570\u7c7b\u578b\u4ee5\u5916\u7684\u7c7b\u578b\u5217\u6765\u5b9a\u4e49\u8303\u56f4\u3002 \u4e0eRANGE COLUMNS \u7c7b\u4f3c\uff0c\u53c2\u8003\u4e0a\u6587\u8bf4\u660e\u3002 \u591a\u4e2a\u5b57\u6bb5\u4f5c\u4e3a\u5206\u533a\u952e\u7684\u5199\u6cd5\uff1a CREATE TABLE lc ( a INT NULL , b INT NULL ) PARTITION BY LIST COLUMNS ( a , b ) ( PARTITION p0 VALUES IN ( ( 0 , 0 ), ( NULL , NULL ) ), PARTITION p1 VALUES IN ( ( 0 , 1 ), ( 0 , 2 ), ( 0 , 3 ), ( 1 , 1 ), ( 1 , 2 ) ), PARTITION p2 VALUES IN ( ( 1 , 0 ), ( 2 , 0 ), ( 2 , 1 ), ( 3 , 0 ), ( 3 , 1 ) ), PARTITION p3 VALUES IN ( ( 1 , 3 ), ( 2 , 2 ), ( 2 , 3 ), ( 3 , 2 ), ( 3 , 3 ) ) );","title":"LIST COLUMNS \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#hash","text":"\u901a\u8fc7 HASH \u8fdb\u884c\u5206\u533a\u4e3b\u8981\u7528\u4e8e\u786e\u4fdd\u5728\u9884\u5b9a\u5206\u533a\u6570\u91cf\u4e4b\u95f4\u5747\u5300\u5730\u5206\u5e03\u6570\u636e\u3002 CREATE TABLE employees ( ... ) PARTITION BY HASH ( expr ) PARTITIONS num ; \u5206\u533a\u952e expr \u662f\u6574\u578b\u7684\u5b57\u6bb5\u6216\u8005\u662f\u8fd4\u56de\u6574\u578b\u7684\u8868\u8fbe\u5f0f\uff0c\u540c\u65f6\u9700\u8981\u6307\u5b9a\u5206\u533a\u6570\u91cf num \u3002 CREATE TABLE employees ( id INT NOT NULL , hired DATE NOT NULL DEFAULT '1970-01-01' , separated DATE NOT NULL DEFAULT '9999-12-31' , ) PARTITION BY HASH ( YEAR ( hired ) ) PARTITIONS 4 ; expr \u5fc5\u987b\u8fd4\u56de\u975e\u5e38\u91cf\u975e\u968f\u673a\u6570\u7684 \u6574\u578b\u503c \u3002\u975e\u5e38\u590d\u6742\u7684\u8868\u8fbe\u5f0f\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8868\u8fbe\u5f0f\u8d8a\u63a5\u8fd1\u5b83\u6240\u57fa\u4e8e\u7684\u5217\u7684\u503c\uff0cMySQL\u5c31\u8d8a\u6709\u6548\u5730\u4f7f\u7528\u8868\u8fbe\u5f0f\u8fdb\u884c\u6563\u5217\u5206\u533a\u3002\u901a\u8fc7 \u53d6\u6a21\u8fd0\u7b97 \u8ba1\u7b97\u5b58\u50a8\u7684\u5206\u533a\u53f7\uff1a N = MOD( expr , num )\u3002 \u5e38\u89c4HASH\u5206\u533a\u8ba9\u6bcf\u4e2a\u5206\u533a\u7ba1\u7406\u7684\u6570\u636e\u90fd\u51cf\u5c11\u4e86\uff0c\u63d0\u9ad8\u4e86\u67e5\u8be2\u6548\u7387\uff1b\u4f46\u662f\u5728\u5206\u533a\u7ba1\u7406\u4e0a\u7684\u4ee3\u4ef7\u592a\u5927\uff0c\u6545\u63d0\u4f9b\u4e86\u7ebf\u6027\u5206\u533a LINEAR HASH Partitioning \u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002","title":"HASH \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#linear-hash-mysql","text":"\u7ebf\u6027\u6563\u5217\u5229\u7528\u7ebf\u6027\u4e8c\u6b21\u5e42\u7b97\u6cd5\uff0c\u800c\u5e38\u89c4\u6563\u5217\u4f7f\u7528\u6563\u5217\u51fd\u6570\u503c\u7684\u6a21\u6570\u3002 CREATE TABLE employees ( ... ) PARTITION BY LINEAR HASH ( expr ) PARTITIONS num ; \u5206\u533a\u53f7 N \u901a\u8fc7\u4ee5\u4e0b\u7b97\u6cd5\u8ba1\u7b97\uff1a \u627e\u5230\u4e0b\u4e00\u4e2a\u5927\u4e8e\u7b49\u4e8e num \u76842\u7684\u5e42 V V = POWER ( 2 , CEILING ( LOG ( 2 , num ))) \u8bbe\u7f6e N = expr & (V - 1) While N >= num : Set V = V / 2 Set N = N & ( V - 1) \u4e3e\u4f8b \uff1a CREATE TABLE t1 ( col1 INT , col2 CHAR ( 5 ), col3 DATE ) PARTITION BY LINEAR HASH ( YEAR ( col3 ) ) PARTITIONS 6 ; V = POWER ( 2 , CEILING ( LOG ( 2 , 6 ) )) = 8 N = YEAR ( '1998-10-19' ) & ( 8 - 1 ) = 1998 & 7 = 6 ( 6 >= 6 is TRUE : additional step required ) N = 6 & (( 8 / 2 ) - 1 ) = 6 & 3 = 2 ( 2 >= 6 is FALSE : record stored in partition # 2 ) \u5f53\u7ebf\u6027\u5206\u533a\u7684\u5206\u533a\u6570\u662f 2\u7684N\u6b21\u5e42 \u65f6\uff0c\u5b83\u4e0e\u5e38\u89c4\u5206\u533a\u7684\u7ed3\u679c\u662f\u4e00\u81f4\u7684\u3002 \u4f18\u7f3a\u70b9\uff1a \u4f18\u70b9\uff1a\u5728\u5206\u533a\u7ba1\u7406\uff08\u589e\u52a0\u3001\u5220\u9664\u3001\u5408\u5e76\u3001\u62c6\u5206\uff09\u65f6\uff0c\u5904\u7406\u66f4\u52a0\u8fc5\u901f \u7f3a\u70b9\uff1a\u76f8\u5bf9\u4e8e\u5e38\u89c4HASH\u5206\u533a\uff0c\u7ebf\u6027\u5206\u533a\u6570\u636e\u5206\u5e03\u4e0d\u592a\u5747\u5300\u3002","title":"LINEAR HASH \u5206\u533a  mysql "},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#key","text":"\u7c7b\u4f3c\u4e8eHASH\u5206\u533a\uff0c\u4f46\u662f\u4f7f\u7528MySQL\u670d\u52a1\u5668\u63d0\u4f9b\u7684\u54c8\u5e0c\u51fd\u6570\u3002NDB Cluster \u4f7f\u7528MD5()\uff1b\u5176\u5b83\u7684\u4f7f\u7528\u57fa\u4e8e\u5bc6\u7801\u52a0\u5bc6\u7b97\u6cd5\u7684\u54c8\u5e0c\u51fd\u6570\u3002 CREATE TABLE employees ( ... ) PARTITION BY KEY ( expr ) PARTITIONS num ; \u5206\u533a\u952e expr \u662f0\u6216\u591a\u4e2a\u5b57\u6bb5\u540d\uff0c\u652f\u6301\u9664BLOB\u6216TEXT\u4e4b\u5916\u7684\u5176\u5b83\u7c7b\u578b\u4f5c\u4e3a\u5206\u533a\u952e\uff08\u67e5\u770b\u4e0a\u6587 \u5206\u533a\u7c7b\u578b \uff09\u3002\u7528\u4f5c\u5206\u533a\u952e\u7684\u4efb\u4f55\u5217\u5fc5\u987b\u5305\u542b\u8868\u7684\u4e3b\u952e\u7684\u90e8\u5206\u6216\u5168\u90e8\uff0c\u5982\u679c\u8868\u6709\u4e00\u4e2a\u3002\u5982\u679c\u6ca1\u6709\u5c06\u5217\u540d\u6307\u5b9a\u4e3a\u5206\u533a\u952e\uff0c\u5219\u4f7f\u7528\u8868\u7684\u4e3b\u952e\uff08\u5982\u679c\u6709\uff09\u3002\u5728\u6ca1\u6709\u4e3b\u952e\u65f6\uff0c\u9009\u62e9 \u552f\u4e00\u975e\u7a7a\u952e *\u4f5c\u4e3a\u5206\u533a\u952e\u3002 \u6ce8\u610f\uff1a\u4e0d\u80fd\u6267\u884c ALTER TABLE DROP PRIMARY KEY \u5220\u9664key\u7c7b\u578b\u7684\u5206\u533a\uff0c\u4f46\u662fNDB Cluster\u53ef\u4ee5\u3002","title":"KEY \u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#linear-key-mysql","text":"\u4e0e\u7ebf\u6027HASH\u5206\u533a\u7c7b\u4f3c\u3002","title":"LINEAR KEY \u5206\u533a  mysql "},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_6","text":"\u5b50\u5206\u533a\uff08 Subpartitioning \uff09\u4e5f\u79f0\u4e3a\u590d\u5408\u5206\u533a \u4e8c\u7ea7\u5206\u533a[ob] \uff0c\u662f\u5bf9\u5206\u533a\u8868\u4e2d\u5206\u533a\u7684\u8fdb\u4e00\u6b65\u5212\u5206\u3002 \u521b\u5efa\u8bed\u6cd5\u89c1\u4e0a\u6587\u3002 mysql \u652f\u6301\u5bf9 RANGE\u5206\u533a \u548c LIST\u5206\u533a \u5212\u5206\u7684\u8868\u518d\u5212\u5206\uff0c\u5b50\u5206\u533a\u53c8\u652f\u6301 HASH\u5206\u533a \u7c7b\u578b \u548cKEY\u5206\u533a \u7c7b\u578b\u3002 OceanBase MySQL \u6a21\u5f0f\u652f\u6301 HASH \u3001 RANGE \u3001 LIST \u3001 KEY \u3001 RANGE COLUMNS \u548c LIST COLUMNS \u4efb\u610f\u4e24\u79cd\u5206\u533a\u65b9\u5f0f\u7684\u7ec4\u5408 -- \u7b2c\u4e00\u79cd\u5199\u6cd5 CREATE TABLE ts ( id INT , purchased DATE ) PARTITION BY RANGE ( YEAR ( purchased ) ) SUBPARTITION BY HASH ( TO_DAYS ( purchased ) ) SUBPARTITIONS 2 ( PARTITION p0 VALUES LESS THAN ( 1990 ), PARTITION p1 VALUES LESS THAN ( 2000 ), PARTITION p2 VALUES LESS THAN MAXVALUE ); -- \u7b2c\u4e8c\u79cd\u5199\u6cd5 CREATE TABLE ts ( id INT , purchased DATE ) PARTITION BY RANGE ( YEAR ( purchased ) ) SUBPARTITION BY HASH ( TO_DAYS ( purchased ) ) ( PARTITION p0 VALUES LESS THAN ( 1990 ) ( SUBPARTITION s0 , SUBPARTITION s1 ), PARTITION p1 VALUES LESS THAN ( 2000 ) ( SUBPARTITION s2 , SUBPARTITION s3 ), PARTITION p2 VALUES LESS THAN MAXVALUE ( SUBPARTITION s4 , SUBPARTITION s5 ) ); ts \u8868\u6709\u4e09\u4e2a\u5206\u533a\uff1a p0, p1, p2 \uff0c\u6bcf\u4e2a\u5206\u533a\u518d\u8fdb\u4e00\u6b65\u5212\u5206\u4e3a\u4e24\u4e2a\u5206\u533a\uff0c\u6240\u6709\u5171\u6709 2*3 = 6 \u4e2a\u5206\u533a\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u6bcf\u4e2a\u5206\u533a\u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5b50\u5206\u533a \u4e0d\u5141\u8bb8\u53ea\u5bf9\u4e00\u90e8\u5206\u5206\u533a\u5b9a\u4e49\u5b50\u5206\u533a \u5728\u6574\u4e2a\u8868\u4e2d\u6bcf\u4e2a\u5b50\u5206\u533a\u7684\u540d\u79f0\u5fc5\u987b\u662f\u552f\u4e00\u7684","title":"\u5b50\u5206\u533a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#mysqlnull","text":"Note NULL \u4e0d\u662f\u4e00\u4e2a\u6570\u5b57\u3002 MySQL\u7684\u5206\u533a\u5b9e\u73b0\u5c06NULL\u89c6\u4e3a \u5c0f\u4e8e\u4efb\u4f55\u975eNULL\u503c \uff0c\u5c31\u50cfORDER BY\u4e00\u6837\u3002","title":"MySQL\u5206\u533a\u5982\u4f55\u5904\u7406NULL"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#range-partitioning","text":"\u5982\u679c\u8ba1\u7b97\u8fc7\u540e\u5206\u533a\u952e\u7684\u503c\u4e3aNULL\uff0c\u5c06\u8be5\u8bb0\u5f55\u63d2\u5165\u5230 \u6700\u4f4e\u7684\u5206\u533a \u4e2d\u3002","title":"RANGE partitioning"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#list-partitioning","text":"\u6709\u4e00\u4e2a\u5206\u533a\u7684\u503c \u5305\u542bNULL \u65f6\uff0c\u7531LIST\u5206\u533a\u7684\u8868\u624d\u5141\u8bb8NULL\u503c\u3002","title":"LIST partitioning"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#hash-and-key-partitioning","text":"NULL\u503c\u88ab\u89c6\u4e3a \u96f6 \u3002","title":"HASH and KEY partitioning"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_7","text":"\u67e5\u8be2\u65f6\u5e26\u4e0a \u5206\u533aKEY mysql\u4ec5\u4f1a\u67e5\u8be2\u76f8\u5173\u7684\u5206\u533a\u6570\u636e mysql > create table range_t ( int a NOT NULL , int b NOT NULL ) partition by range ( a ) ( partition p1 values less than ( 100 ), partition p2 values less than maxvalue ); mysql > explain select * from range_t where a < 10 ; + ----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+ | id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra | + ----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+ | 1 | SIMPLE | range_t | p1 | ALL | NULL | NULL | NULL | NULL | 1 | 100 . 00 | Using where | + ----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-------------+ 1 row in set , 1 warning ( 0 . 00 sec )","title":"\u5206\u533a\u88c1\u526a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_8","text":"\u52a8\u4f5c\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u3001\u91cd\u7ec4\uff08\u5408\u5e76\u3001\u5206\u79bb\uff09\u3002\u4f7f\u7528 ALTER TABLE \u8bed\u53e5\u5e26\u6709\u7684 partition_options \u5b50\u53e5\u6267\u884c\uff0c\u4e0e\u521b\u5efa\u5206\u533a\u7684\u8bed\u6cd5\u76f8\u540c\u3002\u8fd9\u4e9b\u52a8\u4f5c\u4f1a\u6d89\u53ca\u5230\u6570\u636e\u7684\u8fc1\u79fb\u3002 Note \u6240\u6709\u7684\u5206\u533a\u90fd\u5fc5\u987b\u6709\u76f8\u540c\u6570\u91cf\u7684\u5b50\u5206\u533a\uff0c\u5e76\u4e14\u5b50\u5206\u533a\u4e00\u65e6\u521b\u5efa\u5c31\u4e0d\u53ef\u6539\u53d8\u3002\u540c\u4e00\u6761\u8bed\u53e5\u4e2d\u53ea\u6709\u4e00\u4e2a\u52a8\u4f5c\u53ef\u4ee5\u88ab\u6267\u884c\u3002","title":"\u5206\u533a\u7ba1\u7406"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#range-and-list","text":"","title":"RANGE and LIST \u7684\u7ba1\u7406"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_9","text":"ALTER TABLE ... DROP PARTITION ... \u5206\u533a\u4e2d\u7684\u6570\u636e\u540c\u65f6\u4e5f\u88ab\u5220\u9664\u3002 NDBCLUSTER \u5b58\u50a8\u5f15\u64ce\u4e0d\u652f\u6301\u8be5\u64cd\u4f5c\u3002","title":"\u5220\u9664"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_10","text":"ALTER TABLE ... ADD PARTITION partition_definitions RANGE\u53ea\u80fd\u5728\u5206\u533a\u5c3e\u90e8\u6dfb\u52a0\u65b0\u7684\u5206\u533a\uff0c\u5e76\u4e14\u5176\u8303\u56f4\u6bd4\u5b58\u5728\u7684\u5206\u533a\u90fd\u5927\u3002 ALTER TABLE members ADD PARTITION ( PARTITION p3 VALUES LESS THAN ( 2010 )); ALTER TABLE tt ADD PARTITION ( PARTITION p2 VALUES IN ( 7 , 14 , 21 ), PARTITION p3 VALUES IN ( 1 )); LIST\u5206\u533a\u4e0d\u80fd\u5305\u542b\u91cd\u590d\u7684\u503c","title":"\u6dfb\u52a0"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_11","text":"ALTER TABLE table_name REORGANIZE PARTITION partition_names INTO ( partition_definitions ) \u6570\u636e\u4f1a\u5b58\u50a8\u5728\u65b0\u7684\u5206\u533a\u4e0a\u3002 \u5206\u79bb\u5206\u533a\uff1a ALTER TABLE members REORGANIZE PARTITION p0 INTO ( PARTITION n0 VALUES LESS THAN ( 1970 ), PARTITION n1 VALUES LESS THAN ( 1980 ) ); \u5408\u5e76\u5206\u533a\uff1a ALTER TABLE members REORGANIZE PARTITION s0 , s1 INTO ( PARTITION p0 VALUES LESS THAN ( 1970 ) ); \u5206\u79bb\u4e0e\u5408\u5e76\u7684\u5173\u7cfb\u4e0d\u5fc5\u662f\u4e00\u5bf9\u591a\u6216\u591a\u5bf9\u4e00\uff0c\u53ef\u4ee5\u662f \u591a\u5bf9\u591a \uff1a ALTER TABLE members REORGANIZE PARTITION p0 , p1 , p2 , p3 INTO ( PARTITION m0 VALUES LESS THAN ( 1980 ), PARTITION m1 VALUES LESS THAN ( 2000 ) ); Warning RANGE\u5206\u533a \u4e0d\u80fd\u8de8\u8303\u56f4\u91cd\u7ec4 \u3002\u4f8b\u5982\uff1a\u4e0d\u80fd\u91cd\u7ec4\u2018p0,p2\u2019\uff0c\u800c\u8df3\u8fc7p1\u3002 \u4e0d\u80fd\u4f7f\u7528\u91cd\u7ec4\u8bed\u53e5\u6539\u53d8\u5206\u533a\u7c7b\u578b\uff0c\u4ee5\u53ca\u6539\u53d8\u5206\u533a\u952e expr \uff1b\u4f7f\u7528 ALTER TABLE ... PARTITION BY ... \u8fbe\u5230\u8fd9\u4e2a\u76ee\u7684\u3002","title":"\u91cd\u7ec4"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#hash-and-key","text":"\u8fd9\u4e24\u4e2a\u5206\u533a\u6ca1\u6709\u5206\u533a\u540d\uff0c\u4e0d\u80fd\u4f7f\u7528\u548c\u5206\u533a\u540d\u76f8\u5173\u7684\u8bed\u53e5\u8fdb\u884c\u7ba1\u7406\u3002","title":"HASH and KEY \u7684\u7ba1\u7406"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_12","text":"\u4e0d\u53ef\u5220\u9664\u6307\u5b9a\u5206\u533a\uff0c\u4f7f\u7528\u5982\u4e0b\u8bed\u53e5\u5408\u5e76\u5206\u533a\uff1a ALTER TABLE table_name COALESCE PARTITION number number \u662f\u8981\u5408\u5e76\u5230\u5176\u4f59\u5206\u533a\u7684\u5206\u533a\u6570\uff0c\u5373\u5220\u9664\u7684\u5206\u533a\u6570\u3002 MariaDB [ MYISAM_TEST ] > ALTER TABLE hash_par COALESCE PARTITION 2 ; Query OK , 4 rows affected ( 0 . 11 sec ) Records : 4 Duplicates : 0 Warnings : 0","title":"\u5220\u9664"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_13","text":"ALTER TABLE table_name ADD PARTITION PARTITIONS number number \u662f\u6dfb\u52a0\u7684\u5206\u533a\u6570\u3002","title":"\u6dfb\u52a0"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_14","text":"\u901a\u8fc7\u5220\u9664\u548c\u6dfb\u52a0\u5b9e\u73b0\u3002 \u5b50\u5206\u533a\u4f1a\u81ea\u52a8\u7684\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff1a MariaDB [ MYISAM_TEST ] > ALTER TABLE sub_par_test REORGANIZE PARTITION P0 INTO ( PARTITION P00 VALUES LESS THAN ( 5 ), PARTITION P01 VALUES LESS THAN ( 10 )); Query OK , 2 rows affected ( 0 . 01 sec ) Records : 2 Duplicates : 0 Warnings : 0","title":"\u91cd\u7ec4"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_15","text":"\u7ef4\u62a4\u52a8\u4f5c\uff1a CHECK TABLE , OPTIMIZE TABLE , ANALYZE TABLE , and REPAIR TABLE \u3002 \u8bed\u6cd5\uff1a ALTER TABLE table_name action PARTITION { partition_names | ALL } \u91cd\u6784\u5206\u533a \uff1a\u4e22\u5f03\uff08drop\uff09\u5206\u533a\u6240\u6709\u7684\u8bb0\u5f55\uff0c\u7136\u540e\u91cd\u65b0\u63d2\u5165\u6570\u636e\u3002\u5bf9\u4e8e\u788e\u7247\u6574\u7406\u5f88\u6709\u7528\u5904\u3002 ALTER TABLE t1 REBUILD PARTITION p0 , p1 ; \u4f18\u5316\u5206\u533a \uff1a\u82e5\u5220\u9664\u4e86\u4e00\u4e2a\u5206\u533a\u7684\u5927\u91cf\u6570\u636e\uff0c\u6216\u8005\u5728\u53ef\u53d8\u7c7b\u578b\u7684\u5b57\u6bb5\u505a\u51fa\u4e86\u5f88\u591a\u6539\u53d8\uff0c\u53ef\u4f7f\u7528\u6b64\u8bed\u53e5\u6765\u56de\u6536\u672a\u4f7f\u7528\u7684\u7a7a\u95f4\u548c\u4f18\u5316\u5206\u533a\u6570\u636e\u6587\u4ef6\u3002 ALTER TABLE t1 OPTIMIZE PARTITION p0 , p1 ; \u8fd0\u884c OPTIMIZE PARTITION \u4e0e\u8fd0\u884c CHECK PARTITION , ANALYZE PARTITION , and REPAIR PARTITION \u7b49\u4ef7\u3002 \u4e00\u4e9b\u5b58\u50a8\u5f15\u64ce\uff08\u5982InnoDB\uff09\uff0c\u4e0d\u652f\u6301\u5bf9\u5355\u72ec\u7684\u5206\u533a\u4f18\u5316\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6b64\u8bed\u53e5\u5c06\u91cd\u6784\u6574\u4e2a\u8868\u3002\u4eceMySQL 5.5.30\u5f00\u59cb\uff0c\u4f7f\u7528\u6b64\u8bed\u53e5\u5c06\u5bfc\u81f4\u4e00\u4e2abug\uff0c\u4f7f\u7528 ALTER TABLE ... REBUILD PARTITION and ALTER TABLE ... ANALYZE PARTITION \u6765\u907f\u514d\u6574\u4e2a\u95ee\u9898\u3002 \u5206\u6790\u5206\u533a \uff1a\u8bfb\u53d6\u5e76\u5b58\u50a8\u5206\u533a\u7684key\u5206\u5e03\u3002 ALTER TABLE t1 ANALYZE PARTITION p3 ; \u4fee\u590d\u5206\u533a \uff1a\u4fee\u590d\u635f\u574f\u7684\u5206\u533a\u3002 ALTER TABLE t1 REPAIR PARTITION p0 , p1 ; \u68c0\u67e5\u5206\u533a \uff1a\u68c0\u67e5\u5206\u533a\u662f\u5426\u5b58\u5728\u9519\u8bef\u3002 ALTER TABLE trb3 CHECK PARTITION p1 ; \u6b64\u8bed\u53e5\u5c06\u544a\u8bc9\u8868\u4e2d\u7684\u6570\u636e\u6216\u7d22\u5f15\u662f\u5426\u5df2\u635f\u574f\u3002\u53ef\u4ee5\u4f7f\u7528 REPAIR PARTITION \u4fee\u590d\u3002 \u91cd\u5efa\u5206\u533a \uff1a\u5220\u9664\u6307\u5b9a\u5206\u533a\u4ee5\u53ca\u6240\u6709\u6307\u5b9a\u5206\u533a\u7684\u6570\u636e\u5e76\u521b\u5efa\u65b0\u5206\u533a\u3002 ALTER TABLE hash_par TRUNCATE PARTITION ALL ; mysqlcheck and myisamchk \u4e0d\u652f\u6301\u5206\u533a\u8868\u3002 ANALYZE , CHECK , OPTIMIZE , REBUILD , REPAIR , and TRUNCATE \u64cd\u4f5c\u4e0d\u652f\u6301\u5b50\u5206\u533a\u3002","title":"\u5206\u533a\u7684\u7ef4\u62a4"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_16","text":"\u5212\u5206\u8868\u8fbe\u5f0f\u4e0d\u5141\u8bb8\u7684\u7ed3\u6784\uff1a \u5b58\u50a8\u8fc7\u7a0b\uff0c\u5b58\u50a8\u51fd\u6570\uff0cUDFS\uff0c\u63d2\u4ef6 \u58f0\u660e\u6216\u4f7f\u7528\u53d8\u91cf \u90e8\u5206\u7b97\u672f\u548c\u903b\u8f91\u8fd0\u7b97\u7b26\u4e0d\u5141\u8bb8\u5728\u5212\u5206\u8868\u8fbe\u5f0f\u4e2d\u51fa\u73b0\uff1a \u9664\u6cd5\u8fd0\u7b97\u7b26\uff1a / \u4f4d\u8fd0\u7b97\u7b26\uff1a |, &, ^, <<, >>, ~ MySQL 5.5 \u4e0d\u652f\u6301\u5728\u5206\u533a\u8868\u4e2d\u4f7f\u7528 HANDLER \u8bed\u53e5 \u521b\u5efa\u5206\u533a\u8868\u4e4b\u540e\u4e0d\u8981\u6539\u53d8\u6a21\u5f0f MySQL mode \u6700\u5927\u5206\u533a\u6570\u3002\u4e00\u5f20\u8868\u6700\u591a\u67091024\uff08\u5305\u62ec\u5b50\u5206\u533a\uff09\u4e2a\u5206\u533a\uff0cNDB\u5b58\u50a8\u5f15\u64ce\u4e0d\u53d7\u6b64\u9650\u5236\u3002 \u4e0d\u652f\u6301\u67e5\u8be2\u7f13\u5b58\u3002 \u6bcf\u4e2a\u5206\u533a\u7684 key caches \u3002\u5728MySQL 5.5\u4e2d\uff0cCACHE INDEX\u548cLOAD INDEX INTO CACHE\u8bed\u53e5\u652f\u6301MyISAM\u5206\u533a\u8868\u7684key caches\u3002 InnoDB\u5206\u533a\u8868\u4e0d\u652f\u6301\u5916\u952e -- InnoDB: Foreign keys are not yet supported in conjunction with partitioning CREATE TABLE Persons ( PersonID INT PRIMARY KEY ) CREATE TABLE Orders ( OrderID int NOT NULL , OrderNumber int NOT NULL , PersonID int , PRIMARY KEY ( OrderID ), FOREIGN KEY ( PersonID ) REFERENCES Persons ( PersonID ) ) PARTITION BY HASH ( OrderID ) PARTITIONS 4 ; ALTER TABLE ... ORDER BY\u3002\u5bfc\u81f4\u4ec5\u5728\u6bcf\u4e2a\u5206\u533a\u5185\u5bf9\u8bb0\u5f55\u6392\u5e8f\u3002 \u901a\u8fc7\u4fee\u6539\u4e3b\u952e\u5bf9REPLACE\u8bed\u53e5\u7684\u5f71\u54cd\u3002see Section 19.5.1, \u201cPartitioning Keys, Primary Keys, and Unique Keys\u201d and REPLACE \u5b8c\u6574TEXT\u7d22\u5f15\u3002\u4e0d\u652f\u6301 FULLTEXT \u7d22\u5f15\u6216\u641c\u7d22\u3002 \u7a7a\u95f4\u7c7b\u578b\u7684\u5217\u3002\u5177\u6709\u7a7a\u95f4\u6570\u636e\u7c7b\u578b\uff08\u5982POINT\u6216GEOMETRY\uff09\u7684\u5217\u4e0d\u80fd\u5728\u5206\u533a\u8868\u4e2d\u4f7f\u7528\u3002 \u4e34\u65f6\u8868\u3001log\u8868\u4e0d\u80fd\u5206\u533a\u3002 \u5206\u533a\u952e\u7684\u7c7b\u578b\u3002\u5206\u533a\u952e\u5fc5\u987b\u662f\u6574\u6570\u5217\u6216\u89e3\u6790\u4e3a\u6574\u6570\u7684\u8868\u8fbe\u5f0f\u3002\u53ef\u4ee5\u63a5\u53d7NULL\u503c\u3002\u4e0d\u80fd\u662f\u5b50\u67e5\u8be2\u3002 \u5b50\u5206\u533a\u3002\u53ea\u6709 RANGE \u548c LIST \u8868\u652f\u6301\u5b50\u5206\u533a\uff0c\u5e76\u4e14\u5b50\u5206\u533a\u7684\u7c7b\u578b\u5fc5\u987b\u662f HASH \u6216 KEY \u5206\u533a mysql\u9650\u5236 SUBPARTITION BY KEY \u8981\u6c42\u5fc5\u987b\u6307\u660e\u5206\u533a\u7684\u5b57\u6bb5\u6216\u5b57\u6bb5\u5217\u8868\u3002 \u4e0d\u652f\u6301 DELAYED \u9009\u9879\u3002\u4e0d\u652f\u6301 INSERT DELAYED \u3002 \u6027\u80fd\u65b9\u9762 (1) \u6587\u4ef6\u7cfb\u7edf\u64cd\u4f5c (2) \u8868\u9501:\u5206\u533a\u64cd\u4f5c\u4f1a\u5728\u8868\u4e0a\u83b7\u53d6\u5199\u9501\u3002\u8bfb\u53d6\u8868\u7684\u64cd\u4f5c\u51e0\u4e4e\u4e0d\u4f1a\u53d7\u5230\u5f71\u54cd\uff1b\u4e00\u65e6\u5206\u533a\u64cd\u4f5c\u5b8c\u6210\uff0c\u5c31\u6267\u884c\u6302\u8d77\u7684INSERT\u548cUPDATE\u64cd\u4f5c (3) LOAD DATA (4) \u5b58\u50a8\u5f15\u64ce blah blah","title":"\u5206\u533a\u9650\u5236"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_17","text":"\u4e09\u8005\u7684\u5173\u7cfb\uff1a\u5206\u533a\u8868\u7684\u5206\u533a\u8868\u8fbe\u5f0f\u4e2d\u4f7f\u7528\u7684\u6240\u6709\u5217\u5fc5\u987b\u662f\u8868\u53ef\u80fd\u5177\u6709\u7684\u6bcf\u4e2a\u552f\u4e00\u952e\u7684\u4e00\u90e8\u5206\uff08\u4e3b\u952e\u88ab\u5b9a\u4e49\u4e3a\u552f\u4e00\u952e\uff09\u3002\u6362\u53e5\u8bdd\u8bf4\uff1a**\u8868\u4e0a\u7684\u6bcf\u4e2a\u552f\u4e00\u952e mysql \u5fc5\u987b\u4f7f\u7528\u8868\u7684\u5206\u533a\u8868\u8fbe\u5f0f\u4e2d\u7684\u6bcf\u4e00\u5217\u3002 Note OB\u4e2d\u8868\u662f\u7d22\u5f15\u7ec4\u7ec7\u8868\uff08IOT\uff09\uff0c\u5bf9\u4e8e\u5206\u533a\u8868\u800c\u8a00\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6307\u5b9a\u4e3b\u952e\u7684\u67e5\u8be2\u80fd\u5f88\u5feb\u5b9a\u4f4d\u5230\u8868\u6240\u5728\u7684\u5206\u533a\uff0c\u5206\u533a\u952e\u5fc5\u987b\u662f \u4e3b\u952e \u7684\u5b50\u96c6. \u4f8b\u5982\u4e0b\u9762\u8fd9\u4e9b\u662f\u5408\u6cd5\u7684\uff1a CREATE TABLE t1 ( col1 INT NOT NULL , col2 DATE NOT NULL , col3 INT NOT NULL , col4 INT NOT NULL , UNIQUE KEY ( col1 , col2 , col3 ) ) PARTITION BY HASH ( col3 ) PARTITIONS 4 ; CREATE TABLE t2 ( col1 INT NOT NULL , col2 DATE NOT NULL , col3 INT NOT NULL , col4 INT NOT NULL , UNIQUE KEY ( col1 , col3 ) ) PARTITION BY HASH ( col1 + col3 ) PARTITIONS 4 ;","title":"\u5206\u533a\u952e\uff0c\u4e3b\u952e\uff0c\u552f\u4e00\u952e"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_18","text":"MERGE \uff1a\u8868\u4e0d\u80fd\u5206\u533a\u3002\u5206\u533a\u8868\u4e5f\u4e0d\u80fd\u5408\u5e76\u3002 FEDERATED \uff1a\u8868\u4e0d\u80fd\u5206\u533a\u3002 CSV \uff1a\u8868\u4e0d\u80fd\u5206\u533a\u3002 InnoDB \uff1a\u8868\u4e2d\u4e0d\u80fd\u542b\u6709\u5916\u952e\uff0c\u4e5f\u4e0d\u80fd\u6709\u88ab\u5f15\u7528\u4e3a\u5916\u952e\u7684\u5b57\u6bb5\u3002\u5bf9\u4e8e\u5b50\u5206\u533a\u4e5f\u4e0d\u652f\u6301\u591a\u5757\u78c1\u76d8\u5b58\u50a8\u3002\u5b9e\u64cd\u53d1\u73b0MyISAM\u4e5f\u4e0d\u652f\u6301\u4e86\u3002\u4f18\u5316\u76f8\u5173\u53c2\u8003 \u524d\u6587 \u5206\u533a\u7ef4\u62a4\u7ae0\u8282\u3002 \u7528\u6237\u5b9a\u4e49\u7684\u5206\u533a\u548cNDB\u5b58\u50a8\u5f15\u64ce\uff08NDB\u96c6\u7fa4\uff09 \uff1aNDB\u53ea\u652f\u6301 [LINEAR] KEY \u5206\u533a\u7c7b\u578b\u3002 \u4e00\u5f20\u8868\u7684\u6700\u5927\u7684\u5206\u533a\u6570\u53d6\u51b3\u4e8e\u5728\u4e00\u4e2a\u96c6\u7fa4\u4e2d\u6570\u636e\u8282\u70b9\u4e0e\u8282\u70b9\u7ec4\u7684\u6570\u91cf\u3001NDB\u96c6\u7fa4\u7684\u7248\u672c\u3001\u5176\u5b83\u5b9e\u9645\u60c5\u51b5\uff0c See NDB and user-defined partitioning \u3002 NDB\u8868\u4e2d\u6bcf\u4e2a\u5206\u533a\u53ef\u4ee5\u5b58\u50a8\u7684\u6700\u5927\u56fa\u5b9a\u5927\u5c0f\u6570\u636e\u91cf\u4e3a16 GB\u3002 \u5206\u533a\u8868\u5fc5\u987b\u5177\u6709\u663e\u5f0f\u4e3b\u952e\u3002 \u5347\u7ea7\u5206\u533a\u8868\uff1a\u6267\u884c\u5347\u7ea7\u65f6\uff0c\u5fc5\u987b\u8f6c\u50a8\u5e76\u91cd\u65b0\u52a0\u8f7d\u7531 KEY \u5206\u533a\u5e76\u4f7f\u7528\u9664NDB\u4e4b\u5916\u7684\u4efb\u4f55\u5b58\u50a8\u5f15\u64ce\u7684\u8868\u3002 \u6240\u6709\u7684\u5206\u533a\u5fc5\u987b\u4f7f\u7528\u540c\u4e00\u4e2a\u5b58\u50a8\u5f15\u64ce\uff1a\u5206\u533a\u8868\u7684\u6240\u6709\u5206\u533a\u5fc5\u987b\u4f7f\u7528\u76f8\u540c\u7684\u5b58\u50a8\u5f15\u64ce\uff0c\u5e76\u4e14\u5b83\u5fc5\u987b\u4e0e\u6574\u4e2a\u8868\u4f7f\u7528\u7684\u5b58\u50a8\u5f15\u64ce\u76f8\u540c\u3002\u53e6\u5916\uff0c\u5982\u679c\u5728\u521b\u5efa\u6216\u4fee\u6539\u8868\u7684\u65f6\u5019\u5728\u8868\u7684\u7ea7\u522b\u6ca1\u6709\u6307\u5b9a\u5b58\u50a8\u5f15\u64ce\uff0c\u8981\u4e48\u4e0d\u6307\u5b9a\u4efb\u4f55\u4e00\u4e2a[\u5b50]\u5206\u533a\u7684\u5f15\u64ce\uff0c\u8981\u4e48\u5168\u90e8\u6307\u5b9a\u3002","title":"\u4e0e\u5b58\u50a8\u5f15\u64ce\u76f8\u5173\u7684\u5206\u533a\u9650\u5236"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_19","text":"\u53c2\u8003 \u5206\u533a\u952e\u5141\u8bb8\u4f7f\u7528\u7684Functions","title":"\u4e0e\u51fd\u6570\u76f8\u5173\u7684\u5206\u533a\u9650\u5236"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_20","text":"\u5bf9\u4e8e\u5728\u6267\u884cDML\u6216DDL\u8bed\u53e5\u65f6\u5b9e\u9645\u6267\u884c\u8868\u7ea7\u9501\u7684MyISAM\u7b49\u5b58\u50a8\u5f15\u64ce\uff0c\u5f71\u54cd\u5206\u533a\u8868\u7684\u8fd9\u79cd\u8bed\u53e5\u4f1a\u5bf9\u8868\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u8fdb\u884c\u9501\u5b9a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6240\u6709\u5206\u533a\u90fd\u4f1a\u88ab\u9501\u5b9a\uff0c\u76f4\u5230\u8bed\u53e5\u7ed3\u675f\u3002\u4f8b\u5982\uff0c\u6765\u81eaMyISAM\u7684\u5206\u533a\u8868\u7684SELECT\u4f1a\u5bfc\u81f4\u6574\u4e2a\u8868\u7684\u9501\u5b9a\u3002 \u8fd9\u4f1a\u5bfc\u81f4\u968f\u7740\u5206\u533a\u6570\u91cf\u7684\u589e\u52a0\u4e0b\u9762\u8ba8\u8bba\u7684\u8bed\u53e5\u7684\u6267\u884c\u901f\u5ea6\u56de\u8d8a\u6765\u8d8a\u6162\u3002\u4f46\u662f\u5728MySQL 5.6.6 \u7248\u672c\u5f15\u5165\u4e86\u5206\u533a\u9501\u5b9a\u4fee\u526a\uff08 partition lock pruning \uff09\u5927\u5927\u51cf\u5c11\u4e86\u8fd9\u79cd\u5f71\u54cd\u3002 \u5bf9\u4e8e\u4f7f\u7528\u884c\u7ea7\u9501\u5b9a\u5e76\u4e14\u5728\u5206\u533a\u4fee\u526a\u4e4b\u524d\u4e0d\u4f1a\u5b9e\u9645\u6267\u884c\uff08\u6216\u9700\u8981\u6267\u884c\uff09\u9501\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\uff08\u5982InnoDB\uff09\uff0c\u60c5\u51b5\u4e0d\u4f1a\u5982\u6b64\u3002 \u4e0b\u9762\u8ba8\u8bba\u5728\u91c7\u7528\u8868\u7ea7\u9501\u5b9a\u7684\u5b58\u50a8\u5f15\u64ce\u7684\u5206\u533a\u8868\u4e0a\u4f7f\u7528MySQL\u8bed\u53e5\u7684\u5f71\u54cd\u3002","title":"\u5206\u533a\u548c\u8868\u7ea7\u9501\u5b9a"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#dml","text":"SELECT \u9501\u5b9a\u6574\u4e2a\u8868\u3002\u5305\u62ec UNION \u548c JOIN \u8bed\u53e5\u5305\u542b\u7684\u8868\u3002 UPDATE \u9501\u5b9a\u6574\u4e2a\u8868\u3002 REPLACE \u9501\u5b9a\u6574\u4e2a\u8868\u3002 INSERT\uff08\u5305\u62ec INSERT ... ON DUPLICATE KEY UPDATE \uff09 \u9501\u5b9a\u6574\u4e2a\u8868\u3002 INSERT ... SELECT \u9501\u5b9a\u6e90\u4e0e\u76ee\u6807\u8868\u3002 LOAD DATA \u9501\u5b9a\u6574\u4e2a\u8868\u3002 \u89e6\u53d1\u5668\u6fc0\u6d3b\u65f6\u9501\u5b9a\u6574\u4e2a\u8868\u3002","title":"DML \u8bed\u53e5"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#ddl","text":"CREATE VIEW \u9501\u5b9a\u5b83\u8bfb\u5230\u7684\u6240\u6709\u5206\u533a\u8868\u3002 ALTER TABLE \u9501\u5b9a\u5f71\u54cd\u5230\u7684\u5206\u533a\u8868\u3002","title":"DDL \u8bed\u53e5"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/03%20MySql%E5%88%86%E5%8C%BA/#_21","text":"LOCK TABLES \u9501\u5b9a\u5206\u533a\u8868\u7684\u6240\u6709\u5206\u533a\u3002 CALL stored_procedure( expr ) \u8c03\u7528\u65f6\u9501\u5b9a\u5728 expr \u4e2d\u6d89\u53ca\u5230\u7684\u6240\u6709\u5206\u533a\u8868\u7684\u6240\u6709\u5206\u533a\u3002 ALTER TABLE \u8fd8\u5c06\u5728\u8868\u7ea7\u83b7\u53d6\u5143\u6570\u636e\u9501\u3002","title":"\u5176\u5b83\u8bed\u53e5"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/04%20QA/","text":"\u95ee\u9898 1\uff1a \u5c40\u90e8\u7d22\u5f15\u65e0\u6cd5\u5b9e\u73b0 \u5b57\u7b26\u4e32[ billno return_order_no ] \u7c7b\u578b\u7684\u5168\u5c40\u552f\u4e00\u6027 UNIQUE INDEX \u00b6 \u5168\u5c40\u7d22\u5f15 \u8de8\u673a\u4e8b\u52a1 \u95ee\u9898 2\uff1a\u5206\u533aKEY \u5fc5\u987b\u88ab\u5305\u542b\u5728\u4e3b\u952e\u4e2d \u00b6 \u8054\u5408\u4e3b\u952e \u53ea\u6709\u7b2c\u4e00\u4f4d\u7684\u5b57\u6bb5\u624d\u4f1a\u7528\u5230\u7d22\u5f15 \u9700\u8981\u5355\u72ec\u5efa\u7d22\u5f15","title":"04 QA"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/04%20QA/#1-billno-return_order_no-unique-index","text":"\u5168\u5c40\u7d22\u5f15 \u8de8\u673a\u4e8b\u52a1","title":"\u95ee\u9898 1\uff1a \u5c40\u90e8\u7d22\u5f15\u65e0\u6cd5\u5b9e\u73b0 \u5b57\u7b26\u4e32[billno return_order_no] \u7c7b\u578b\u7684\u5168\u5c40\u552f\u4e00\u6027 UNIQUE INDEX"},{"location":"oceanbase/3%20%E5%A4%9A%E7%A7%9F%E6%88%B7-%E7%B4%A2%E5%BC%95-%E5%88%86%E5%8C%BA/04%20QA/#2key","text":"\u8054\u5408\u4e3b\u952e \u53ea\u6709\u7b2c\u4e00\u4f4d\u7684\u5b57\u6bb5\u624d\u4f1a\u7528\u5230\u7d22\u5f15 \u9700\u8981\u5355\u72ec\u5efa\u7d22\u5f15","title":"\u95ee\u9898 2\uff1a\u5206\u533aKEY \u5fc5\u987b\u88ab\u5305\u542b\u5728\u4e3b\u952e\u4e2d"},{"location":"oceanbase/4%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/01%20%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/","text":"\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61 \u00b6 \u57fa\u672c\u6982\u5ff5 \u00b6 \u4ec0\u4e48\u662f\u6570\u636e\u5e93\u5bf9\u8c61 \u6570\u636e\u5e93\u5bf9\u8c61\u662f\u6570\u636e\u5e93\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u662f\u6307\u5728\u6570\u636e\u5e93\u4e2d\u53ef\u4ee5\u901a\u8fc7 SQL \u8fdb\u884c\u64cd\u4f5c\u548c\u4f7f\u7528\u7684\u5bf9\u8c61\u3002 \u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61 \u76f8\u8f83\u4e8e\u4f20\u7edf\u96c6\u4e2d\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61,\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61\u53ef\u6269\u5c55\u6027\u66f4\u9ad8 OceanBase\u6570\u636e\u5e93\u5c06\u4e00\u4e9b\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a\u6216\u8005\u591a\u4e2aSSTable\u4e2d. \u4e00\u4e2aSSTable\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u5b8f\u5757\uff0c\u6bcf\u4e2a\u5b8f\u5757\u4e2d\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u5fae\u5757\uff0c\u6bcf\u4e2a\u5fae\u5757\u5305\u542b\u4e00\u884c\u6216\u8005\u591a\u884c\u3002\u6709\u4e9b\u6570\u636e\u5e93\u5bf9\u8c61\uff08\u4f8b\u5982\u89c6\u56fe\uff09\u7531\u4e8e\u53ea\u6709\u5143\u6570\u636e\u4fe1\u606f\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5b58\u50a8\u5b9e\u9645\u7684\u6570\u636e\u3002 \u4e0d\u540c\u4e8e\u4e00\u4e9b\u4f20\u7edf\u6570\u636e\u5e93\uff0cOceanBase \u6570\u636e\u5e93\u7684\u8868\u7a7a\u95f4\u662f\u7cfb\u7edf\u81ea\u52a8\u7ba1\u7406\u7684\uff0c\u7528\u6237\u4e0d\u9700\u8981\u663e\u5f0f\u521b\u5efa\u548c\u7ba1\u7406\u8868\u7a7a\u95f4\u3002\u4e00\u4e9b\u529f\u80fd\u652f\u6301\u8868\u7a7a\u95f4\u7684\u8bed\u6cd5(\u4f8b\u5982\u4f7f\u7528\u900f\u660e\u52a0\u5bc6\u529f\u80fd\u65f6)\u5141\u8bb8\u7528\u6237\u8bbe\u7f6e\u8868\u7a7a\u95f4\u76f8\u5173\u7684\u5c5e\u6027\u3002 OceanBase\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u67b6\u6784\u7279\u70b9 - \u5177\u5907\u57fa\u4e8e\u539f\u751f\u5206\u5e03\u5f0f\u7684\u6c34\u5e73\u6269\u5c55\u80fd\u529b - \u91c7\u7528\u57fa\u4e8e\u65e0\u5171\u4eab\u96c6\u7fa4\u7684\u5206\u5e03\u5f0f\u67b6\u6784 - \u901a\u8fc7 Paxos \u5171\u8bc6\u534f\u8bae\u5b9e\u73b0\u6570\u636e\u591a\u526f\u672c\u7684\u4e00\u81f4\u6027 \u96c6\u7fa4\u67b6\u6784 \u00b6 \u96c6\u7fa4 OceanBase \u6570\u636e\u5e93\u96c6\u7fa4\u7531\u4e00\u4e2a\u6216\u591a\u4e2a Region \u7ec4\u6210\uff0c Region \u7531\u4e00\u4e2a\u6216\u591a\u4e2a Zone \u7ec4\u6210, Zone \u7531\u4e00\u4e2a\u6216\u591a\u4e2a OBServer \u7ec4\u6210\uff0c\u6bcf\u4e2a OBServer \u6709\u82e5\u5e72\u4e2a Partition \u7684 Replica Region Region \u5bf9\u5e94\u7269\u7406\u4e0a\u7684\u4e00\u4e2a\u57ce\u5e02\u6216\u5730\u57df\uff0c\u5f53 OceanBase \u6570\u636e\u5e93\u96c6\u7fa4\u7531\u591a\u4e2a Region \u7ec4\u6210\u65f6\uff0c\u6570\u636e\u5e93\u7684\u6570\u636e\u548c\u670d\u52a1\u80fd\u529b\u5c31\u5177\u5907\u5730\u57df\u7ea7\u5bb9\u707e\u80fd\u529b\uff1b \u5f53\u96c6\u7fa4\u53ea\u6709\u4e00\u4e2a Region \u65f6\uff0c\u5982\u679c\u51fa\u73b0\u6574\u4e2a\u57ce\u5e02\u7ea7\u522b\u7684\u6545\u969c\uff0c\u5219\u4f1a\u5f71\u54cd\u6570\u636e\u5e93\u7684\u6570\u636e\u548c\u670d\u52a1\u80fd\u529b\u3002 Zone Zone\u4e00\u822c\u60c5\u51b5(\u4e0d\u8003\u8651\u673a\u623f\u7ea7\u5bb9\u707e\u53ef\u90e8\u7f72\u4e00\u4e2d\u5fc3\u4e09\u526f\u672c)\u4e0b\u5bf9\u5e94\u4e00\u4e2a\u6709\u72ec\u7acb\u7f51\u7edc\u548c\u4f9b\u7535\u5bb9\u707e\u80fd\u529b\u7684\u6570\u636e\u4e2d\u5fc3 \u5728\u4e00\u4e2a Region \u5185\u7684\u591a\u4e2a Zone \u95f4 OceanBase \u6570\u636e\u5e93\u96c6\u7fa4\u62e5\u6709 Zone \u6545\u969c\u65f6\u7684\u5bb9\u707e\u80fd\u529b\u3002 OBServer \u4e00\u53f0\u7269\u7406\u673a\u4e0a\u53ef\u4ee5\u90e8\u7f72\u4e00\u4e2a\u6216\u8005\u591a\u4e2a OBServer (\u901a\u5e38\u60c5\u51b5\u4e0b\u4e00\u53f0\u7269\u7406\u673a\u53ea\u90e8\u7f72\u4e00\u4e2a OBServer )\u3002 Server\u7531\u5176IP\u5730\u5740\u548c\u670d\u52a1\u7aef\u53e3\u552f\u4e00\u6807\u8bc6\u3002 Partition & Replica \u4ee5\u5206\u533a(Partition)\u4e3a\u5355\u4f4d\u7ec4\u7ec7\u7528\u6237\u6570\u636e\uff0c\u5206\u533a\u5728\u4e0d\u540c\u673a\u5668\u4e0a\u7684\u6570\u636e\u62f7\u8d1d\u79f0\u4e3a\u526f\u672c(Replica)\u3002 \u540c\u4e00\u5206\u533a\u7684\u591a\u4e2a\u526f\u672c\u4f7f\u7528Paxos\u4e00\u81f4\u6027\u534f\u8bae\u4fdd\u8bc1\u526f\u672c\u7684\u5f3a\u4e00\u81f4\uff0c\u6bcf\u4e2a\u5206\u533a\u548c\u5b83\u7684\u526f\u672c\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684 Paxos \u7ec4\uff0c\u5176\u4e2d\u4e00\u4e2a\u5206\u533a\u4e3a\u4e3b\u526f\u672c(Leader)\uff0c\u5176\u5b83\u5206\u533a\u4e3a\u4ece\u526f\u672c(Follower)\u3002 \u4e3b\u526f\u672c\u5177\u5907\u5f3a\u4e00\u81f4\u6027\u8bfb\u548c\u5199\u80fd\u529b\uff0c\u4ece\u526f\u672c\u5177\u5907\u5f31\u4e00\u81f4\u6027\u8bfb\u80fd\u529b\u3002 RootService(\u603b\u63a7\u670d\u52a1) \u8fd0\u884c\u5728\u67d0\u4e2aOBServer\u4e0a\u3002\u4e3b\u8981\u63d0\u4f9b \u8d44\u6e90\u7ba1\u7406 \u3001 \u8d1f\u8f7d\u5747\u8861 \u3001 schema\u7ba1\u7406 \u7b49\u529f\u80fd \u6545\u969c\u65f6\uff0c\u5176\u4f59OBServer\u4f1a\u9009\u4e3e\u51fa\u6765\u65b0\u7684RootService Locality \u79df\u6237\u4e0b\u5206\u533a\u5728\u5404\u4e2aZone\u4e0a\u7684\u526f\u672c\u7c7b\u578b\u548c\u526f\u672c\u5206\u5e03 PrimaryZone \u7528\u6237\u53ef\u901a\u8fc7\u4e00\u4e2a\u79df\u6237\u7ea7\u7684\u914d\u7f6e\uff0c\u4f7f\u79df\u6237\u4e0b\u5206\u533a Leader \u5206\u5e03\u5728\u6307\u5b9a\u7684 Zone \u4e0a\uff0c\u6b64\u65f6\u79f0 Leader \u6240\u5728\u7684 Zone \u4e3a PrimaryZone\u3002 PrimaryZone \u662f\u4e00\u4e2a Zone \u96c6\u5408\uff0c\u7528\u5206\u53f7(;)\u5206\u5272\u8868\u793a\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u7528\u9017\u53f7(,)\u5206\u9694\u8868\u793a\u76f8\u540c\u7684\u4f18\u5148\u7ea7\u3002 RootService \u4f1a\u6839\u636e\u7528\u6237\u8bbe\u7f6e\u7684 PrimaryZone\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u9ad8\u4f4e\u987a\u5e8f\uff0c\u5c3d\u53ef\u80fd\u628a\u5206\u533a Leader \u8c03\u5ea6\u5230\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684 Zone \u5185\uff0c\u5e76\u5728\u540c\u4e00\u4f18\u5148\u7ea7\u7684 Zone \u95f4\u5c06 Leader \u6253\u6563\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u3002 \u4e0d\u8bbe\u7f6e PrimaryZone \u7684 \u573a\u5408\uff0c\u4f1a\u8ba4\u4e3a\u79df\u6237\u7684\u6240\u6709 Zone \u90fd\u662f\u540c\u4e00\u4f18\u5148\u7ea7\uff0cRootService \u4f1a\u628a\u79df\u6237\u5206\u533a Leader \u6253\u6563\u5728\u6240\u6709 Zone \u5185\u7684 \u673a\u5668\u3002 2 \u6570\u636e\u5206\u533a\u548c\u5206\u533a\u526f\u672c \u00b6 OceanBase \u6570\u636e\u5e93\u53c2\u8003\u4f20\u7edf\u6570\u636e\u5e93\u5206\u533a\u8868\u7684\u6982\u5ff5\uff0c\u628a\u4e00\u5f20\u8868\u683c\u7684\u6570\u636e\u5212\u5206\u6210\u4e0d\u540c\u7684\u5206\u533a\uff08Partition\uff09\u3002 \u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\uff0c\u4e3a\u4fdd\u8bc1\u6570\u636e\u8bfb\u5199\u670d\u52a1\u7684\u9ad8\u53ef\u7528\uff0cOceanBase \u6570\u636e\u5e93\u4f1a\u628a\u540c\u4e00\u4e2a\u5206\u533a\u7684\u6570\u636e\u62f7\u8d1d\u5230\u591a\u4e2a\u673a\u5668\u3002 \u4e0d\u540c\u673a\u5668\u540c\u4e00\u4e2a\u5206\u533a\u7684\u6570\u636e\u62f7\u8d1d\u79f0\u4e3a\u526f\u672c\uff08Replica\uff09\u3002 \u540c\u4e00\u5206\u533a\u7684\u591a\u4e2a\u526f\u672c\u4f7f\u7528 Paxos \u4e00\u81f4\u6027\u534f\u8bae\u4fdd\u8bc1\u526f\u672c\u7684\u5f3a\u4e00\u81f4\uff0c\u6bcf\u4e2a\u5206\u533a\u548c\u5b83\u7684\u526f\u672c\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684 Paxos \u7ec4\uff0c\u5176\u4e2d\u4e00\u4e2a\u5206\u533a\u4e3a\u4e3b\u5206\u533a\uff08Leader\uff09\uff0c\u5176\u5b83\u5206\u533a\u4e3a\u5907\u5206\u533a\uff08Follower\uff09\u3002\u4e3b\u5206\u533a\u5177\u5907\u5f3a\u4e00\u81f4\u6027\u8bfb\u548c\u5199\u80fd\u529b\uff0c\u5907\u5206\u533a\u5177\u5907\u5f31\u4e00\u81f4\u6027\u8bfb\u80fd\u529b\u3002 \u5206\u533a Partition \u540c\u4e00\u5f20\u8868\u6c34\u5e73\u62c6\u5206\u7684\u4e0d\u540c\u5b50\u8868\u79f0\u4e4b\u4e3a\u5206\u533a \u526f\u672c \u4e0d\u540c\u673a\u5668\u540c\u4e00\u4e2a\u5206\u533a\u7684\u6570\u636e\u62f7\u8d1d\u79f0\u4e3a\u526f\u672c Replica LocationCache \u5206\u533a\u7684\u4f4d\u7f6e\u4fe1\u606f\u5373\u79f0\u4e3a Location \u7528\u4e8eSQL\u8bf7\u6c42\u6267\u884c\u8fc7\u7a0b\u4e2d\u67e5\u8be2\u5206\u533a\u7684\u4f4d\u7f6e\u4fe1\u606f \u5237\u65b0\u53ca\u7f13\u5b58\u672c\u673a\u9700\u8981\u7684\u5206\u533a Location \u7684\u670d\u52a1\u79f0\u4e4b\u4e3a LocationCache \u5f53\u524d\uff0cOceanBase\u6570\u636e\u5e93\u652f\u6301\u4ee5\u4e0b\u56db\u79cd\u7c7b\u578b\u7684\u526f\u672c \u5168\u80fd\u578b\u526f\u672c(FULL/F) \u65e5\u5fd7\u578b\u526f\u672c(LOGONLY/L) \u52a0\u5bc6\u6295\u7968\u578b\u526f\u672c(ENCRYPTVOTE/E) \u53ea\u8bfb\u578b\u526f\u672c(READONLY/R) \u5206\u5e03\u5f0f\u4e00\u81f4\u6027\u534f\u8bae \u4f7f\u7528 Paxos\u534f\u8bae \u5728\u540c\u4e00\u5206\u533a\u5404\u526f\u672c\u95f4\u540c\u6b65\u4e8b\u52a1\u65e5\u5fd7\uff0c\u591a\u6570\u6d3e\u540c\u6b65\u6210\u529f\u624d\u80fd\u63d0\u4ea4 \u6570\u636e\u5747\u8861 \u6700\u7ec8\u4f1a\u4f7f\u6240\u6709\u673a\u5668\u7684\u5404\u7c7b\u578b\u8d44\u6e90\u5360\u7528\u90fd\u5904\u4e8e\u4e00\u79cd\u6bd4\u8f83\u5747\u8861\u7684\u72b6\u6001\uff0c\u5145\u5206\u5229\u7528\u6bcf\u53f0\u673a\u5668\u7684\u6240\u6709\u8d44\u6e90\u3002 \u526f\u672c\u5747\u8861 Unit\u8fc1\u79fb\u3001\u526f\u672c\u590d\u5236\u6216\u8fc1\u79fb Leader\u5747\u8861 \u5728\u526f\u672c\u5747\u8861\u7684\u57fa\u7840\u4e0a,\u5747\u8861\u5404\u673a\u5668\u5206\u533a Leader \u7684\u6570\u76ee \u652f\u6301\u5206\u533a\u88c1\u526a\u548c\u5206\u533a\u611f\u77e5JOIN\u3002\u5982\u679c\u5206\u533a\u4e2a\u6570\u8fc7\u5c11\uff0c\u4f1a\u5bfc\u81f4\u8d44\u6e90\u4e0d\u8db3\uff0c\u6269\u5bb9\u590d\u6742\uff1b\u5f53\u5206\u533a\u4e2a\u6570\u8fc7\u591a\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5206\u5e03\u5f0f\u67e5\u8be2\u8fc7\u591a\uff0c\u6d88\u8017\u8d44\u6e90\u3002 3 \u52a8\u6001\u6269\u5bb9\u548c\u7f29\u5bb9 \u00b6 \u5f39\u6027\u6269\u7f29\u5bb9\u5206\u4e3a\u5782\u76f4\u6269\u5bb9\uff0c\u6c34\u5e73\u6269\u7f29\u5bb9\u548c\u6309\u9700\u9884\u6269\u7f29\u5bb9\u3002\u5782\u76f4\u6269\u5bb9\u53ef\u4ee5\u5728\u7ebf\u66ff\u6362\u8282\u70b9\uff0c\u52a8\u6001\u8c03\u6574 UNIT \u89c4\u683c\u3002\u6c34\u5e73\u6269\u7f29\u5bb9\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u5220\u9664\u8282\u70b9\uff0c\u52a8\u6001\u8c03\u6574\u79df\u6237 UNIT \u6570\u91cf\uff0c\u652f\u6301\u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\u3002\u6309\u9700\u6269\u7f29\u5bb9\u80fd\u591f\u5feb\u901f\u53ef\u9760\u5f39\u5165\u5f39\u51fa\uff0c\u4e3b\u8981\u7528\u4e8e\u5927\u4fc3\u5982\u9ed1\u4e94\u3001\u658b\u6708\u7b49\u8d44\u6e90\u77ed\u671f\u6269\u5bb9\u573a\u666f\u3002","title":"01 \u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61"},{"location":"oceanbase/4%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/01%20%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/#_1","text":"","title":"\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61"},{"location":"oceanbase/4%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/01%20%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/#_2","text":"\u4ec0\u4e48\u662f\u6570\u636e\u5e93\u5bf9\u8c61 \u6570\u636e\u5e93\u5bf9\u8c61\u662f\u6570\u636e\u5e93\u7684\u7ec4\u6210\u90e8\u5206\uff0c\u662f\u6307\u5728\u6570\u636e\u5e93\u4e2d\u53ef\u4ee5\u901a\u8fc7 SQL \u8fdb\u884c\u64cd\u4f5c\u548c\u4f7f\u7528\u7684\u5bf9\u8c61\u3002 \u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61 \u76f8\u8f83\u4e8e\u4f20\u7edf\u96c6\u4e2d\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61,\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u5bf9\u8c61\u53ef\u6269\u5c55\u6027\u66f4\u9ad8 OceanBase\u6570\u636e\u5e93\u5c06\u4e00\u4e9b\u6570\u636e\u5e93\u5bf9\u8c61\u7684\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2a\u6216\u8005\u591a\u4e2aSSTable\u4e2d. \u4e00\u4e2aSSTable\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u5b8f\u5757\uff0c\u6bcf\u4e2a\u5b8f\u5757\u4e2d\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u5fae\u5757\uff0c\u6bcf\u4e2a\u5fae\u5757\u5305\u542b\u4e00\u884c\u6216\u8005\u591a\u884c\u3002\u6709\u4e9b\u6570\u636e\u5e93\u5bf9\u8c61\uff08\u4f8b\u5982\u89c6\u56fe\uff09\u7531\u4e8e\u53ea\u6709\u5143\u6570\u636e\u4fe1\u606f\uff0c\u6240\u4ee5\u4e0d\u4f1a\u5b58\u50a8\u5b9e\u9645\u7684\u6570\u636e\u3002 \u4e0d\u540c\u4e8e\u4e00\u4e9b\u4f20\u7edf\u6570\u636e\u5e93\uff0cOceanBase \u6570\u636e\u5e93\u7684\u8868\u7a7a\u95f4\u662f\u7cfb\u7edf\u81ea\u52a8\u7ba1\u7406\u7684\uff0c\u7528\u6237\u4e0d\u9700\u8981\u663e\u5f0f\u521b\u5efa\u548c\u7ba1\u7406\u8868\u7a7a\u95f4\u3002\u4e00\u4e9b\u529f\u80fd\u652f\u6301\u8868\u7a7a\u95f4\u7684\u8bed\u6cd5(\u4f8b\u5982\u4f7f\u7528\u900f\u660e\u52a0\u5bc6\u529f\u80fd\u65f6)\u5141\u8bb8\u7528\u6237\u8bbe\u7f6e\u8868\u7a7a\u95f4\u76f8\u5173\u7684\u5c5e\u6027\u3002 OceanBase\u5206\u5e03\u5f0f\u6570\u636e\u5e93\u67b6\u6784\u7279\u70b9 - \u5177\u5907\u57fa\u4e8e\u539f\u751f\u5206\u5e03\u5f0f\u7684\u6c34\u5e73\u6269\u5c55\u80fd\u529b - \u91c7\u7528\u57fa\u4e8e\u65e0\u5171\u4eab\u96c6\u7fa4\u7684\u5206\u5e03\u5f0f\u67b6\u6784 - \u901a\u8fc7 Paxos \u5171\u8bc6\u534f\u8bae\u5b9e\u73b0\u6570\u636e\u591a\u526f\u672c\u7684\u4e00\u81f4\u6027","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"oceanbase/4%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/01%20%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/#_3","text":"\u96c6\u7fa4 OceanBase \u6570\u636e\u5e93\u96c6\u7fa4\u7531\u4e00\u4e2a\u6216\u591a\u4e2a Region \u7ec4\u6210\uff0c Region \u7531\u4e00\u4e2a\u6216\u591a\u4e2a Zone \u7ec4\u6210, Zone \u7531\u4e00\u4e2a\u6216\u591a\u4e2a OBServer \u7ec4\u6210\uff0c\u6bcf\u4e2a OBServer \u6709\u82e5\u5e72\u4e2a Partition \u7684 Replica Region Region \u5bf9\u5e94\u7269\u7406\u4e0a\u7684\u4e00\u4e2a\u57ce\u5e02\u6216\u5730\u57df\uff0c\u5f53 OceanBase \u6570\u636e\u5e93\u96c6\u7fa4\u7531\u591a\u4e2a Region \u7ec4\u6210\u65f6\uff0c\u6570\u636e\u5e93\u7684\u6570\u636e\u548c\u670d\u52a1\u80fd\u529b\u5c31\u5177\u5907\u5730\u57df\u7ea7\u5bb9\u707e\u80fd\u529b\uff1b \u5f53\u96c6\u7fa4\u53ea\u6709\u4e00\u4e2a Region \u65f6\uff0c\u5982\u679c\u51fa\u73b0\u6574\u4e2a\u57ce\u5e02\u7ea7\u522b\u7684\u6545\u969c\uff0c\u5219\u4f1a\u5f71\u54cd\u6570\u636e\u5e93\u7684\u6570\u636e\u548c\u670d\u52a1\u80fd\u529b\u3002 Zone Zone\u4e00\u822c\u60c5\u51b5(\u4e0d\u8003\u8651\u673a\u623f\u7ea7\u5bb9\u707e\u53ef\u90e8\u7f72\u4e00\u4e2d\u5fc3\u4e09\u526f\u672c)\u4e0b\u5bf9\u5e94\u4e00\u4e2a\u6709\u72ec\u7acb\u7f51\u7edc\u548c\u4f9b\u7535\u5bb9\u707e\u80fd\u529b\u7684\u6570\u636e\u4e2d\u5fc3 \u5728\u4e00\u4e2a Region \u5185\u7684\u591a\u4e2a Zone \u95f4 OceanBase \u6570\u636e\u5e93\u96c6\u7fa4\u62e5\u6709 Zone \u6545\u969c\u65f6\u7684\u5bb9\u707e\u80fd\u529b\u3002 OBServer \u4e00\u53f0\u7269\u7406\u673a\u4e0a\u53ef\u4ee5\u90e8\u7f72\u4e00\u4e2a\u6216\u8005\u591a\u4e2a OBServer (\u901a\u5e38\u60c5\u51b5\u4e0b\u4e00\u53f0\u7269\u7406\u673a\u53ea\u90e8\u7f72\u4e00\u4e2a OBServer )\u3002 Server\u7531\u5176IP\u5730\u5740\u548c\u670d\u52a1\u7aef\u53e3\u552f\u4e00\u6807\u8bc6\u3002 Partition & Replica \u4ee5\u5206\u533a(Partition)\u4e3a\u5355\u4f4d\u7ec4\u7ec7\u7528\u6237\u6570\u636e\uff0c\u5206\u533a\u5728\u4e0d\u540c\u673a\u5668\u4e0a\u7684\u6570\u636e\u62f7\u8d1d\u79f0\u4e3a\u526f\u672c(Replica)\u3002 \u540c\u4e00\u5206\u533a\u7684\u591a\u4e2a\u526f\u672c\u4f7f\u7528Paxos\u4e00\u81f4\u6027\u534f\u8bae\u4fdd\u8bc1\u526f\u672c\u7684\u5f3a\u4e00\u81f4\uff0c\u6bcf\u4e2a\u5206\u533a\u548c\u5b83\u7684\u526f\u672c\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684 Paxos \u7ec4\uff0c\u5176\u4e2d\u4e00\u4e2a\u5206\u533a\u4e3a\u4e3b\u526f\u672c(Leader)\uff0c\u5176\u5b83\u5206\u533a\u4e3a\u4ece\u526f\u672c(Follower)\u3002 \u4e3b\u526f\u672c\u5177\u5907\u5f3a\u4e00\u81f4\u6027\u8bfb\u548c\u5199\u80fd\u529b\uff0c\u4ece\u526f\u672c\u5177\u5907\u5f31\u4e00\u81f4\u6027\u8bfb\u80fd\u529b\u3002 RootService(\u603b\u63a7\u670d\u52a1) \u8fd0\u884c\u5728\u67d0\u4e2aOBServer\u4e0a\u3002\u4e3b\u8981\u63d0\u4f9b \u8d44\u6e90\u7ba1\u7406 \u3001 \u8d1f\u8f7d\u5747\u8861 \u3001 schema\u7ba1\u7406 \u7b49\u529f\u80fd \u6545\u969c\u65f6\uff0c\u5176\u4f59OBServer\u4f1a\u9009\u4e3e\u51fa\u6765\u65b0\u7684RootService Locality \u79df\u6237\u4e0b\u5206\u533a\u5728\u5404\u4e2aZone\u4e0a\u7684\u526f\u672c\u7c7b\u578b\u548c\u526f\u672c\u5206\u5e03 PrimaryZone \u7528\u6237\u53ef\u901a\u8fc7\u4e00\u4e2a\u79df\u6237\u7ea7\u7684\u914d\u7f6e\uff0c\u4f7f\u79df\u6237\u4e0b\u5206\u533a Leader \u5206\u5e03\u5728\u6307\u5b9a\u7684 Zone \u4e0a\uff0c\u6b64\u65f6\u79f0 Leader \u6240\u5728\u7684 Zone \u4e3a PrimaryZone\u3002 PrimaryZone \u662f\u4e00\u4e2a Zone \u96c6\u5408\uff0c\u7528\u5206\u53f7(;)\u5206\u5272\u8868\u793a\u4e0d\u540c\u7684\u4f18\u5148\u7ea7\uff0c\u7528\u9017\u53f7(,)\u5206\u9694\u8868\u793a\u76f8\u540c\u7684\u4f18\u5148\u7ea7\u3002 RootService \u4f1a\u6839\u636e\u7528\u6237\u8bbe\u7f6e\u7684 PrimaryZone\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u9ad8\u4f4e\u987a\u5e8f\uff0c\u5c3d\u53ef\u80fd\u628a\u5206\u533a Leader \u8c03\u5ea6\u5230\u66f4\u9ad8\u4f18\u5148\u7ea7\u7684 Zone \u5185\uff0c\u5e76\u5728\u540c\u4e00\u4f18\u5148\u7ea7\u7684 Zone \u95f4\u5c06 Leader \u6253\u6563\u5728\u4e0d\u540c\u7684\u673a\u5668\u4e0a\u3002 \u4e0d\u8bbe\u7f6e PrimaryZone \u7684 \u573a\u5408\uff0c\u4f1a\u8ba4\u4e3a\u79df\u6237\u7684\u6240\u6709 Zone \u90fd\u662f\u540c\u4e00\u4f18\u5148\u7ea7\uff0cRootService \u4f1a\u628a\u79df\u6237\u5206\u533a Leader \u6253\u6563\u5728\u6240\u6709 Zone \u5185\u7684 \u673a\u5668\u3002","title":"\u96c6\u7fa4\u67b6\u6784"},{"location":"oceanbase/4%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/01%20%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/#2","text":"OceanBase \u6570\u636e\u5e93\u53c2\u8003\u4f20\u7edf\u6570\u636e\u5e93\u5206\u533a\u8868\u7684\u6982\u5ff5\uff0c\u628a\u4e00\u5f20\u8868\u683c\u7684\u6570\u636e\u5212\u5206\u6210\u4e0d\u540c\u7684\u5206\u533a\uff08Partition\uff09\u3002 \u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e0b\uff0c\u4e3a\u4fdd\u8bc1\u6570\u636e\u8bfb\u5199\u670d\u52a1\u7684\u9ad8\u53ef\u7528\uff0cOceanBase \u6570\u636e\u5e93\u4f1a\u628a\u540c\u4e00\u4e2a\u5206\u533a\u7684\u6570\u636e\u62f7\u8d1d\u5230\u591a\u4e2a\u673a\u5668\u3002 \u4e0d\u540c\u673a\u5668\u540c\u4e00\u4e2a\u5206\u533a\u7684\u6570\u636e\u62f7\u8d1d\u79f0\u4e3a\u526f\u672c\uff08Replica\uff09\u3002 \u540c\u4e00\u5206\u533a\u7684\u591a\u4e2a\u526f\u672c\u4f7f\u7528 Paxos \u4e00\u81f4\u6027\u534f\u8bae\u4fdd\u8bc1\u526f\u672c\u7684\u5f3a\u4e00\u81f4\uff0c\u6bcf\u4e2a\u5206\u533a\u548c\u5b83\u7684\u526f\u672c\u6784\u6210\u4e00\u4e2a\u72ec\u7acb\u7684 Paxos \u7ec4\uff0c\u5176\u4e2d\u4e00\u4e2a\u5206\u533a\u4e3a\u4e3b\u5206\u533a\uff08Leader\uff09\uff0c\u5176\u5b83\u5206\u533a\u4e3a\u5907\u5206\u533a\uff08Follower\uff09\u3002\u4e3b\u5206\u533a\u5177\u5907\u5f3a\u4e00\u81f4\u6027\u8bfb\u548c\u5199\u80fd\u529b\uff0c\u5907\u5206\u533a\u5177\u5907\u5f31\u4e00\u81f4\u6027\u8bfb\u80fd\u529b\u3002 \u5206\u533a Partition \u540c\u4e00\u5f20\u8868\u6c34\u5e73\u62c6\u5206\u7684\u4e0d\u540c\u5b50\u8868\u79f0\u4e4b\u4e3a\u5206\u533a \u526f\u672c \u4e0d\u540c\u673a\u5668\u540c\u4e00\u4e2a\u5206\u533a\u7684\u6570\u636e\u62f7\u8d1d\u79f0\u4e3a\u526f\u672c Replica LocationCache \u5206\u533a\u7684\u4f4d\u7f6e\u4fe1\u606f\u5373\u79f0\u4e3a Location \u7528\u4e8eSQL\u8bf7\u6c42\u6267\u884c\u8fc7\u7a0b\u4e2d\u67e5\u8be2\u5206\u533a\u7684\u4f4d\u7f6e\u4fe1\u606f \u5237\u65b0\u53ca\u7f13\u5b58\u672c\u673a\u9700\u8981\u7684\u5206\u533a Location \u7684\u670d\u52a1\u79f0\u4e4b\u4e3a LocationCache \u5f53\u524d\uff0cOceanBase\u6570\u636e\u5e93\u652f\u6301\u4ee5\u4e0b\u56db\u79cd\u7c7b\u578b\u7684\u526f\u672c \u5168\u80fd\u578b\u526f\u672c(FULL/F) \u65e5\u5fd7\u578b\u526f\u672c(LOGONLY/L) \u52a0\u5bc6\u6295\u7968\u578b\u526f\u672c(ENCRYPTVOTE/E) \u53ea\u8bfb\u578b\u526f\u672c(READONLY/R) \u5206\u5e03\u5f0f\u4e00\u81f4\u6027\u534f\u8bae \u4f7f\u7528 Paxos\u534f\u8bae \u5728\u540c\u4e00\u5206\u533a\u5404\u526f\u672c\u95f4\u540c\u6b65\u4e8b\u52a1\u65e5\u5fd7\uff0c\u591a\u6570\u6d3e\u540c\u6b65\u6210\u529f\u624d\u80fd\u63d0\u4ea4 \u6570\u636e\u5747\u8861 \u6700\u7ec8\u4f1a\u4f7f\u6240\u6709\u673a\u5668\u7684\u5404\u7c7b\u578b\u8d44\u6e90\u5360\u7528\u90fd\u5904\u4e8e\u4e00\u79cd\u6bd4\u8f83\u5747\u8861\u7684\u72b6\u6001\uff0c\u5145\u5206\u5229\u7528\u6bcf\u53f0\u673a\u5668\u7684\u6240\u6709\u8d44\u6e90\u3002 \u526f\u672c\u5747\u8861 Unit\u8fc1\u79fb\u3001\u526f\u672c\u590d\u5236\u6216\u8fc1\u79fb Leader\u5747\u8861 \u5728\u526f\u672c\u5747\u8861\u7684\u57fa\u7840\u4e0a,\u5747\u8861\u5404\u673a\u5668\u5206\u533a Leader \u7684\u6570\u76ee \u652f\u6301\u5206\u533a\u88c1\u526a\u548c\u5206\u533a\u611f\u77e5JOIN\u3002\u5982\u679c\u5206\u533a\u4e2a\u6570\u8fc7\u5c11\uff0c\u4f1a\u5bfc\u81f4\u8d44\u6e90\u4e0d\u8db3\uff0c\u6269\u5bb9\u590d\u6742\uff1b\u5f53\u5206\u533a\u4e2a\u6570\u8fc7\u591a\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5206\u5e03\u5f0f\u67e5\u8be2\u8fc7\u591a\uff0c\u6d88\u8017\u8d44\u6e90\u3002","title":"2 \u6570\u636e\u5206\u533a\u548c\u5206\u533a\u526f\u672c"},{"location":"oceanbase/4%20%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/01%20%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E8%B1%A1/#3","text":"\u5f39\u6027\u6269\u7f29\u5bb9\u5206\u4e3a\u5782\u76f4\u6269\u5bb9\uff0c\u6c34\u5e73\u6269\u7f29\u5bb9\u548c\u6309\u9700\u9884\u6269\u7f29\u5bb9\u3002\u5782\u76f4\u6269\u5bb9\u53ef\u4ee5\u5728\u7ebf\u66ff\u6362\u8282\u70b9\uff0c\u52a8\u6001\u8c03\u6574 UNIT \u89c4\u683c\u3002\u6c34\u5e73\u6269\u7f29\u5bb9\u53ef\u4ee5\u52a8\u6001\u6dfb\u52a0\u5220\u9664\u8282\u70b9\uff0c\u52a8\u6001\u8c03\u6574\u79df\u6237 UNIT \u6570\u91cf\uff0c\u652f\u6301\u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\u3002\u6309\u9700\u6269\u7f29\u5bb9\u80fd\u591f\u5feb\u901f\u53ef\u9760\u5f39\u5165\u5f39\u51fa\uff0c\u4e3b\u8981\u7528\u4e8e\u5927\u4fc3\u5982\u9ed1\u4e94\u3001\u658b\u6708\u7b49\u8d44\u6e90\u77ed\u671f\u6269\u5bb9\u573a\u666f\u3002","title":"3 \u52a8\u6001\u6269\u5bb9\u548c\u7f29\u5bb9"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/","text":"1.\u7b80\u4ecb \u00b6 \u57fa\u672c\u6982\u5ff5 \u00b6 \u539f\u5b50\u6027 \u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u4fdd\u8bc1\u4e8b\u52a1\u7684\u539f\u5b50\u6027 \u4e00\u81f4\u6027 \u4e8b\u52a1\u5fc5\u987b\u662f\u4f7f\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u53d8\u5230\u53e6\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u3002\u4e00\u81f4\u6027\u4e0e\u539f\u5b50\u6027\u662f\u5bc6\u5207\u76f8\u5173\u7684 \u9694\u79bb\u6027 \u5728MySQL\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301 Read Committed \u9694\u79bb\u7ea7\u522b\u548c Repeatable Read \u9694\u79bb \u7ea7\u522b\u3002 \u6301\u4e45\u5316 redo log\u8bb0\u5f55\u6570\u636e\u4fee\u6539,WAL\u673a\u5236\u4fdd\u8bc1\u5b95\u673a\u6062\u590d\uff0cpaxos\u4fdd\u8bc1\u591a\u526f\u672c\u6570\u636e\u540c\u6b65 \u6267\u884c\u6d41\u7a0b \u00b6 \u521b\u5efa\u5168\u5c40\u4e8b\u52a1ID \u8bc6\u522b\u5206\u533a\u6570\u636e \u521b\u5efa\u5206\u533a\u5bf9\u5e94\u7684\u4e0a\u4e0b\u6587(\u8bb0\u5f55\u4fee\u6539) \u7b49\u5f85commit/rollback \u6301\u4e45\u5316\u5230clog ddl\u53d1\u8d77\u9690\u5f0fcommit,\u65ad\u5f00\u8fde\u63a5\u53d1\u8d77\u9690\u5f0frollback \u4ee5\u4e00\u4e2a\u5206\u533a\u7684\u4e00\u6761\u4e8b\u52a1\u65e5\u5fd7\u4e3a\u4f8b\uff0c\u6b63\u5e38\u7684\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b: \u5728 follower \u4e0a\uff0c\u4f1a\u5bf9\u5df2\u63d0\u4ea4\u7684\u65e5\u5fd7\u5b9e\u65f6\u8fdb\u884c\u56de\u653e\u3002\u56de\u653e\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b: \u5168\u5c40\u65f6\u95f4\u6233 \u00b6 \u5bf9\u4e8e\u7528\u6237\u79df\u6237\u800c\u8a00\uff0c\u79df\u6237\u7ea7\u522b\u5185\u90e8\u8868 __all_dummy \u7684 leader \u4f5c\u4e3a GTS \u670d\u52a1\u63d0\u4f9b\u8005\uff0c\u65f6\u95f4\u6765\u6e90\u4e8e\u8be5leader\u7684\u672c\u5730\u65f6\u949f\u3002GTS \u9ed8\u8ba4\u662f\u4e09\u526f\u672c\u7684\uff0c\u5176\u9ad8\u53ef\u7528\u80fd\u529b\u8ddf\u666e\u901a\u8868\u7684\u80fd\u529b\u4e00\u6837\u3002 \u5bf9\u4e8e\u7cfb\u7edf\u79df\u6237\uff0c\u4f7f\u7528 __all_core_table \u7684 leader \u4f5c\u4e3a GTS \u670d\u52a1\u7684\u63d0\u4f9b\u8005\uff0c\u9ad8\u53ef\u7528\u80fd\u529b\u4e0e\u666e\u901a\u8868\u4e00\u6837 \u65f6\u95f4\u6233\u6b63\u786e\u6027\u4fdd\u8bc1 \u6709\u4e3b\u6539\u9009 \u539f Leader \u4e3b\u52a8\u53d1\u8d77\u6539\u9009\u7684\u573a\u666f\uff0c\u6211\u4eec\u79f0\u4e3a\u6709\u4e3b\u6539\u9009\u3002\u65b0 leader \u4e0a\u4efb\u4e4b\u524d\u5148\u83b7\u53d6\u65e7 leader \u7684\u6700\u5927\u5df2\u7ecf\u6388 \u6743\u7684\u65f6\u95f4\u6233\u4f5c\u4e3a\u65b0 leader \u65f6\u95f4\u6233\u6388\u6743\u7684\u57fa\u51c6\u503c\u3002\u56e0\u6b64\u8be5\u573a\u666f\u4e0b\uff0cGTS \u63d0\u4f9b\u7684\u65f6\u95f4\u6233\u4e0d\u4f1a\u56de\u9000\u3002 \u65e0\u4e3b\u9009\u4e3e \u539f leader \u4e0e\u591a\u6570\u6d3e\u6210\u5458\u53d1\u751f\u7f51\u7edc\u9694\u79bb\uff0c\u7b49 lease \u8fc7\u671f\u4e4b\u540e\uff0c\u539f follower \u4f1a\u91cd\u65b0\u9009\u4e3b\uff0c\u8fd9\u4e00\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec \u79f0\u4e3a\u65e0\u4e3b\u9009\u4e3e\u3002\u9009\u4e3e\u670d\u52a1\u4fdd\u8bc1\u4e86\u65e0\u4e3b\u9009\u4e3e\u573a\u666f\u4e0b\uff0c\u65b0\u65e7 Leader \u7684 lease \u662f\u4e0d\u91cd\u53e0\u7684\uff0c\u56e0\u6b64\u80fd\u591f\u4fdd\u8bc1\u672c\u5730 \u65f6\u949f\u4e00\u5b9a\u5927\u4e8e\u65e7\u4e3b\u63d0\u4f9b\u7684\u6700\u5927\u65f6\u95f4\u6233\u3002\u56e0\u6b64\u65b0 leader \u80fd\u591f\u4fdd\u8bc1 GTS \u63d0\u4f9b\u7684\u65f6\u95f4\u6233\u4e0d\u56de\u9000\u3002 \u4e8b\u52a1\u63a7\u5236 \u00b6 \u4e8b\u52a1\u914d\u7f6e \u5927\u5c0f 2.x\u7248\u672c\u4e0a\u9650\u4e3a100M\uff0c3.x\u4e0d\u505a\u9650\u5236 \u914d\u7f6e(\u79df\u6237\u4f18\u5148) \u79df\u6237\u7ea7\u914d\u7f6e\u9879 _tenant_max_trx_size \u96c6\u7fa4\u7ea7\u914d\u7f6e\u9879 _max_trx_size \u72b6\u6001 \u865a\u62df\u8868 __all_virtual_trans_stat \u91cc\u7684state\u5b57\u6bb5\u6807\u8bc6\u4e86\u4e8b\u52a1\u6240\u5904\u7684\u72b6\u6001 \u8d85\u65f6 \u8bed\u53e5\u8d85\u65f6\u65f6\u95f4,\u7cfb\u7edf\u53d8\u91cfob_query_timeout,\u9ed8\u8ba4\u4e3a10s \u4e8b\u52a1\u8d85\u65f6\u65f6\u95f4,\u7cfb\u7edf\u53d8\u91cfob_trx_timeout,\u4e8b\u52a1\u8d85\u65f6\u65f6\u9700\u5e94\u7528\u4e3b\u52a8\u53d1\u8d77rollback \u4e8b\u52a1\u8d85\u65f6\u81ea\u52a8\u56de\u6eda\u65f6\u95f4,\u7cfb\u7edf\u53d8\u91cf ob_trx_idle_timeout,\u5373session\u4e0a\u4e00\u4e2a\u4e8b\u52a1\u5904\u4e8e\u7684 IDLE(\u7a7a\u95f2) \u72b6\u6001\u7684\u6700\u957f\u65f6\u95f4 Savepoint \u4e8b\u52a1\u6267\u884c\u4e2d\u7684\u4fdd\u5b58\u70b9\uff0c\u53ef\u56de\u6eda\u81f3\u4fdd\u5b58\u70b9 redo log \u00b6 \u4ee5\u7269\u7406\u65e5\u5fd7\u7684\u5f62\u5f0f\u8bb0\u5f55\u6570\u636e\u4fee\u6539\u5386\u53f2(\u64cd\u4f5c\u7ed3\u679c) \u9075\u5faaWAL(write-ahead logging)\u539f\u5219, \u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\u5c06 Redo \u65e5\u5fd7\u6301\u4e45\u5316\u81f3clog, \u7528\u4e8e\u5b95\u673a\u6062\u590d \u91c7\u7528 Multi-Paxos \u534f\u8bae \u8fdb\u884c\u591a\u526f\u672c\u540c\u6b65, \u63d0\u4ea4\u4e8b\u52a1\u9700\u8981\u4fdd\u8bc1redo\u65e5\u5fd7\u5df2\u540c\u6b65\u5230\u591a\u6570\u6d3e\u7684\u526f\u672c\u4e0a\u65f6\u624d\u80fd\u6210\u529f, \u6700\u7ec8\u4f1a\u540c\u6b65\u5230\u6240\u6709\u526f\u672c\u4e0a \u65e5\u5fd7\u6587\u4ef6 \u00b6 \u7b80\u8ff0 \u5206\u533a\u7ea7\u522b\u7684\u65e5\u5fd7\u6d41,\u4fdd\u8bc1\u6709\u5e8f\u8fde\u7eed,\u6700\u7ec8\u6d41\u5165\u65e5\u5fd7\u6587\u4ef6 \u7c7b\u578b Clog(commit log) \u8bb0\u5f55redoLog\u5185\u5bb9,\u540c\u6b65\u591a\u526f\u672c ilog(index log) Clog\u7684\u7d22\u5f15\u6587\u4ef6,\u8bb0\u5f55\u8fde\u7eed\u9012\u589e\u7684Clog\u6587\u4ef6ID \u4ea7\u751f\u548c\u6536\u96c6 \u4e8b\u52a1\u63d0\u4ea4\u65f6\u5c06redolog\u5199\u5165clog,\u4ee52MB\u5927\u5c0f\u4e3a\u9650\u5236,\u4ea4\u4e88clog\u540c\u6b65\u5176\u4f59\u526f\u672c(\u534a\u6570\u4ee5\u4e0a) \u5355\u6761 Redo \u65e5\u5fd7\u805a\u5408\u4e86\u591a\u6b21\u5199\u64cd\u4f5c\u7684\u5185\u5bb9 \u63a7\u5236\u4e0e\u56de\u6536 clog_disk_usage_limit_percentage \u63a7\u5236Clog\u6216ilog\u78c1\u76d8\u7a7a\u95f4\u7684\u4f7f\u7528\u4e0a\u9650 clog_disk_utilization_threshold \u4f7f\u7528\u4e0b\u9650 \u672c\u5730\u4e8b\u52a1\u6982\u8ff0 \u00b6 \u6307\u4e8b\u52a1\u6240\u64cd\u4f5c\u7684\u8868\u7684\u5206\u533aLeader\u5168\u90e8\u5728\u540c\u4e00\u4e2aServer\u4e0a\uff0c\u5e76\u4e14\u4e0eSession\u5efa\u7acb\u7684Server\u5177\u6709\u76f8\u540c\u7684\u4e8b\u52a1 \u5355\u5206\u533a\u4e8b\u52a1 \u4e8b\u52a1\u53ea\u6d89\u53ca\u4e00\u4e2a\u5206\u533a, \u5982\u540c\u4e00\u5f20\u8868\u7684\u540c\u4e00\u4e2a\u5206\u533a \u5355\u673a\u591a\u5206\u533a\u4e8b\u52a1 \u4e8b\u52a1\u53ea\u6d89\u53ca\u591a\u4e2a\u5206\u533a, \u5982\u540c\u4e8b\u52a1\u4e0b\u4e0d\u540c\u8868\u7684\u64cd\u4f5c \u5206\u5e03\u5f0f\u4e8b\u52a1\u6982\u8ff0 \u00b6 \u4e8b\u52a1\u6d89\u53ca\u7684\u5206\u533a\u6570\u91cf\u5927\u4e8e\u4e00\u4e2a \u6216 \u4e8b\u52a1\u6d89\u53ca\u7684\u5206\u533a\u6570\u91cf\u53ea\u6709\u4e00\u4e2a\uff0c\u4e14\u5206\u533aleader\u548c\u4e8b\u52a1session\u4f4d\u7f6e\u4e0d\u5728\u540c\u4e00\u4e2aserver \u4fe9\u9636\u6bb5\u63d0\u4ea4(2PC) \u00b6 \u5f15\u5165\u4e00\u4e2a\u4e2d\u5fc3\u8282\u70b9\u7edf\u4e00\u5904\u7406\u6240\u6709\u8282\u70b9\u7684\u6267\u884c\u903b\u8f91\uff0c\u4ee5\u611f\u77e5\u6bcf\u4e2a\u8282\u70b9\u7684\u4e8b\u52a1\u6267\u884c\u60c5\u51b5\u3002\u8be5\u4e2d\u5fc3\u8282\u70b9\u79f0\u4e3a\u534f\u8c03\u8005(coordinator)\uff0c\u88ab\u534f\u8c03\u8005\u8c03\u5ea6\u7684\u5176\u5b83\u8282\u70b9\u79f0\u4e3a\u53c2\u4e0e\u8005(participant)\u3002 2PC\u5c06\u5206\u5e03\u5f0f\u4e8b\u52a1\u5206\u6210\u4e86\u4e24\u4e2a\u9636\u6bb5\uff0c\u4e24\u4e2a\u9636\u6bb5\u5206\u522b\u4e3a\u63d0\u4ea4\u8bf7\u6c42\uff08\u6295\u7968\uff09\u548c\u63d0\u4ea4\uff08\u6267\u884c\uff09\u3002\u534f\u8c03\u8005\u6839\u636e\u53c2\u4e0e\u8005\u7684\u54cd\u5e94\u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u771f\u6b63\u5730\u6267\u884c\u4e8b\u52a1\u3002\u4e00\u822c\u5730\uff0c\u8fd8\u6709\u4e00\u4e2a\u9884\u5904\u7406\u9636\u6bb5\uff0c\u5305\u62ec\u83b7\u53d6\u884c\u9501\uff0c\u751f\u6210redo Prepare\u9636\u6bb5: 1.\u534f\u8c03\u8005\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001prepare\u8bf7\u6c42\u4e0e\u4e8b\u52a1\u5185\u5bb9\uff0c\u8be2\u95ee\u662f\u5426\u53ef\u4ee5\u51c6\u5907\u4e8b\u52a1\u63d0\u4ea4\uff0c\u5e76\u7b49\u5f85\u53c2\u4e0e\u8005\u7684\u54cd\u5e94\u3002 2.\u53c2\u4e0e\u8005\u6267\u884c\u4e8b\u52a1\u4e2d\u5305\u542b\u7684\u64cd\u4f5c\uff0c\u5e76\u8bb0\u5f55undo\u65e5\u5fd7\uff08\u7528\u4e8e\u56de\u6eda\uff09\u548credo\u65e5\u5fd7\uff08\u7528\u4e8e\u91cd\u653e\uff09\uff0c\u4f46\u4e0d\u771f\u6b63\u63d0\u4ea4\u3002 3.\u53c2\u4e0e\u8005\u5411\u534f\u8c03\u8005\u8fd4\u56de\u4e8b\u52a1\u64cd\u4f5c\u7684\u6267\u884c\u7ed3\u679c\uff0c\u6267\u884c\u6210\u529f\u8fd4\u56deyes\uff0c\u5426\u5219\u8fd4\u56deno\u3002 Commit\u9636\u6bb5: success: \u82e5\u6240\u6709\u53c2\u4e0e\u8005\u90fd\u8fd4\u56deyes\uff0c\u8bf4\u660e\u4e8b\u52a1\u53ef\u4ee5\u63d0\u4ea4\uff1a 1.\u534f\u8c03\u8005\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001commit\u8bf7\u6c42\u3002 2.\u53c2\u4e0e\u8005\u6536\u5230commit\u8bf7\u6c42\u540e\uff0c\u5c06\u4e8b\u52a1\u771f\u6b63\u5730\u63d0\u4ea4\u4e0a\u53bb\uff0c\u5e76\u91ca\u653e\u5360\u7528\u7684\u4e8b\u52a1\u8d44\u6e90\uff0c\u5e76\u5411\u534f\u8c03\u8005\u8fd4\u56deack\u3002 3.\u534f\u8c03\u8005\u6536\u5230\u6240\u6709\u53c2\u4e0e\u8005\u7684ack\u6d88\u606f\uff0c\u4e8b\u52a1\u6210\u529f\u5b8c\u6210\u3002 failed: 1.\u534f\u8c03\u8005\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001rollback\u8bf7\u6c42\u3002 2.\u53c2\u4e0e\u8005\u6536\u5230rollback\u8bf7\u6c42\u540e\uff0c\u6839\u636eundo\u65e5\u5fd7\u56de\u6eda\u5230\u4e8b\u52a1\u6267\u884c\u524d\u7684\u72b6\u6001\uff0c\u91ca\u653e\u5360\u7528\u7684\u4e8b\u52a1\u8d44\u6e90\uff0c\u5e76\u5411\u534f\u8c03\u8005\u8fd4\u56deack\u3002 3.\u534f\u8c03\u8005\u6536\u5230\u6240\u6709\u53c2\u4e0e\u8005\u7684ack\u6d88\u606f\uff0c\u4e8b\u52a1\u56de\u6eda\u5b8c\u6210\u3002 OceanBase\u5bf9\u4f20\u7edf\u76842PC\u6d41\u7a0b\u505a\u4e86\u4f18\u5316\uff0c\u4f20\u7edf\u7684\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u5ef6\u8fdf\u76f8\u5f53\u4e8e 2\u6b21RPC \u548c 4\u6b21\u5199\u65e5\u5fd7 \u64cd\u4f5c\u3002 OceanBase\u91c7\u7528\u534f\u8c03\u8005\u65e0\u72b6\u6001\u8bbe\u8ba1,\u534f\u8c03\u8005\u4e0d\u518d\u7ef4\u62a4\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u72b6\u6001 \u800c\u662f\u5728\u5b95\u673a\u6062\u590d\u65f6,\u901a\u8fc7\u6240\u6709\u53c2\u4e0e\u8005\u7684\u5c40\u90e8\u72b6\u6001\u52a8\u6001\u6784\u9020\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u5168\u5c40\u72b6\u6001\u3002 \u907f\u514d\u4e86\u534f\u8c03\u8005\u5199\u65e5\u5fd7\uff0c\u4e00\u6b21\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u5ef6\u8fdf\u964d\u4f4e\u5230 1\u6b21RPC \u548c 1\u6b21\u5199\u65e5\u5fd7 \u64cd\u4f5c\u3002 \u5176\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a: PREPARE\u9636\u6bb5 \u534f\u8c03\u8005:\u534f\u8c03\u8005\u5411\u6240\u6709\u7684\u53c2\u4e0e\u8005\u53d1\u8d77 prepare request \u53c2\u4e0e\u8005:\u53c2\u4e0e\u8005\u6536\u5230prepare request\u4e4b\u540e\uff0c\u51b3\u5b9a\u662f\u5426\u53ef\u4ee5\u63d0\u4ea4\uff0c\u5982\u679c\u53ef\u4ee5\u5219\u6301\u4e45\u5316prepare log\u5e76\u4e14\u5411\u534f\u8c03\u8005\u8fd4\u56deprepare\u6210\u529f\uff0c\u5426\u5219\u8fd4\u56deprepare\u5931\u8d25\u3002 COMMIT\u9636\u6bb5 \u534f\u8c03\u8005:\u534f\u8c03\u8005\u6536\u9f50\u6240\u6709\u53c2\u4e0e\u8005\u7684 prepare ack \u4e4b\u540e\uff0c\u8fdb\u5165 COMMIT \u72b6\u6001\uff0c\u5411\u7528\u6237\u8fd4\u56de\u4e8b\u52a1 commit \u6210\u529f\uff0c \u7136\u540e\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001\u4e8b\u52a1 commit request\u3002 \u53c2\u4e0e\u8005:\u53c2\u4e0e\u8005\u6536\u5230commit request\u4e4b\u540e\u91ca\u653e\u8d44\u6e90\u89e3\u884c\u9501\uff0c\u7136\u540e\u63d0\u4ea4commit log\uff0c\u65e5\u5fd7\u6301\u4e45\u5316\u5b8c\u6210\u4e4b\u540e\u7ed9\u534f\u8c03\u8005\u56de\u590dcommit ok \u6d88\u606f\uff0c\u6700\u540e\u91ca\u653e\u4e8b\u52a1\u4e0a\u4e0b\u6587\u5e76\u9000\u51fa\u3002 - ps: XA\u4e8b\u52a1\u4e0d\u505a\u8d58\u8ff0\u53ef\u81ea\u884c\u4e86\u89e3 \u9694\u79bb\u7ea7\u522b \u00b6 OceanBase \u6570\u636e\u5e93\u76ee\u524d\u652f\u6301\u4e86\u4ee5\u4e0b\u51e0\u79cd\u9694\u79bb\u7ea7\u522b: \u00b6 Oracle \u6a21\u5f0f \u8bfb\u5df2\u63d0\u4ea4(ReadCommitted) \u53ef\u4e32\u884c\u5316(Serializable) MySQL\u6a21\u5f0f \u8bfb\u5df2\u63d0\u4ea4(Read Committed) \u53ef\u91cd\u590d\u8bfb(Repeatable Read) OceanBase \u6570\u636e\u5e93\u9ed8\u8ba4\u7684\u9694\u79bb\u7ea7\u522b\u4e3a\u8bfb\u5df2\u63d0\u4ea4(Read Committed)\u3002 \u7ea7\u522b\u53ca\u914d\u7f6e \u7ea7\u522b \u5168\u5c40 Global Session \u7ea7\u522b \u914d\u7f6e SET [GLOBAL | SESSION] TRANSACTION ISOLATION LEVEL REPEATABLE READ \u4e8b\u52a1\u5e76\u53d1\u63a7\u5236\u548c\u4e00\u81f4\u6027 \u00b6 \u6982\u8ff0 \u00b6 - \u6570\u636e\u5e76\u53d1\u6027 - \u4e3a\u4e86\u66f4\u597d\u5730\u63d0\u9ad8\u4e8b\u52a1\u7684\u5904\u7406\u80fd\u529b\uff0c\u6570\u636e\u5e93\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u4e8b\u52a1\u5e76\u53d1\u5730\u8bbf\u95ee\u4e0e\u4fee\u6539\u540c\u4e00\u4e2a\u6570\u636e\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u79cd \u6570\u636e\u5e76\u53d1\u6027\u6765\u5b9a\u4e49\u8bed\u4e49\u3002 - \u6570\u636e\u4e00\u81f4\u6027 - \u6570\u636e\u5e93\u901a\u8fc7\u7ef4\u62a4\u6bcf\u6b21\u66f4\u6539\uff0c\u4ea7\u751f\u65b0\u7684\u7248\u672c\uff0c\u4ece\u800c\u505a\u5230\u8bfb\u5199\u4e0d\u4e92\u65a5, \u8fd9\u88ab\u79f0\u4e3a\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236(MVCC)\u3002\u5bf9\u4e8e\u4e0d\u540c\u7684\u4e8b\u52a1\u7248\u672c\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u79cd\u6570\u636e\u591a\u7248\u672c\u6765\u5b9a\u4e49\u8bed\u4e49\uff0c\u4fdd\u8bc1\u7528\u6237\u770b\u5230\u4e00\u4e2a\u4e00\u81f4\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c\u5373\u6570\u636e\u7684\u4e00\u81f4\u6027\u5feb\u7167\u3002 - ps: \u6570\u636e\u4e00\u81f4\u6027\u4e0d\u7b49\u4ef7\u4e8e ACID \u4e2d\u7684 C (Consistency)\u3002 \u53ef\u4e32\u884c\u5316(serializable) \u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e8b\u52a1\u4e2d\u7684\u8bfb\u5199\u64cd\u4f5c\u6765\u4e3a\u4e8b\u52a1\u6765\u5efa\u7acb\u4f9d\u8d56\u5173\u7cfb \u4f9d\u8d56\u5173\u7cfb\u4ee3\u8868\u4e8b\u52a1\u4e32\u884c\u5316\u6210\u4e32\u884c\u6267\u884c\u5e8f\u540e\u7684\u4e8b\u52a1\u5b9a\u5e8f\uff0c\u82e5\u4e8b\u52a1B\u4f9d\u8d56\u4e8b\u52a1A\uff0c\u4e8b\u52a1A\u5e94\u8be5\u6392\u5728\u4e8b\u52a1B\u524d\u9762: \u5199\u5199\u51b2\u7a81(Write Dependency):\u5f53\u4e8b\u52a1A\u4fee\u6539\u6570\u636eX\u540e\uff0c\u4e8b\u52a1B\u518d\u4fee\u6539\u540c\u4e00\u6570\u636eX\uff0c\u4e8b\u52a1B\u4f9d\u8d56\u4e8b\u52a1A\u3002 \u5199\u8bfb\u51b2\u7a81(Read Dependency):\u5f53\u4e8b\u52a1A\u8bfb\u53d6\u6570\u636eX\u540e\uff0c\u82e5\u6570\u636eX\u5bf9\u5e94\u662f\u7531\u4e8b\u52a1B\u4fee\u6539\u7684\uff0c\u4e8b\u52a1A\u4f9d\u8d56\u4e8b\u52a1B\u3002 \u8bfb\u5199\u51b2\u7a81(Anti Dependency):\u5f53\u4e8b\u52a1A\u8bfb\u53d6\u6570\u636eX\u540e\uff0c\u4e8b\u52a1B\u518d\u4fee\u6539\u4e86\u540c\u4e00\u6570\u636eX\uff0c\u4e8b\u52a1B\u4f9d\u8d56\u4e8b\u52a1A\u3002 \u4e24\u9636\u6bb5\u9501\u548c\u4e50\u89c2\u9501\u673a\u5236 \u4e24\u9636\u6bb5\u9501 \u6392\u5b83\u5730\u901a\u8fc7\u52a0\u9501\u9650\u5236\u5176\u4ed6\u7684\u4e8b\u52a1\u7684\u51b2\u7a81\u4fee \u6539\uff0c\u5e76\u901a\u8fc7\u6b7b\u9501\u68c0\u6d4b\u673a\u5236\u56de\u6eda\u4ea7\u751f\u5faa\u73af\u7684\u4e8b\u52a1\u4fdd\u8bc1\u65e0\u73af \u4e50\u89c2\u9501\u673a\u5236 \u5728\u63d0\u4ea4\u65f6\u7684\u68c0\u6d4b\u9636\u6bb5\uff0c\u56de\u6eda\u6240\u6709\u53ef\u80fd\u4f1a\u5bfc \u81f4\u5f02\u5e38\u7684\u4e8b\u52a1\u4fdd\u8bc1\u4e0d\u4f1a\u4ea7\u751f\u5f02\u5e38 \u5206\u5e03\u5f0f\u4e8b\u52a1\u5904\u7406\u6a21\u578b \u00b6 \u4e8b\u52a1\u7ba1\u7406\u5668\u901a\u8fc7 \u8c03\u7528\u63a5\u53e3\u6765\u89e6\u53d1 OceanBase \u6570\u636e\u5e93\u5185\u90e8\u7684\u5b50\u7a0b\u5e8f\uff0c\u5b50\u7a0b\u5e8f\u5904\u7406\u5b8c\u6bd5\u540e\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u4e8b\u52a1\u7ba1\u7406\u5668\uff0c\u4e8b\u52a1\u7ba1\u7406 \u5668\u5c06\u4f1a\u6839\u636e\u8fd4\u56de\u7684\u7ed3\u679c\u6765\u8fdb\u884c\u4e0b\u4e00\u6b65\u5904\u7406 \u4e8b\u52a1\u4e0a\u4e0b\u6587\u5185\u5b58\u6a21\u578b \u00b6 \u4e8b\u52a1\u8868\u662f\u4e00\u4e2a\u5185\u5b58\u8868\uff0c\u4ee3\u8868\u672c\u526f\u672c\u4e2d\u6b63\u5728\u6267\u884c\u4e2d\u7684\u4e8b\u52a1\u96c6\u5408\uff0c\u4e8b\u52a1\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u6839\u636e\u4e0d\u540c\u7684\u4e8b\u52a1\u72b6\u6001\uff0c\u6765 \u51b3\u5b9a\u662f\u5426\u8981\u8bfb\u53d6\u5230\u5bf9\u5e94\u7684\u6570\u636e\u3002 \u5176\u4e2d\u6570\u636e\u72b6\u6001\u5305\u542b\u63d0\u4ea4(COMMIT )\u3001\u6267\u884c(RUNNING)\u3001\u56de\u6eda(ABORT)\u3002\u5bf9\u4e8e\u6267\u884c(RUNNING)\u7684\u4e8b\u52a1\uff0c\u53ef\u80fd\u5b58\u5728 \u672c\u5730\u63d0\u4ea4\u7248\u672c\u53f7 (localcommit version\uff0c\u5373 prepare version);\u5bf9\u4e8e\u63d0\u4ea4\u7684\u4e8b\u52a1, \u5b58\u5728 \u5168\u5c40\u63d0\u4ea4\u7248\u672c\u53f7 (global commit version\uff0c\u5373 commit version)\u3002\u5176\u4e2d \u5168\u5c40\u63d0\u4ea4\u7248\u672c\u53f7 \u4ee3\u8868\u4e8b\u52a1\u6700\u7ec8\u7684\u7248\u672c\uff0c\u4e5f\u662f\u6211\u4eec\u4e00\u81f4\u6027\u4f4d\u70b9\u7684\u51b3\u5b9a\u56e0\u7d20\u3002 \u5982\u4e0a\u56fe\u53f3\u6240\u793a\uff0c\u4e8b\u52a1 6 \u5904\u4e8e\u56de\u6eda\u72b6\u6001;\u4e8b\u52a1 7 \u5904\u4e8e\u63d0\u4ea4\u72b6\u6001\uff0c \u5168\u5c40\u63d0\u4ea4\u7248\u672c\u53f7 \u4e3a 80;\u4e8b\u52a1 12 \u5904\u4e8e\u6267\u884c\u72b6 \u6001\uff0c\u4e0d\u5b58\u5728 \u672c\u5730\u63d0\u4ea4\u7248\u672c\u53f7 ;\u4e8b\u52a1 15 \u5904\u4e8e\u6267\u884c\u72b6\u6001\uff0c \u672c\u5730\u63d0\u4ea4\u7248\u672c\u53f7 \u4e3a 130\u3002 \u591a\u7248\u672c\u8bfb\u4e00\u81f4\u6027\u6a21\u578b \u00b6","title":"01 \u4e8b\u52a1\u7ba1\u7406"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#1","text":"","title":"1.\u7b80\u4ecb"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_1","text":"\u539f\u5b50\u6027 \u4e24\u9636\u6bb5\u63d0\u4ea4\u534f\u8bae\u4fdd\u8bc1\u4e8b\u52a1\u7684\u539f\u5b50\u6027 \u4e00\u81f4\u6027 \u4e8b\u52a1\u5fc5\u987b\u662f\u4f7f\u6570\u636e\u5e93\u4ece\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u53d8\u5230\u53e6\u4e00\u4e2a\u4e00\u81f4\u6027\u72b6\u6001\u3002\u4e00\u81f4\u6027\u4e0e\u539f\u5b50\u6027\u662f\u5bc6\u5207\u76f8\u5173\u7684 \u9694\u79bb\u6027 \u5728MySQL\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301 Read Committed \u9694\u79bb\u7ea7\u522b\u548c Repeatable Read \u9694\u79bb \u7ea7\u522b\u3002 \u6301\u4e45\u5316 redo log\u8bb0\u5f55\u6570\u636e\u4fee\u6539,WAL\u673a\u5236\u4fdd\u8bc1\u5b95\u673a\u6062\u590d\uff0cpaxos\u4fdd\u8bc1\u591a\u526f\u672c\u6570\u636e\u540c\u6b65","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_2","text":"\u521b\u5efa\u5168\u5c40\u4e8b\u52a1ID \u8bc6\u522b\u5206\u533a\u6570\u636e \u521b\u5efa\u5206\u533a\u5bf9\u5e94\u7684\u4e0a\u4e0b\u6587(\u8bb0\u5f55\u4fee\u6539) \u7b49\u5f85commit/rollback \u6301\u4e45\u5316\u5230clog ddl\u53d1\u8d77\u9690\u5f0fcommit,\u65ad\u5f00\u8fde\u63a5\u53d1\u8d77\u9690\u5f0frollback \u4ee5\u4e00\u4e2a\u5206\u533a\u7684\u4e00\u6761\u4e8b\u52a1\u65e5\u5fd7\u4e3a\u4f8b\uff0c\u6b63\u5e38\u7684\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b: \u5728 follower \u4e0a\uff0c\u4f1a\u5bf9\u5df2\u63d0\u4ea4\u7684\u65e5\u5fd7\u5b9e\u65f6\u8fdb\u884c\u56de\u653e\u3002\u56de\u653e\u6d41\u7a0b\u5927\u81f4\u5982\u4e0b:","title":"\u6267\u884c\u6d41\u7a0b"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_3","text":"\u5bf9\u4e8e\u7528\u6237\u79df\u6237\u800c\u8a00\uff0c\u79df\u6237\u7ea7\u522b\u5185\u90e8\u8868 __all_dummy \u7684 leader \u4f5c\u4e3a GTS \u670d\u52a1\u63d0\u4f9b\u8005\uff0c\u65f6\u95f4\u6765\u6e90\u4e8e\u8be5leader\u7684\u672c\u5730\u65f6\u949f\u3002GTS \u9ed8\u8ba4\u662f\u4e09\u526f\u672c\u7684\uff0c\u5176\u9ad8\u53ef\u7528\u80fd\u529b\u8ddf\u666e\u901a\u8868\u7684\u80fd\u529b\u4e00\u6837\u3002 \u5bf9\u4e8e\u7cfb\u7edf\u79df\u6237\uff0c\u4f7f\u7528 __all_core_table \u7684 leader \u4f5c\u4e3a GTS \u670d\u52a1\u7684\u63d0\u4f9b\u8005\uff0c\u9ad8\u53ef\u7528\u80fd\u529b\u4e0e\u666e\u901a\u8868\u4e00\u6837 \u65f6\u95f4\u6233\u6b63\u786e\u6027\u4fdd\u8bc1 \u6709\u4e3b\u6539\u9009 \u539f Leader \u4e3b\u52a8\u53d1\u8d77\u6539\u9009\u7684\u573a\u666f\uff0c\u6211\u4eec\u79f0\u4e3a\u6709\u4e3b\u6539\u9009\u3002\u65b0 leader \u4e0a\u4efb\u4e4b\u524d\u5148\u83b7\u53d6\u65e7 leader \u7684\u6700\u5927\u5df2\u7ecf\u6388 \u6743\u7684\u65f6\u95f4\u6233\u4f5c\u4e3a\u65b0 leader \u65f6\u95f4\u6233\u6388\u6743\u7684\u57fa\u51c6\u503c\u3002\u56e0\u6b64\u8be5\u573a\u666f\u4e0b\uff0cGTS \u63d0\u4f9b\u7684\u65f6\u95f4\u6233\u4e0d\u4f1a\u56de\u9000\u3002 \u65e0\u4e3b\u9009\u4e3e \u539f leader \u4e0e\u591a\u6570\u6d3e\u6210\u5458\u53d1\u751f\u7f51\u7edc\u9694\u79bb\uff0c\u7b49 lease \u8fc7\u671f\u4e4b\u540e\uff0c\u539f follower \u4f1a\u91cd\u65b0\u9009\u4e3b\uff0c\u8fd9\u4e00\u4e2a\u8fc7\u7a0b\uff0c\u6211\u4eec \u79f0\u4e3a\u65e0\u4e3b\u9009\u4e3e\u3002\u9009\u4e3e\u670d\u52a1\u4fdd\u8bc1\u4e86\u65e0\u4e3b\u9009\u4e3e\u573a\u666f\u4e0b\uff0c\u65b0\u65e7 Leader \u7684 lease \u662f\u4e0d\u91cd\u53e0\u7684\uff0c\u56e0\u6b64\u80fd\u591f\u4fdd\u8bc1\u672c\u5730 \u65f6\u949f\u4e00\u5b9a\u5927\u4e8e\u65e7\u4e3b\u63d0\u4f9b\u7684\u6700\u5927\u65f6\u95f4\u6233\u3002\u56e0\u6b64\u65b0 leader \u80fd\u591f\u4fdd\u8bc1 GTS \u63d0\u4f9b\u7684\u65f6\u95f4\u6233\u4e0d\u56de\u9000\u3002","title":"\u5168\u5c40\u65f6\u95f4\u6233"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_4","text":"\u4e8b\u52a1\u914d\u7f6e \u5927\u5c0f 2.x\u7248\u672c\u4e0a\u9650\u4e3a100M\uff0c3.x\u4e0d\u505a\u9650\u5236 \u914d\u7f6e(\u79df\u6237\u4f18\u5148) \u79df\u6237\u7ea7\u914d\u7f6e\u9879 _tenant_max_trx_size \u96c6\u7fa4\u7ea7\u914d\u7f6e\u9879 _max_trx_size \u72b6\u6001 \u865a\u62df\u8868 __all_virtual_trans_stat \u91cc\u7684state\u5b57\u6bb5\u6807\u8bc6\u4e86\u4e8b\u52a1\u6240\u5904\u7684\u72b6\u6001 \u8d85\u65f6 \u8bed\u53e5\u8d85\u65f6\u65f6\u95f4,\u7cfb\u7edf\u53d8\u91cfob_query_timeout,\u9ed8\u8ba4\u4e3a10s \u4e8b\u52a1\u8d85\u65f6\u65f6\u95f4,\u7cfb\u7edf\u53d8\u91cfob_trx_timeout,\u4e8b\u52a1\u8d85\u65f6\u65f6\u9700\u5e94\u7528\u4e3b\u52a8\u53d1\u8d77rollback \u4e8b\u52a1\u8d85\u65f6\u81ea\u52a8\u56de\u6eda\u65f6\u95f4,\u7cfb\u7edf\u53d8\u91cf ob_trx_idle_timeout,\u5373session\u4e0a\u4e00\u4e2a\u4e8b\u52a1\u5904\u4e8e\u7684 IDLE(\u7a7a\u95f2) \u72b6\u6001\u7684\u6700\u957f\u65f6\u95f4 Savepoint \u4e8b\u52a1\u6267\u884c\u4e2d\u7684\u4fdd\u5b58\u70b9\uff0c\u53ef\u56de\u6eda\u81f3\u4fdd\u5b58\u70b9","title":"\u4e8b\u52a1\u63a7\u5236"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#redo-log","text":"\u4ee5\u7269\u7406\u65e5\u5fd7\u7684\u5f62\u5f0f\u8bb0\u5f55\u6570\u636e\u4fee\u6539\u5386\u53f2(\u64cd\u4f5c\u7ed3\u679c) \u9075\u5faaWAL(write-ahead logging)\u539f\u5219, \u5728\u4e8b\u52a1\u63d0\u4ea4\u524d\u5c06 Redo \u65e5\u5fd7\u6301\u4e45\u5316\u81f3clog, \u7528\u4e8e\u5b95\u673a\u6062\u590d \u91c7\u7528 Multi-Paxos \u534f\u8bae \u8fdb\u884c\u591a\u526f\u672c\u540c\u6b65, \u63d0\u4ea4\u4e8b\u52a1\u9700\u8981\u4fdd\u8bc1redo\u65e5\u5fd7\u5df2\u540c\u6b65\u5230\u591a\u6570\u6d3e\u7684\u526f\u672c\u4e0a\u65f6\u624d\u80fd\u6210\u529f, \u6700\u7ec8\u4f1a\u540c\u6b65\u5230\u6240\u6709\u526f\u672c\u4e0a","title":"redo log"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_5","text":"\u7b80\u8ff0 \u5206\u533a\u7ea7\u522b\u7684\u65e5\u5fd7\u6d41,\u4fdd\u8bc1\u6709\u5e8f\u8fde\u7eed,\u6700\u7ec8\u6d41\u5165\u65e5\u5fd7\u6587\u4ef6 \u7c7b\u578b Clog(commit log) \u8bb0\u5f55redoLog\u5185\u5bb9,\u540c\u6b65\u591a\u526f\u672c ilog(index log) Clog\u7684\u7d22\u5f15\u6587\u4ef6,\u8bb0\u5f55\u8fde\u7eed\u9012\u589e\u7684Clog\u6587\u4ef6ID \u4ea7\u751f\u548c\u6536\u96c6 \u4e8b\u52a1\u63d0\u4ea4\u65f6\u5c06redolog\u5199\u5165clog,\u4ee52MB\u5927\u5c0f\u4e3a\u9650\u5236,\u4ea4\u4e88clog\u540c\u6b65\u5176\u4f59\u526f\u672c(\u534a\u6570\u4ee5\u4e0a) \u5355\u6761 Redo \u65e5\u5fd7\u805a\u5408\u4e86\u591a\u6b21\u5199\u64cd\u4f5c\u7684\u5185\u5bb9 \u63a7\u5236\u4e0e\u56de\u6536 clog_disk_usage_limit_percentage \u63a7\u5236Clog\u6216ilog\u78c1\u76d8\u7a7a\u95f4\u7684\u4f7f\u7528\u4e0a\u9650 clog_disk_utilization_threshold \u4f7f\u7528\u4e0b\u9650","title":"\u65e5\u5fd7\u6587\u4ef6"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_6","text":"\u6307\u4e8b\u52a1\u6240\u64cd\u4f5c\u7684\u8868\u7684\u5206\u533aLeader\u5168\u90e8\u5728\u540c\u4e00\u4e2aServer\u4e0a\uff0c\u5e76\u4e14\u4e0eSession\u5efa\u7acb\u7684Server\u5177\u6709\u76f8\u540c\u7684\u4e8b\u52a1 \u5355\u5206\u533a\u4e8b\u52a1 \u4e8b\u52a1\u53ea\u6d89\u53ca\u4e00\u4e2a\u5206\u533a, \u5982\u540c\u4e00\u5f20\u8868\u7684\u540c\u4e00\u4e2a\u5206\u533a \u5355\u673a\u591a\u5206\u533a\u4e8b\u52a1 \u4e8b\u52a1\u53ea\u6d89\u53ca\u591a\u4e2a\u5206\u533a, \u5982\u540c\u4e8b\u52a1\u4e0b\u4e0d\u540c\u8868\u7684\u64cd\u4f5c","title":"\u672c\u5730\u4e8b\u52a1\u6982\u8ff0"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_7","text":"\u4e8b\u52a1\u6d89\u53ca\u7684\u5206\u533a\u6570\u91cf\u5927\u4e8e\u4e00\u4e2a \u6216 \u4e8b\u52a1\u6d89\u53ca\u7684\u5206\u533a\u6570\u91cf\u53ea\u6709\u4e00\u4e2a\uff0c\u4e14\u5206\u533aleader\u548c\u4e8b\u52a1session\u4f4d\u7f6e\u4e0d\u5728\u540c\u4e00\u4e2aserver","title":"\u5206\u5e03\u5f0f\u4e8b\u52a1\u6982\u8ff0"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#2pc","text":"\u5f15\u5165\u4e00\u4e2a\u4e2d\u5fc3\u8282\u70b9\u7edf\u4e00\u5904\u7406\u6240\u6709\u8282\u70b9\u7684\u6267\u884c\u903b\u8f91\uff0c\u4ee5\u611f\u77e5\u6bcf\u4e2a\u8282\u70b9\u7684\u4e8b\u52a1\u6267\u884c\u60c5\u51b5\u3002\u8be5\u4e2d\u5fc3\u8282\u70b9\u79f0\u4e3a\u534f\u8c03\u8005(coordinator)\uff0c\u88ab\u534f\u8c03\u8005\u8c03\u5ea6\u7684\u5176\u5b83\u8282\u70b9\u79f0\u4e3a\u53c2\u4e0e\u8005(participant)\u3002 2PC\u5c06\u5206\u5e03\u5f0f\u4e8b\u52a1\u5206\u6210\u4e86\u4e24\u4e2a\u9636\u6bb5\uff0c\u4e24\u4e2a\u9636\u6bb5\u5206\u522b\u4e3a\u63d0\u4ea4\u8bf7\u6c42\uff08\u6295\u7968\uff09\u548c\u63d0\u4ea4\uff08\u6267\u884c\uff09\u3002\u534f\u8c03\u8005\u6839\u636e\u53c2\u4e0e\u8005\u7684\u54cd\u5e94\u6765\u51b3\u5b9a\u662f\u5426\u9700\u8981\u771f\u6b63\u5730\u6267\u884c\u4e8b\u52a1\u3002\u4e00\u822c\u5730\uff0c\u8fd8\u6709\u4e00\u4e2a\u9884\u5904\u7406\u9636\u6bb5\uff0c\u5305\u62ec\u83b7\u53d6\u884c\u9501\uff0c\u751f\u6210redo Prepare\u9636\u6bb5: 1.\u534f\u8c03\u8005\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001prepare\u8bf7\u6c42\u4e0e\u4e8b\u52a1\u5185\u5bb9\uff0c\u8be2\u95ee\u662f\u5426\u53ef\u4ee5\u51c6\u5907\u4e8b\u52a1\u63d0\u4ea4\uff0c\u5e76\u7b49\u5f85\u53c2\u4e0e\u8005\u7684\u54cd\u5e94\u3002 2.\u53c2\u4e0e\u8005\u6267\u884c\u4e8b\u52a1\u4e2d\u5305\u542b\u7684\u64cd\u4f5c\uff0c\u5e76\u8bb0\u5f55undo\u65e5\u5fd7\uff08\u7528\u4e8e\u56de\u6eda\uff09\u548credo\u65e5\u5fd7\uff08\u7528\u4e8e\u91cd\u653e\uff09\uff0c\u4f46\u4e0d\u771f\u6b63\u63d0\u4ea4\u3002 3.\u53c2\u4e0e\u8005\u5411\u534f\u8c03\u8005\u8fd4\u56de\u4e8b\u52a1\u64cd\u4f5c\u7684\u6267\u884c\u7ed3\u679c\uff0c\u6267\u884c\u6210\u529f\u8fd4\u56deyes\uff0c\u5426\u5219\u8fd4\u56deno\u3002 Commit\u9636\u6bb5: success: \u82e5\u6240\u6709\u53c2\u4e0e\u8005\u90fd\u8fd4\u56deyes\uff0c\u8bf4\u660e\u4e8b\u52a1\u53ef\u4ee5\u63d0\u4ea4\uff1a 1.\u534f\u8c03\u8005\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001commit\u8bf7\u6c42\u3002 2.\u53c2\u4e0e\u8005\u6536\u5230commit\u8bf7\u6c42\u540e\uff0c\u5c06\u4e8b\u52a1\u771f\u6b63\u5730\u63d0\u4ea4\u4e0a\u53bb\uff0c\u5e76\u91ca\u653e\u5360\u7528\u7684\u4e8b\u52a1\u8d44\u6e90\uff0c\u5e76\u5411\u534f\u8c03\u8005\u8fd4\u56deack\u3002 3.\u534f\u8c03\u8005\u6536\u5230\u6240\u6709\u53c2\u4e0e\u8005\u7684ack\u6d88\u606f\uff0c\u4e8b\u52a1\u6210\u529f\u5b8c\u6210\u3002 failed: 1.\u534f\u8c03\u8005\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001rollback\u8bf7\u6c42\u3002 2.\u53c2\u4e0e\u8005\u6536\u5230rollback\u8bf7\u6c42\u540e\uff0c\u6839\u636eundo\u65e5\u5fd7\u56de\u6eda\u5230\u4e8b\u52a1\u6267\u884c\u524d\u7684\u72b6\u6001\uff0c\u91ca\u653e\u5360\u7528\u7684\u4e8b\u52a1\u8d44\u6e90\uff0c\u5e76\u5411\u534f\u8c03\u8005\u8fd4\u56deack\u3002 3.\u534f\u8c03\u8005\u6536\u5230\u6240\u6709\u53c2\u4e0e\u8005\u7684ack\u6d88\u606f\uff0c\u4e8b\u52a1\u56de\u6eda\u5b8c\u6210\u3002 OceanBase\u5bf9\u4f20\u7edf\u76842PC\u6d41\u7a0b\u505a\u4e86\u4f18\u5316\uff0c\u4f20\u7edf\u7684\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u5ef6\u8fdf\u76f8\u5f53\u4e8e 2\u6b21RPC \u548c 4\u6b21\u5199\u65e5\u5fd7 \u64cd\u4f5c\u3002 OceanBase\u91c7\u7528\u534f\u8c03\u8005\u65e0\u72b6\u6001\u8bbe\u8ba1,\u534f\u8c03\u8005\u4e0d\u518d\u7ef4\u62a4\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u72b6\u6001 \u800c\u662f\u5728\u5b95\u673a\u6062\u590d\u65f6,\u901a\u8fc7\u6240\u6709\u53c2\u4e0e\u8005\u7684\u5c40\u90e8\u72b6\u6001\u52a8\u6001\u6784\u9020\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684\u5168\u5c40\u72b6\u6001\u3002 \u907f\u514d\u4e86\u534f\u8c03\u8005\u5199\u65e5\u5fd7\uff0c\u4e00\u6b21\u4e24\u9636\u6bb5\u63d0\u4ea4\u7684\u5ef6\u8fdf\u964d\u4f4e\u5230 1\u6b21RPC \u548c 1\u6b21\u5199\u65e5\u5fd7 \u64cd\u4f5c\u3002 \u5176\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a: PREPARE\u9636\u6bb5 \u534f\u8c03\u8005:\u534f\u8c03\u8005\u5411\u6240\u6709\u7684\u53c2\u4e0e\u8005\u53d1\u8d77 prepare request \u53c2\u4e0e\u8005:\u53c2\u4e0e\u8005\u6536\u5230prepare request\u4e4b\u540e\uff0c\u51b3\u5b9a\u662f\u5426\u53ef\u4ee5\u63d0\u4ea4\uff0c\u5982\u679c\u53ef\u4ee5\u5219\u6301\u4e45\u5316prepare log\u5e76\u4e14\u5411\u534f\u8c03\u8005\u8fd4\u56deprepare\u6210\u529f\uff0c\u5426\u5219\u8fd4\u56deprepare\u5931\u8d25\u3002 COMMIT\u9636\u6bb5 \u534f\u8c03\u8005:\u534f\u8c03\u8005\u6536\u9f50\u6240\u6709\u53c2\u4e0e\u8005\u7684 prepare ack \u4e4b\u540e\uff0c\u8fdb\u5165 COMMIT \u72b6\u6001\uff0c\u5411\u7528\u6237\u8fd4\u56de\u4e8b\u52a1 commit \u6210\u529f\uff0c \u7136\u540e\u5411\u6240\u6709\u53c2\u4e0e\u8005\u53d1\u9001\u4e8b\u52a1 commit request\u3002 \u53c2\u4e0e\u8005:\u53c2\u4e0e\u8005\u6536\u5230commit request\u4e4b\u540e\u91ca\u653e\u8d44\u6e90\u89e3\u884c\u9501\uff0c\u7136\u540e\u63d0\u4ea4commit log\uff0c\u65e5\u5fd7\u6301\u4e45\u5316\u5b8c\u6210\u4e4b\u540e\u7ed9\u534f\u8c03\u8005\u56de\u590dcommit ok \u6d88\u606f\uff0c\u6700\u540e\u91ca\u653e\u4e8b\u52a1\u4e0a\u4e0b\u6587\u5e76\u9000\u51fa\u3002 - ps: XA\u4e8b\u52a1\u4e0d\u505a\u8d58\u8ff0\u53ef\u81ea\u884c\u4e86\u89e3","title":"\u4fe9\u9636\u6bb5\u63d0\u4ea4(2PC)"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_8","text":"","title":"\u9694\u79bb\u7ea7\u522b"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#oceanbase","text":"Oracle \u6a21\u5f0f \u8bfb\u5df2\u63d0\u4ea4(ReadCommitted) \u53ef\u4e32\u884c\u5316(Serializable) MySQL\u6a21\u5f0f \u8bfb\u5df2\u63d0\u4ea4(Read Committed) \u53ef\u91cd\u590d\u8bfb(Repeatable Read) OceanBase \u6570\u636e\u5e93\u9ed8\u8ba4\u7684\u9694\u79bb\u7ea7\u522b\u4e3a\u8bfb\u5df2\u63d0\u4ea4(Read Committed)\u3002 \u7ea7\u522b\u53ca\u914d\u7f6e \u7ea7\u522b \u5168\u5c40 Global Session \u7ea7\u522b \u914d\u7f6e SET [GLOBAL | SESSION] TRANSACTION ISOLATION LEVEL REPEATABLE READ","title":"OceanBase \u6570\u636e\u5e93\u76ee\u524d\u652f\u6301\u4e86\u4ee5\u4e0b\u51e0\u79cd\u9694\u79bb\u7ea7\u522b:"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_9","text":"","title":"\u4e8b\u52a1\u5e76\u53d1\u63a7\u5236\u548c\u4e00\u81f4\u6027"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_10","text":"- \u6570\u636e\u5e76\u53d1\u6027 - \u4e3a\u4e86\u66f4\u597d\u5730\u63d0\u9ad8\u4e8b\u52a1\u7684\u5904\u7406\u80fd\u529b\uff0c\u6570\u636e\u5e93\u5141\u8bb8\u7528\u6237\u901a\u8fc7\u4e8b\u52a1\u5e76\u53d1\u5730\u8bbf\u95ee\u4e0e\u4fee\u6539\u540c\u4e00\u4e2a\u6570\u636e\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u79cd \u6570\u636e\u5e76\u53d1\u6027\u6765\u5b9a\u4e49\u8bed\u4e49\u3002 - \u6570\u636e\u4e00\u81f4\u6027 - \u6570\u636e\u5e93\u901a\u8fc7\u7ef4\u62a4\u6bcf\u6b21\u66f4\u6539\uff0c\u4ea7\u751f\u65b0\u7684\u7248\u672c\uff0c\u4ece\u800c\u505a\u5230\u8bfb\u5199\u4e0d\u4e92\u65a5, \u8fd9\u88ab\u79f0\u4e3a\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236(MVCC)\u3002\u5bf9\u4e8e\u4e0d\u540c\u7684\u4e8b\u52a1\u7248\u672c\uff0c\u6211\u4eec\u9700\u8981\u4e3a\u8fd9\u79cd\u6570\u636e\u591a\u7248\u672c\u6765\u5b9a\u4e49\u8bed\u4e49\uff0c\u4fdd\u8bc1\u7528\u6237\u770b\u5230\u4e00\u4e2a\u4e00\u81f4\u7684\u6570\u636e\u5e93\u72b6\u6001\uff0c\u5373\u6570\u636e\u7684\u4e00\u81f4\u6027\u5feb\u7167\u3002 - ps: \u6570\u636e\u4e00\u81f4\u6027\u4e0d\u7b49\u4ef7\u4e8e ACID \u4e2d\u7684 C (Consistency)\u3002 \u53ef\u4e32\u884c\u5316(serializable) \u6211\u4eec\u53ef\u4ee5\u5229\u7528\u4e8b\u52a1\u4e2d\u7684\u8bfb\u5199\u64cd\u4f5c\u6765\u4e3a\u4e8b\u52a1\u6765\u5efa\u7acb\u4f9d\u8d56\u5173\u7cfb \u4f9d\u8d56\u5173\u7cfb\u4ee3\u8868\u4e8b\u52a1\u4e32\u884c\u5316\u6210\u4e32\u884c\u6267\u884c\u5e8f\u540e\u7684\u4e8b\u52a1\u5b9a\u5e8f\uff0c\u82e5\u4e8b\u52a1B\u4f9d\u8d56\u4e8b\u52a1A\uff0c\u4e8b\u52a1A\u5e94\u8be5\u6392\u5728\u4e8b\u52a1B\u524d\u9762: \u5199\u5199\u51b2\u7a81(Write Dependency):\u5f53\u4e8b\u52a1A\u4fee\u6539\u6570\u636eX\u540e\uff0c\u4e8b\u52a1B\u518d\u4fee\u6539\u540c\u4e00\u6570\u636eX\uff0c\u4e8b\u52a1B\u4f9d\u8d56\u4e8b\u52a1A\u3002 \u5199\u8bfb\u51b2\u7a81(Read Dependency):\u5f53\u4e8b\u52a1A\u8bfb\u53d6\u6570\u636eX\u540e\uff0c\u82e5\u6570\u636eX\u5bf9\u5e94\u662f\u7531\u4e8b\u52a1B\u4fee\u6539\u7684\uff0c\u4e8b\u52a1A\u4f9d\u8d56\u4e8b\u52a1B\u3002 \u8bfb\u5199\u51b2\u7a81(Anti Dependency):\u5f53\u4e8b\u52a1A\u8bfb\u53d6\u6570\u636eX\u540e\uff0c\u4e8b\u52a1B\u518d\u4fee\u6539\u4e86\u540c\u4e00\u6570\u636eX\uff0c\u4e8b\u52a1B\u4f9d\u8d56\u4e8b\u52a1A\u3002 \u4e24\u9636\u6bb5\u9501\u548c\u4e50\u89c2\u9501\u673a\u5236 \u4e24\u9636\u6bb5\u9501 \u6392\u5b83\u5730\u901a\u8fc7\u52a0\u9501\u9650\u5236\u5176\u4ed6\u7684\u4e8b\u52a1\u7684\u51b2\u7a81\u4fee \u6539\uff0c\u5e76\u901a\u8fc7\u6b7b\u9501\u68c0\u6d4b\u673a\u5236\u56de\u6eda\u4ea7\u751f\u5faa\u73af\u7684\u4e8b\u52a1\u4fdd\u8bc1\u65e0\u73af \u4e50\u89c2\u9501\u673a\u5236 \u5728\u63d0\u4ea4\u65f6\u7684\u68c0\u6d4b\u9636\u6bb5\uff0c\u56de\u6eda\u6240\u6709\u53ef\u80fd\u4f1a\u5bfc \u81f4\u5f02\u5e38\u7684\u4e8b\u52a1\u4fdd\u8bc1\u4e0d\u4f1a\u4ea7\u751f\u5f02\u5e38","title":"\u6982\u8ff0"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_11","text":"\u4e8b\u52a1\u7ba1\u7406\u5668\u901a\u8fc7 \u8c03\u7528\u63a5\u53e3\u6765\u89e6\u53d1 OceanBase \u6570\u636e\u5e93\u5185\u90e8\u7684\u5b50\u7a0b\u5e8f\uff0c\u5b50\u7a0b\u5e8f\u5904\u7406\u5b8c\u6bd5\u540e\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u4e8b\u52a1\u7ba1\u7406\u5668\uff0c\u4e8b\u52a1\u7ba1\u7406 \u5668\u5c06\u4f1a\u6839\u636e\u8fd4\u56de\u7684\u7ed3\u679c\u6765\u8fdb\u884c\u4e0b\u4e00\u6b65\u5904\u7406","title":"\u5206\u5e03\u5f0f\u4e8b\u52a1\u5904\u7406\u6a21\u578b"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_12","text":"\u4e8b\u52a1\u8868\u662f\u4e00\u4e2a\u5185\u5b58\u8868\uff0c\u4ee3\u8868\u672c\u526f\u672c\u4e2d\u6b63\u5728\u6267\u884c\u4e2d\u7684\u4e8b\u52a1\u96c6\u5408\uff0c\u4e8b\u52a1\u5728\u6267\u884c\u8fc7\u7a0b\u4e2d\u4f1a\u6839\u636e\u4e0d\u540c\u7684\u4e8b\u52a1\u72b6\u6001\uff0c\u6765 \u51b3\u5b9a\u662f\u5426\u8981\u8bfb\u53d6\u5230\u5bf9\u5e94\u7684\u6570\u636e\u3002 \u5176\u4e2d\u6570\u636e\u72b6\u6001\u5305\u542b\u63d0\u4ea4(COMMIT )\u3001\u6267\u884c(RUNNING)\u3001\u56de\u6eda(ABORT)\u3002\u5bf9\u4e8e\u6267\u884c(RUNNING)\u7684\u4e8b\u52a1\uff0c\u53ef\u80fd\u5b58\u5728 \u672c\u5730\u63d0\u4ea4\u7248\u672c\u53f7 (localcommit version\uff0c\u5373 prepare version);\u5bf9\u4e8e\u63d0\u4ea4\u7684\u4e8b\u52a1, \u5b58\u5728 \u5168\u5c40\u63d0\u4ea4\u7248\u672c\u53f7 (global commit version\uff0c\u5373 commit version)\u3002\u5176\u4e2d \u5168\u5c40\u63d0\u4ea4\u7248\u672c\u53f7 \u4ee3\u8868\u4e8b\u52a1\u6700\u7ec8\u7684\u7248\u672c\uff0c\u4e5f\u662f\u6211\u4eec\u4e00\u81f4\u6027\u4f4d\u70b9\u7684\u51b3\u5b9a\u56e0\u7d20\u3002 \u5982\u4e0a\u56fe\u53f3\u6240\u793a\uff0c\u4e8b\u52a1 6 \u5904\u4e8e\u56de\u6eda\u72b6\u6001;\u4e8b\u52a1 7 \u5904\u4e8e\u63d0\u4ea4\u72b6\u6001\uff0c \u5168\u5c40\u63d0\u4ea4\u7248\u672c\u53f7 \u4e3a 80;\u4e8b\u52a1 12 \u5904\u4e8e\u6267\u884c\u72b6 \u6001\uff0c\u4e0d\u5b58\u5728 \u672c\u5730\u63d0\u4ea4\u7248\u672c\u53f7 ;\u4e8b\u52a1 15 \u5904\u4e8e\u6267\u884c\u72b6\u6001\uff0c \u672c\u5730\u63d0\u4ea4\u7248\u672c\u53f7 \u4e3a 130\u3002","title":"\u4e8b\u52a1\u4e0a\u4e0b\u6587\u5185\u5b58\u6a21\u578b"},{"location":"oceanbase/5%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/01%20%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/#_13","text":"","title":"\u591a\u7248\u672c\u8bfb\u4e00\u81f4\u6027\u6a21\u578b"},{"location":"oceanbase/6%20%E8%BF%81%E7%A7%BB%E9%97%AE%E9%A2%98/01%20%E8%BF%81%E7%A7%BB/","text":"1. \u6279\u91cf\u63d2\u5165\u662f\u5426\u4e3b\u952eid\u4e0d\u5bf9\u5e94\u95ee\u9898\uff08\u5f85\u786e\u8ba4\uff09 \u00b6 mybatis\u4e3b\u952e\u83b7\u53d6\u7b56\u7565\u53c2\u7167MapperMethod\uff0c\u975emybatis\u751f\u6210\uff0c\u6839\u636e\u670d\u52a1\u5668\u8fd4\u56de\u6bcf\u884c\u4e8c\u8fdb\u5236rowdata\u83b7\u53d6 2. \u626b\u63cf\u662f\u5426\u51fa\u73b0\u6f0f\u626b\u95ee\u9898 \u00b6 2.1 \u6839\u636elastScanId\u505alimit \u662f\u5426\u53ef\u4ee5\u521b\u5efa\u666e\u901a\u8868\uff1f 2.2 \u6839\u636elastScanId\u548cendId\u505a\u533a\u95f4\u67e5\u8be2 \u662f\u5426\u53ef\u4ee5\u521b\u5efa\u666e\u901a\u8868\uff1f 3. \u70ed\u5207\u65b9\u6848 \u00b6 3.1 \u6b63\u5411\u8fc1\u79fb OMS \u63d0\u4f9b\u7684\u4e0d\u505c\u670d\u6570\u636e\u8fc1\u79fb\u529f\u80fd\uff0c\u4e0d\u5f71\u54cd\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u6e90\u6570\u636e\u5e93\u6301\u7eed\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u80fd\u591f\u6700\u5c0f\u5316\u6570\u636e\u8fc1\u79fb\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u5728\u5b8c\u6210\u7ed3\u6784\u8fc1\u79fb\u3001\u5168\u91cf\u6570\u636e\u8fc1\u79fb\u548c\u589e\u91cf\u6570\u636e\u8fc1\u79fb\u540e\uff0c\u6e90\u6570\u636e\u5e93\u7684\u5168\u91cf\u548c\u589e\u91cf\u6570\u636e\u5747\u5df2\u5b9e\u65f6\u540c\u6b65\u81f3\u76ee\u6807\u6570\u636e\u5e93\u4e2d\uff0c \u6570\u636e\u6821\u9a8c\u901a\u8fc7\u540e\uff0c\u4e1a\u52a1\u53ef\u4ee5\u4ece\u6e90\u7aef\u5207\u6362\u81f3\u76ee\u6807\u7aef\u3002 3.2 \u9006\u5411\u8fc1\u79fb \u5e94\u7528\u5207\u5230OceanBase\u4e4b\u524d\uff0cOMS\u53ef\u542f\u7528\u53cd\u5411\u6570\u636e\u540c\u6b65\u94fe\u8def\uff0c\u6b64\u65f6\u5e94\u7528\u5728OceanBase\u4ea7\u751f\u7684\u6570\u636e\u53d8\u66f4\u4f1a\u5b9e\u65f6\u540c\u6b65\u5230\u6e90\u7aef\u6570\u636e\u5e93\u4ee5\u6b64\u6765\u964d\u4f4e\u8fc1\u79fb\u98ce\u9669","title":"01 \u8fc1\u79fb"},{"location":"oceanbase/6%20%E8%BF%81%E7%A7%BB%E9%97%AE%E9%A2%98/01%20%E8%BF%81%E7%A7%BB/#1-id","text":"mybatis\u4e3b\u952e\u83b7\u53d6\u7b56\u7565\u53c2\u7167MapperMethod\uff0c\u975emybatis\u751f\u6210\uff0c\u6839\u636e\u670d\u52a1\u5668\u8fd4\u56de\u6bcf\u884c\u4e8c\u8fdb\u5236rowdata\u83b7\u53d6","title":"1. \u6279\u91cf\u63d2\u5165\u662f\u5426\u4e3b\u952eid\u4e0d\u5bf9\u5e94\u95ee\u9898\uff08\u5f85\u786e\u8ba4\uff09"},{"location":"oceanbase/6%20%E8%BF%81%E7%A7%BB%E9%97%AE%E9%A2%98/01%20%E8%BF%81%E7%A7%BB/#2","text":"2.1 \u6839\u636elastScanId\u505alimit \u662f\u5426\u53ef\u4ee5\u521b\u5efa\u666e\u901a\u8868\uff1f 2.2 \u6839\u636elastScanId\u548cendId\u505a\u533a\u95f4\u67e5\u8be2 \u662f\u5426\u53ef\u4ee5\u521b\u5efa\u666e\u901a\u8868\uff1f","title":"2. \u626b\u63cf\u662f\u5426\u51fa\u73b0\u6f0f\u626b\u95ee\u9898"},{"location":"oceanbase/6%20%E8%BF%81%E7%A7%BB%E9%97%AE%E9%A2%98/01%20%E8%BF%81%E7%A7%BB/#3","text":"3.1 \u6b63\u5411\u8fc1\u79fb OMS \u63d0\u4f9b\u7684\u4e0d\u505c\u670d\u6570\u636e\u8fc1\u79fb\u529f\u80fd\uff0c\u4e0d\u5f71\u54cd\u8fc1\u79fb\u8fc7\u7a0b\u4e2d\u6e90\u6570\u636e\u5e93\u6301\u7eed\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\uff0c\u80fd\u591f\u6700\u5c0f\u5316\u6570\u636e\u8fc1\u79fb\u5bf9\u4e1a\u52a1\u7684\u5f71\u54cd\u3002 \u5728\u5b8c\u6210\u7ed3\u6784\u8fc1\u79fb\u3001\u5168\u91cf\u6570\u636e\u8fc1\u79fb\u548c\u589e\u91cf\u6570\u636e\u8fc1\u79fb\u540e\uff0c\u6e90\u6570\u636e\u5e93\u7684\u5168\u91cf\u548c\u589e\u91cf\u6570\u636e\u5747\u5df2\u5b9e\u65f6\u540c\u6b65\u81f3\u76ee\u6807\u6570\u636e\u5e93\u4e2d\uff0c \u6570\u636e\u6821\u9a8c\u901a\u8fc7\u540e\uff0c\u4e1a\u52a1\u53ef\u4ee5\u4ece\u6e90\u7aef\u5207\u6362\u81f3\u76ee\u6807\u7aef\u3002 3.2 \u9006\u5411\u8fc1\u79fb \u5e94\u7528\u5207\u5230OceanBase\u4e4b\u524d\uff0cOMS\u53ef\u542f\u7528\u53cd\u5411\u6570\u636e\u540c\u6b65\u94fe\u8def\uff0c\u6b64\u65f6\u5e94\u7528\u5728OceanBase\u4ea7\u751f\u7684\u6570\u636e\u53d8\u66f4\u4f1a\u5b9e\u65f6\u540c\u6b65\u5230\u6e90\u7aef\u6570\u636e\u5e93\u4ee5\u6b64\u6765\u964d\u4f4e\u8fc1\u79fb\u98ce\u9669","title":"3. \u70ed\u5207\u65b9\u6848"},{"location":"prometheus/00%20promethues/","text":"DEPLOY \u00b6 > Prometheus > Grafana > PromQL Cheat Sheet > QUERYING PROMETHEUS # prometheus config global: scrape_interval: 15s scrape_configs: - job_name: \"prometheus\" scrape_interval: 5s scheme: https static_configs: - targets: [\"ops-test01\"] - job_name: \"spring-actuator\" metrics_path: \"/prometheus\" scheme: https scrape_interval: 5s static_configs: - targets: [\"ops-test01\"]","title":"00 promethues"},{"location":"prometheus/00%20promethues/#deploy","text":"> Prometheus > Grafana > PromQL Cheat Sheet > QUERYING PROMETHEUS # prometheus config global: scrape_interval: 15s scrape_configs: - job_name: \"prometheus\" scrape_interval: 5s scheme: https static_configs: - targets: [\"ops-test01\"] - job_name: \"spring-actuator\" metrics_path: \"/prometheus\" scheme: https scrape_interval: 5s static_configs: - targets: [\"ops-test01\"]","title":"DEPLOY"}]}